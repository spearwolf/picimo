webpackJsonpBLITPUNK([3],{

/***/ 336:
/***/ (function(module, exports, __webpack_require__) {

!function(t,e){ true?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.BLITPUNK=e():t.BLITPUNK=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=77)}([function(t,e,n){"use strict";e.__esModule=!0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.default=function(t){"object"===(void 0===t?"undefined":r(t))&&(t.destroyed||(i.is(t)&&"function"==typeof t.off&&t.off(),Object.keys(t).forEach(function(e){delete t[e]}),Object.defineProperty(t,"destroyed",{value:!0})))};var i=n(22)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"ARRAY_TYPE",function(){return i}),e.setMatrixArrayType=function(t){i=t},e.toRadian=function(t){return t*a},e.equals=function(t,e){return Math.abs(t-e)<=r*Math.max(1,Math.abs(t),Math.abs(e))};const r=1e-6;e.EPSILON=r;let i="undefined"!=typeof Float32Array?Float32Array:Array;const o=Math.random;e.RANDOM=o;const a=Math.PI/180},function(t,e,n){"use strict";e.__esModule=!0;var r="undefined"!=typeof console?"function"==typeof console.debug?function(){var t;return(t=console).debug.apply(t,arguments)}:function(){var t;return(t=console).log.apply(t,arguments)}:function(){return 1},i="undefined"!=typeof console?"function"==typeof console.error?function(){var t;return(t=console).error.apply(t,arguments)}:function(){var t;return(t=console).log.apply(t,arguments)}:function(){return 1},o=function(){return 1};e.default=r,e.debug=o,e.error=i},function(t,e,n){"use strict";e.__esModule=!0;var r=n(82);e.default=r},function(t,e){var n=Array.isArray;t.exports=n},function(t,e,n){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=e,this.type=n,this._value=r,this.serial=0}return t.prototype.touch=function(){++this.serial},r(t,[{key:"value",get:function(){return this._value},set:function(t){this._value!==t&&(this._value=t,++this.serial)}}]),t}();e.default=i,i.TYPE=Object.freeze({UNIFORM:"uniform",ATTRIB:"attrib",TEXTURE_2D:"tex2d"})},function(t,e,n){"use strict";e.__esModule=!0;e.HTML_ELEMENT_ENTITY="blitpunk-entity",e.HTML_ELEMENT_CANVAS="blitpunk-canvas",e.HTML_ELEMENT_SPRITE_GROUP="blitpunk-sprite-group",e.HTML_ELEMENT_TEXTURE_ATLAS="blitpunk-texture-atlas",e.ATTR_ALPHA="alpha",e.ATTR_ANTIALIAS="antialias",e.ATTR_BLEND_MODE="blend-mode",e.ATTR_CAPACITY="capacity",e.ATTR_CLEAR_COLOR="clear-color",e.ATTR_DEPTH="depth",e.ATTR_DESCRIPTOR="descriptor",e.ATTR_FLIP_Y="flip-y",e.ATTR_FRAGMENT_SHADER="fragment-shader",e.ATTR_MODULE_SRC="module-src",e.ATTR_NEAREST="nearest",e.ATTR_PREMULTIPLIED_ALPHA="premultiplied-alpha",e.ATTR_PREMULTIPLY_ALPHA="premultiply-alpha",e.ATTR_PRESERVE_DRAW="preserve-drawing-buffer",e.ATTR_PRIMITIVE="primitive",e.ATTR_PROJECTION="projection",e.ATTR_REPEATABLE="repeatable",e.ATTR_SRC="src",e.ATTR_STENCIL="stencil",e.ATTR_TEXTURE_MAP="texture-map",e.ATTR_VERTEX_SHADER="vertex-shader",e.ATTR_VO_NEW="vo-new",e.ATTR_VO_ZERO="vo-zero"},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=r(n(3)),o=r(n(85)),a=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.resource=e,this.hints=n,this.id=n.id||(0,i.default)(),this.serial=new o.default("number"==typeof n.serial?n.serial:1)}return t.prototype.isSynced=function(t){var e=this.serial.value;return e>0&&e===t.serial.value},t.prototype.needSync=function(t){return!this.isSynced(t)},t.prototype.sync=function(t,e){this.needSync(t)&&(e(this.resource),this.serial.value=t.serial.value)},t}();e.default=a},function(t,e,n){"use strict";e.__esModule=!0;var r=Object.freeze({float32:4,int16:2,int32:4,int8:1,uint16:2,uint32:4,uint8:1}),i=Object.freeze({float32:Float32Array,int16:Int16Array,int32:Int32Array,int8:Int8Array,uint16:Uint16Array,uint32:Uint32Array,uint8:Uint8Array}),o=Object.freeze({float32:function(t){return t.float32Array},int32:function(t){return t.int32Array},int16:function(t){return t.int16Array},int8:function(t){return t.int8Array},uint32:function(t){return t.uint32Array},uint16:function(t){return t.uint16Array},uint8:function(t){return t.uint8Array}}),a=Object.freeze({float32:"FLOAT",int16:"SHORT",int32:"INT",int8:"BYTE",uint16:"UNSIGNED_SHORT",uint32:"UNSIGNED_INT",uint8:"UNSIGNED_BYTE"});e.BYTES_PER_ELEMENT=r,e.TYPED_ARRAY_CONSTRUCTOR=i,e.TYPED_ARRAY_GETTER=o,e.GL_ITEM_TYPES=a},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.Viewport=e.VOPool=e.VODescriptor=e.VOAttrDescriptor=e.VOArray=e.TextureState=e.TextureLibrary=e.TextureAtlasSpec=e.TextureAtlas=e.Texture=e.SpriteGroup=e.ShaderVariableGroup=e.ShaderVariableBufferGroup=e.ShaderVariableAlias=e.ShaderVariable=e.ShaderUniformVariable=e.ShaderTextureGroup=e.ShaderTexture2dVariable=e.ShaderSource=e.ShaderProgram=e.ShaderContext=e.ShaderAttribVariable=e.ShaderAttribValue=e.ResourceLibrary=e.Projection=e.PowerOf2Image=e.ElementIndexArray=e.BlendMode=e.AABB2=void 0;var i=r(n(44)),o=r(n(45)),a=r(n(46)),u=r(n(99)),s=r(n(47)),f=r(n(28)),c=r(n(115)),l=r(n(54)),h=r(n(55)),d=r(n(56)),p=r(n(122)),y=r(n(57)),b=r(n(21)),v=r(n(29)),m=r(n(58)),g=r(n(53)),_=r(n(5)),x=r(n(59)),M=r(n(60)),w=r(n(13)),A=r(n(123)),E=r(n(18)),T=r(n(33)),O=r(n(65)),R=r(n(67)),S=r(n(68)),P=r(n(10)),C=r(n(11)),I=r(n(178));e.AABB2=a.default,e.BlendMode=u.default,e.ElementIndexArray=s.default,e.PowerOf2Image=f.default,e.Projection=c.default,e.ResourceLibrary=l.default,e.ShaderAttribValue=h.default,e.ShaderAttribVariable=d.default,e.ShaderContext=p.default,e.ShaderProgram=y.default,e.ShaderSource=b.default,e.ShaderTexture2dVariable=v.default,e.ShaderTextureGroup=m.default,e.ShaderUniformVariable=g.default,e.ShaderVariable=_.default,e.ShaderVariableAlias=x.default,e.ShaderVariableBufferGroup=M.default,e.ShaderVariableGroup=w.default,e.SpriteGroup=A.default,e.Texture=E.default,e.TextureAtlas=T.default,e.TextureAtlasSpec=O.default,e.TextureLibrary=R.default,e.TextureState=S.default,e.VOArray=P.default,e.VOAttrDescriptor=C.default,e.VODescriptor=i.default,e.VOPool=o.default,e.Viewport=I.default},function(t,e,n){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(t){return t&&t.__esModule?t:{default:t}}(n(7)),o=n(8),a=function(){function t(e,n,r){var a=this,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.USAGE.DYNAMIC,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.resourceRef=new i.default(this,{usage:u}),this.descriptor=e,this.capacity=n,r instanceof ArrayBuffer?this.float32Array=new Float32Array(r):r instanceof DataView?this.float32Array=new Float32Array(r.buffer,r.byteOffset,r.byteLength/4):r instanceof Float32Array?this.float32Array=r:this.float32Array=new Float32Array(new ArrayBuffer(n*e.bytesPerVO)),this.resourceRef.hints.typedArray=this.float32Array;var f=this.buffer,c=this.bufferByteOffset,l=this.bufferByteLength;e.typeList.filter(function(t){return"float32"!==t}).forEach(function(t){a[t+"Array"]=new o.TYPED_ARRAY_CONSTRUCTOR[t](f,c,l/o.BYTES_PER_ELEMENT[t])}),this.enableAutotouch="boolean"==typeof s?s:u===t.USAGE.DYNAMIC,Object.freeze(this)}return t.prototype.touch=function(){this.resourceRef.serial.touch()},t.prototype.copy=function(t,e){var n=0;void 0===e&&(n=e*(this.descriptor.bytesPerVO>>2)),this.float32Array.set(t.float32Array,n)},t.prototype.subarray=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new t(this.descriptor,n,new DataView(this.buffer,this.bufferByteOffset+e*this.descriptor.bytesPerVO,n*this.descriptor.bytesPerVO))},r(t,[{key:"buffer",get:function(){return this.float32Array.buffer}},{key:"bufferByteOffset",get:function(){return this.float32Array.byteOffset}},{key:"bufferByteLength",get:function(){return this.float32Array.byteLength}}]),t}();e.default=a,a.USAGE=Object.freeze({STATIC:"static",DYNAMIC:"dynamic"})},function(t,e,n){"use strict";function r(t,e,n){if(t.attrNames){var r=t.attrNames[n];if(void 0!==r)return r}return e+"_"+n}function i(t,e){return function(){return t(this.voArray)[e]}}function o(t,e,n,r,i){return function(){var o=t(this.voArray),a=void 0,u=void 0;for(a=0;a<n;++a)for(u=0;u<e;++u)o[a*r+i+u]=arguments[a*e+u]}}function a(t,e,n,r){return function(i){for(var o=t(this.voArray),a=0;a<e;++a)o[a*n+r]=i}}function u(t){return t[0].toUpperCase()+t.substr(1)}e.__esModule=!0;var s=n(8),f=function(){function t(e,n,r,i,o,a,u){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=e,this.type=n,this.size=r,this.uniform=a,this.attrNames=u,this.bytesPerElement=s.BYTES_PER_ELEMENT[this.type],this.bytesPerVertex=this.bytesPerElement*r,this.byteOffset="number"!=typeof o?i*this.bytesPerElement:o,this.offset="number"!=typeof i?o/this.bytesPerElement:i}return t.prototype.vertexAttrCount=function(t){return t.bytesPerVertex/this.bytesPerElement},t.defineProperties=function(t,e,n){var f=t.name,c=s.TYPED_ARRAY_GETTER[t.type],l=n.vertexCount,h=t.vertexAttrCount(n),d=t.byteOffset/t.bytesPerElement,p=void 0,y=void 0;if(1===t.size)if(t.uniform){var b=i(c,d),v=a(c,l,h,d);t.getValue=function(t){return b.call(t)},t.setValue=function(t,e){return v.call(t,e)},e[f]={get:b,set:v,enumerable:!0}}else{var m=o(c,1,l,h,d);t.setValue=function(t,e){return m.apply(t,e)},e["set"+u(f)]={value:m,enumerable:!0};var g=[];for(p=0;p<n.vertexCount;++p){var _=i(c,d+p*h);g.push(_),e[f+p]={get:_,set:o(c,1,1,0,d+p*h),enumerable:!0}}t.getValue=function(t,e){return g[e].call(t)}}else if(t.size>=2)if(t.uniform){var x=function(t,e){return function(n){return t(this.voArray)[e+n]}}(c,d),M=function(t,e,n,r,i){return function(){var o=t(this.voArray),a=void 0,u=void 0;for(a=0;a<n;++a)for(u=0;u<e;++u)o[a*r+i+u]=arguments[u]}}(c,t.size,l,h,d);for(t.getValue=function(t,e,n){return x.call(t,n)},t.setValue=function(t,e){return M.apply(t,e)},e["get"+u(f)]={value:x,enumerable:!0},e["set"+u(f)]={value:M,enumerable:!0},p=0;p<t.size;++p){e[r(t,f,p)]={get:i(c,d+p),set:a(c,l,h,d+p),enumerable:!0}}}else{var w=o(c,t.size,l,h,d);t.setValue=function(t,e){return w.apply(t,e)},e["set"+u(f)]={value:w,enumerable:!0};var A=[];for(p=0;p<n.vertexCount;++p){var E=[];for(y=0;y<t.size;++y){var T=r(t,f,y)+p,O=i(c,d+p*h+y);E.push(O),e[T]={get:O,set:o(c,1,1,0,d+p*h+y),enumerable:!0}}A.push(E)}t.getValue=function(t,e,n){return A[e][n].call(t)}}},t}();e.default=f},function(t,e,n){var r=n(24).Symbol;t.exports=r},function(t,e,n){"use strict";e.__esModule=!0;var r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.shaderVars=e}return t.prototype.pushVar=function(t){this.shaderVars.forEach(t.pushVar.bind(t))},t.prototype.popVar=function(t){this.shaderVars.forEach(t.popVar.bind(t))},t}();e.default=r},function(t,e,n){var r=n(4),i=n(128),o=n(129),a=n(23);t.exports=function(t,e){return r(t)?t:i(t,e)?[t]:o(a(t))}},function(t,e,n){var r=n(30)(Object,"create");t.exports=r},function(t,e,n){var r=n(61);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},function(t,e,n){var r=n(154);t.exports=function(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=r(n(28)),u=r(n(7)),s=function(t,e,n){return null!=t&&void 0!==t[e]?t[e]:n},f=function(){function t(e,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e instanceof t)this.parent=e,this.image=null;else{if(!("object"===(void 0===e?"undefined":i(e))&&"width"in e&&"height"in e))throw new Error("new Texture() panic: unexpected source argument!");this.image=e,this.parent=null,this._resourceRef=new u.default(this,{flipY:s(f,"flipY",!1),repeatable:s(f,"repeatable",!1),premultiplyAlpha:s(f,"premultiplyAlpha",!0),nearest:s(f,"nearest",!1)}),"origWidth"in e&&"origHeight"in e&&(n=e.origWidth,r=e.origHeight)}this._width=n,this._height=r,this.x=o,this.y=a}return t.load=function(e,n){return new a.default(e).complete.then(function(e){return new t(e,void 0,void 0,0,0,n)})},o(t,[{key:"root",get:function(){return this.parent&&this.parent.root||this}},{key:"imgEl",get:function(){var t=this.root;return t.image.imgEl||t.image}},{key:"resourceRef",get:function(){return this._resourceRef||this.root.resourceRef}},{key:"width",get:function(){return"number"==typeof this._width?this._width:this.image?this.image.width:this.parent?this.root.width:0},set:function(t){this._width=t}},{key:"height",get:function(){return"number"==typeof this._height?this._height:this.image?this.image.height:this.parent?this.root.height:0},set:function(t){this._height=t}},{key:"minS",get:function(){for(var t=this.x,e=this;null!=(e=e.parent);)t+=e.x;return t/this.root.image.width}},{key:"minT",get:function(){for(var t=this.y,e=this;null!=(e=e.parent);)t+=e.y;return t/this.root.image.height}},{key:"maxS",get:function(){for(var t=this.x+this.width,e=this;null!=(e=e.parent);)t+=e.x;return t/this.root.image.width}},{key:"maxT",get:function(){for(var t=this.y+this.height,e=this;null!=(e=e.parent);)t+=e.y;return t/this.root.image.height}}]),t}();e.default=f},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.getDefaultOption=e.removeItem=e.sample=e.parseCssStyledProperties=e.maxOf=e.isPowerOf2=e.generateUuid=e.findNextPowerOf2=e.Mat4=void 0;var i=r(n(3)),o=r(n(49)),a=n(48),u=r(n(180)),s=r(n(66)),f=r(n(181)),c=r(n(182));e.Mat4=o.default,e.findNextPowerOf2=a.findNextPowerOf2,e.generateUuid=i.default,e.isPowerOf2=a.isPowerOf2,e.maxOf=a.maxOf,e.parseCssStyledProperties=u.default,e.sample=s.default,e.removeItem=f.default,e.getDefaultOption=c.default},function(t,e,n){"use strict";e.__esModule=!0;var r=n(199);Object.defineProperty(e,"default",{enumerable:!0,get:function(){return function(t){return t&&t.__esModule?t:{default:t}}(r).default}})},function(t,e,n){"use strict";e.__esModule=!0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(3)),i=function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=(0,r.default)(),this.type=e,this.source=n instanceof HTMLElement?n.textContent:n};e.default=i,i.VERTEX_SHADER="VERTEX_SHADER",i.FRAGMENT_SHADER="FRAGMENT_SHADER"},function(t,e,n){"use strict";function r(t){function e(t,e){return t.prio!==e.prio?e.prio-t.prio:t.id-e.id}function n(t,e,n){function o(){var e,r,o;if(p)for(e=0;e<p;e++)"function"==typeof(o=(r=i.boundObjects[e])[t])?n(o,r):r[h]&&n(null,r)}if(!(s.silenced||s.off.indexOf(t)>=0)){var a,u,f,c=i.callbacks[t],l=i.callbacks[d],p=i.boundObjects.length,y=!1;if(c||l.length)for(u=(c=c?c.concat(l):l).length,a=0;a<u;a++)f=c[a],!y&&f&&f.prio<r.PRIO_DEFAULT&&(o(),y=!0),e(f);y||o()}}if(t[h])return t;var i={lastCallbackId:0,callbacks:{},boundObjects:[]};i.callbacks[d]=[];var s=a({},{silenced:!1,off:[]});return u(t,h,s),void 0===r.PRIO_DEFAULT&&a(r,{PRIO_MAX:Number.POSITIVE_INFINITY,PRIO_A:1e9,PRIO_B:1e7,PRIO_C:1e5,PRIO_DEFAULT:0,PRIO_LOW:-1e5,PRIO_MIN:Number.NEGATIVE_INFINITY}),t.on=function(t,n,u){var f=arguments.length;if(0!==f){var h;if(1===f){if("string"==typeof t)return void((h=s.off.indexOf(t))>=0&&s.off.splice(h,1));if("object"!=typeof t&&"function"!=typeof t)return void(c&&l(p,".on() called with insufficient arguments!",arguments));u=t,t=d,n=r.PRIO_DEFAULT}2===f&&(u=n,n=r.PRIO_DEFAULT);var y=i.callbacks,b=y[t]||(y[t]=[]),v=++i.lastCallbackId,m=a({},{id:v,fn:u,prio:"number"!=typeof n?r.PRIO_DEFAULT:n,isFunction:"function"==typeof u});return b.push(m),b.sort(e),v}s.silenced&&(o(s,"silenced",!1),s.off.length=0)},t.once=function(e,n,i){var o=arguments.length;if(o&&!(o>3)){1===o?(i=e,e=d,n=r.PRIO_DEFAULT):2===o&&(i=n,n=r.PRIO_DEFAULT);var a=t.on(e,n,function(){var e=i.apply(this,arguments);return t.off(a),e});return a}c&&l(p,".once() called with insufficient arguments!",arguments)},t.off=function(t){if(0!==arguments.length)if("string"!=typeof t){var e,n,r,a,u,f=i.callbacks,c="object"==typeof t;if("number"==typeof t||"function"==typeof t||c)for(u=Object.keys(f),r=0;r<u.length;r++)for(a=f[u[r]],n=0;n<a.length;n++)if(((e=a[n]).id===t||e.fn===t)&&(a.splice(n,1),!c))return;c&&(n=i.boundObjects.indexOf(t))>=0&&i.boundObjects.splice(n,1)}else-1===s.off.indexOf(t)&&s.off.push(t);else s.silenced||(o(s,"silenced",!0),s.off.length=0)},t.connect=function(t,e){var n=arguments.length;if(2===n)return function(t,e,n){var i,o,a,u;for(o in n)n.hasOwnProperty(o)&&"function"==typeof(a=e[o])&&(i=n[o],Array.isArray(i)?(u=i[0],i=i[1]):u=r.PRIO_DEFAULT,t.on(i,u,a));return t}(this,t,e);c&&l(p,".connect() called with insufficient arguments (need 2 args, but got "+n+")",arguments)},t.emit=function(){for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];var r=t[0],i=t.slice(1),o=this;n(r,function(e){if(e.isFunction)e.fn.apply(o,i);else{var n=e.fn[r];"function"==typeof n?n.apply(e.fn,i):e.fn.emit&&e.fn.emit.apply(e.fn,t)}},function(e,n){e?e.apply(n,i):n.emit&&n.emit.apply(n,t)})},t.emitReduce=function(){function t(t){void 0!==t&&(i=t)}for(var e=new Array(arguments.length),r=0;r<e.length;++r)e[r]=arguments[r];var i,o=e.shift();0===e.length?(i={},e.push(i)):t(e[0]);var a=this,u=[o].concat(e);return n(o,function(n){if(n.isFunction)e[0]=i,t(n.fn.apply(a,e));else{var r=n.fn[o];"function"==typeof r?(e[0]=i,t(r.apply(n.fn,e))):n.fn.emitReduce&&(u[1]=i,t(n.fn.emitReduce.apply(n.fn,u)))}},function(n,r){n&&(e[0]=i,t(n.apply(r,e)))}),i},t.from=function(t,e){var n=this;return new e(function(e){var r=n.on(t,function(t){e.next(t)});return function(){n.off(r)}})},t.subscribe=function(t,e,n,r){var i=this;return t.subscribe(function(t){i.emit(e,t)},n?function(t){i.emit(n,t)}:void 0,r?function(t){i.emit(r,t)}:void 0)},t}function i(t,e){var n=("string"==typeof t||"symbol"==typeof t)&&t||function(){var t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)});return f?Symbol(t):t}(),i=r({}),a=!(!e||!e.replace),s=function(t){o(i,y,t)},c=function(t){return function(e){t.apply(i,e)}}(i.emit);return u(i,"events",[]),o(i,"id",n),i.collect=function(){return i[y]!==v&&s(v),i},i.emit=function(){var t,e=new Array(arguments.length);for(t=0;t<e.length;++t)e[t]=arguments[t];if(i[y]===b)c(e);else{if(a){var n,r=e[0];for(t=0,n=i.events.length;t<n;t++)if(i.events[t][0]===r)return void(i.events[t]=e)}i.events.push(e)}},i.play=function(){return i[y]!==b&&(s(b),i.events.forEach(c),i.events.length=0),i},i.toggle=function(){return i[y]!==b?i.play():i.collect()},i.play()}function o(t,e,n){return Object.defineProperty(t,e,{value:n,configurable:!0,enumerable:!0}),t}function a(t,e){var n,r=Object.keys(e);for(n=r.length;n--;)o(t,r[n],e[r[n]]);return t}function u(t,e,n){return Object.defineProperty(t,e,{value:n,configurable:!0}),t}var s="undefined"!=typeof Map,f="undefined"!=typeof Symbol,c="undefined"!=typeof console,l=c?console[console.warn?"warn":"log"].bind(console):function(){},h=f?(Symbol.eventize||(Symbol.eventize=Symbol("eventize")),Symbol.eventize):"@@eventize",d="*",p="[eventize.js]";r.is=function(t){return!(!t||!t[h])},u(r,"EventizeNamespace",h),u(r,"queues",s?new Map:{}),r.queue=function(t){var e,n,o=arguments.length;return o>=1&&("object"==typeof t&&2!==o||(e=s?r.queues.get(t):r.queues[t]),2===o?n=arguments[1]:1===o&&"object"==typeof t&&(n=t)),e||(e=i(t,n),s?r.queues.set(e.id,e):r.queues[e.id]=e),e};var y="state",b="play",v="collect";t.exports=r},function(t,e,n){var r=n(106);t.exports=function(t){return null==t?"":r(t)}},function(t,e,n){var r=n(107),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();t.exports=o},function(t,e,n){var r=n(26),i=n(27),o="[object Symbol]";t.exports=function(t){return"symbol"==typeof t||i(t)&&r(t)==o}},function(t,e,n){var r=n(12),i=n(109),o=n(110),a="[object Null]",u="[object Undefined]",s=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?u:a:s&&s in Object(t)?i(t):o(t)}},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,e,n){"use strict";function r(t,e){t.imgEl=(0,o.isPowerOf2)(e.width)&&(0,o.isPowerOf2)(e.height)?e:function(t){var e=(0,o.findNextPowerOf2)(t.width),n=(0,o.findNextPowerOf2)(t.height),r=document.createElement("canvas");return r.width=e,r.height=n,r.getContext("2d").drawImage(t,0,0),r}(e),t.origWidth=e.width,t.origHeight=e.height}e.__esModule=!0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(48),a=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var i=void 0;"string"==typeof e?(i=new window.Image).src=e:i=e,!1===i.complete||0===i.width&&0===i.height?(this.imgEl=null,this.complete=new Promise(function(t){var e=i.onload;i.onload=function(){e&&e.call(i),r(n,i),t(n)}})):(r(this,i),this.complete=Promise.resolve(this))}return i(t,[{key:"isComplete",get:function(){return null!=this.imgEl}},{key:"width",get:function(){return this.imgEl&&this.imgEl.width||0}},{key:"height",get:function(){return this.imgEl&&this.imgEl.height||0}}]),t}();e.default=a},function(t,e,n){"use strict";e.__esModule=!0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(5)),i=function(t){function e(n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,r.default.TYPE.TEXTURE_2D,i));return o.texture=null,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.syncTextureAndValue=function(t){if(null!=this.texture){var e=t.syncTexture(this.texture);this.value=e.bind()}},e}(r.default);e.default=i},function(t,e,n){var r=n(136),i=n(141);t.exports=function(t,e){var n=i(t,e);return r(n)?n:void 0}},function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e,n){var r=n(25),i=1/0;t.exports=function(t){if("string"==typeof t||r(t))return t;var e=t+"";return"0"==e&&1/t==-i?"-0":e}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=r(n(18)),o=r(n(65)),a=r(n(66)),u=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.rootTexture=e,this.spec=n,this.frames=new Map}return t.prototype.addFrame=function(t,e,n,r,o){this.frames.set(t,new i.default(this.rootTexture,e,n,r,o))},t.prototype.getFrame=function(t){return this.frames.get(t)},t.prototype.getRandomFrame=function(){return(0,a.default)(Array.from(this.frames.values()))},t.prototype.getRandomFrameName=function(){return(0,a.default)(this.frameNames())},t.prototype.frameNames=function(){return Array.from(this.frames.keys())},t.load=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;return o.default.load(t,e||{}).then(function(t){return t.createTextureAtlas(n||t.imageUrl,r)})},t}();e.default=u},function(t,e,n){var r;!function(i){function o(t,e){if(t=t||"",e=e||{},t instanceof o)return t;if(!(this instanceof o))return new o(t,e);var n=function(t){var e={r:0,g:0,b:0},n=1,r=null,o=null,a=null,u=!1,s=!1;"string"==typeof t&&(t=function(t){t=t.replace(I,"").replace(L,"").toLowerCase();var e=!1;if(V[t])t=V[t],e=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};var n;if(n=D.rgb.exec(t))return{r:n[1],g:n[2],b:n[3]};if(n=D.rgba.exec(t))return{r:n[1],g:n[2],b:n[3],a:n[4]};if(n=D.hsl.exec(t))return{h:n[1],s:n[2],l:n[3]};if(n=D.hsla.exec(t))return{h:n[1],s:n[2],l:n[3],a:n[4]};if(n=D.hsv.exec(t))return{h:n[1],s:n[2],v:n[3]};if(n=D.hsva.exec(t))return{h:n[1],s:n[2],v:n[3],a:n[4]};if(n=D.hex8.exec(t))return{r:T(n[1]),g:T(n[2]),b:T(n[3]),a:P(n[4]),format:e?"name":"hex8"};if(n=D.hex6.exec(t))return{r:T(n[1]),g:T(n[2]),b:T(n[3]),format:e?"name":"hex"};if(n=D.hex4.exec(t))return{r:T(n[1]+""+n[1]),g:T(n[2]+""+n[2]),b:T(n[3]+""+n[3]),a:P(n[4]+""+n[4]),format:e?"name":"hex8"};if(n=D.hex3.exec(t))return{r:T(n[1]+""+n[1]),g:T(n[2]+""+n[2]),b:T(n[3]+""+n[3]),format:e?"name":"hex"};return!1}(t));"object"==typeof t&&(C(t.r)&&C(t.g)&&C(t.b)?(e=function(t,e,n){return{r:255*A(t,255),g:255*A(e,255),b:255*A(n,255)}}(t.r,t.g,t.b),u=!0,s="%"===String(t.r).substr(-1)?"prgb":"rgb"):C(t.h)&&C(t.s)&&C(t.v)?(r=R(t.s),o=R(t.v),e=function(t,e,n){t=6*A(t,360),e=A(e,100),n=A(n,100);var r=i.floor(t),o=t-r,a=n*(1-e),u=n*(1-o*e),s=n*(1-(1-o)*e),f=r%6;return{r:255*[n,u,a,a,s,n][f],g:255*[s,n,n,u,a,a][f],b:255*[a,a,s,n,n,u][f]}}(t.h,r,o),u=!0,s="hsv"):C(t.h)&&C(t.s)&&C(t.l)&&(r=R(t.s),a=R(t.l),e=function(t,e,n){function r(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}var i,o,a;t=A(t,360),e=A(e,100),n=A(n,100);if(0===e)i=o=a=n;else{var u=n<.5?n*(1+e):n+e-n*e,s=2*n-u;i=r(s,u,t+1/3),o=r(s,u,t),a=r(s,u,t-1/3)}return{r:255*i,g:255*o,b:255*a}}(t.h,r,a),u=!0,s="hsl"),t.hasOwnProperty("a")&&(n=t.a));return n=w(n),{ok:u,format:t.format||s,r:k(255,F(e.r,0)),g:k(255,F(e.g,0)),b:k(255,F(e.b,0)),a:n}}(t);this._originalInput=t,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=j(100*this._a)/100,this._format=e.format||n.format,this._gradientType=e.gradientType,this._r<1&&(this._r=j(this._r)),this._g<1&&(this._g=j(this._g)),this._b<1&&(this._b=j(this._b)),this._ok=n.ok,this._tc_id=N++}function a(t,e,n){t=A(t,255),e=A(e,255),n=A(n,255);var r,i,o=F(t,e,n),a=k(t,e,n),u=(o+a)/2;if(o==a)r=i=0;else{var s=o-a;switch(i=u>.5?s/(2-o-a):s/(o+a),o){case t:r=(e-n)/s+(e<n?6:0);break;case e:r=(n-t)/s+2;break;case n:r=(t-e)/s+4}r/=6}return{h:r,s:i,l:u}}function u(t,e,n){t=A(t,255),e=A(e,255),n=A(n,255);var r,i,o=F(t,e,n),a=k(t,e,n),u=o-a;if(i=0===o?0:u/o,o==a)r=0;else{switch(o){case t:r=(e-n)/u+(e<n?6:0);break;case e:r=(n-t)/u+2;break;case n:r=(t-e)/u+4}r/=6}return{h:r,s:i,v:o}}function s(t,e,n,r){var i=[O(j(t).toString(16)),O(j(e).toString(16)),O(j(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function f(t,e,n,r){return[O(S(r)),O(j(t).toString(16)),O(j(e).toString(16)),O(j(n).toString(16))].join("")}function c(t,e){e=0===e?0:e||10;var n=o(t).toHsl();return n.s-=e/100,n.s=E(n.s),o(n)}function l(t,e){e=0===e?0:e||10;var n=o(t).toHsl();return n.s+=e/100,n.s=E(n.s),o(n)}function h(t){return o(t).desaturate(100)}function d(t,e){e=0===e?0:e||10;var n=o(t).toHsl();return n.l+=e/100,n.l=E(n.l),o(n)}function p(t,e){e=0===e?0:e||10;var n=o(t).toRgb();return n.r=F(0,k(255,n.r-j(-e/100*255))),n.g=F(0,k(255,n.g-j(-e/100*255))),n.b=F(0,k(255,n.b-j(-e/100*255))),o(n)}function y(t,e){e=0===e?0:e||10;var n=o(t).toHsl();return n.l-=e/100,n.l=E(n.l),o(n)}function b(t,e){var n=o(t).toHsl(),r=(n.h+e)%360;return n.h=r<0?360+r:r,o(n)}function v(t){var e=o(t).toHsl();return e.h=(e.h+180)%360,o(e)}function m(t){var e=o(t).toHsl(),n=e.h;return[o(t),o({h:(n+120)%360,s:e.s,l:e.l}),o({h:(n+240)%360,s:e.s,l:e.l})]}function g(t){var e=o(t).toHsl(),n=e.h;return[o(t),o({h:(n+90)%360,s:e.s,l:e.l}),o({h:(n+180)%360,s:e.s,l:e.l}),o({h:(n+270)%360,s:e.s,l:e.l})]}function _(t){var e=o(t).toHsl(),n=e.h;return[o(t),o({h:(n+72)%360,s:e.s,l:e.l}),o({h:(n+216)%360,s:e.s,l:e.l})]}function x(t,e,n){e=e||6,n=n||30;var r=o(t).toHsl(),i=360/n,a=[o(t)];for(r.h=(r.h-(i*e>>1)+720)%360;--e;)r.h=(r.h+i)%360,a.push(o(r));return a}function M(t,e){e=e||6;for(var n=o(t).toHsv(),r=n.h,i=n.s,a=n.v,u=[],s=1/e;e--;)u.push(o({h:r,s:i,v:a})),a=(a+s)%1;return u}function w(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function A(t,e){(function(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)})(t)&&(t="100%");var n=function(t){return"string"==typeof t&&-1!=t.indexOf("%")}(t);return t=k(e,F(0,parseFloat(t))),n&&(t=parseInt(t*e,10)/100),i.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function E(t){return k(1,F(0,t))}function T(t){return parseInt(t,16)}function O(t){return 1==t.length?"0"+t:""+t}function R(t){return t<=1&&(t=100*t+"%"),t}function S(t){return i.round(255*parseFloat(t)).toString(16)}function P(t){return T(t)/255}function C(t){return!!D.CSS_UNIT.exec(t)}var I=/^\s+/,L=/\s+$/,N=0,j=i.round,k=i.min,F=i.max,U=i.random;o.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var t,e,n,r,o,a,u=this.toRgb();return t=u.r/255,e=u.g/255,n=u.b/255,r=t<=.03928?t/12.92:i.pow((t+.055)/1.055,2.4),o=e<=.03928?e/12.92:i.pow((e+.055)/1.055,2.4),a=n<=.03928?n/12.92:i.pow((n+.055)/1.055,2.4),.2126*r+.7152*o+.0722*a},setAlpha:function(t){return this._a=w(t),this._roundA=j(100*this._a)/100,this},toHsv:function(){var t=u(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=u(this._r,this._g,this._b),e=j(360*t.h),n=j(100*t.s),r=j(100*t.v);return 1==this._a?"hsv("+e+", "+n+"%, "+r+"%)":"hsva("+e+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var t=a(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=a(this._r,this._g,this._b),e=j(360*t.h),n=j(100*t.s),r=j(100*t.l);return 1==this._a?"hsl("+e+", "+n+"%, "+r+"%)":"hsla("+e+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(t){return s(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return function(t,e,n,r,i){var o=[O(j(t).toString(16)),O(j(e).toString(16)),O(j(n).toString(16)),O(S(r))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:j(this._r),g:j(this._g),b:j(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+j(this._r)+", "+j(this._g)+", "+j(this._b)+")":"rgba("+j(this._r)+", "+j(this._g)+", "+j(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:j(100*A(this._r,255))+"%",g:j(100*A(this._g,255))+"%",b:j(100*A(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+j(100*A(this._r,255))+"%, "+j(100*A(this._g,255))+"%, "+j(100*A(this._b,255))+"%)":"rgba("+j(100*A(this._r,255))+"%, "+j(100*A(this._g,255))+"%, "+j(100*A(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(B[s(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+f(this._r,this._g,this._b,this._a),n=e,r=this._gradientType?"GradientType = 1, ":"";if(t){var i=o(t);n="#"+f(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+e+",endColorstr="+n+")"},toString:function(t){var e=!!t;t=t||this._format;var n=!1,r=this._a<1&&this._a>=0;return e||!r||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"hex4"!==t&&"hex8"!==t&&"name"!==t?("rgb"===t&&(n=this.toRgbString()),"prgb"===t&&(n=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(n=this.toHexString()),"hex3"===t&&(n=this.toHexString(!0)),"hex4"===t&&(n=this.toHex8String(!0)),"hex8"===t&&(n=this.toHex8String()),"name"===t&&(n=this.toName()),"hsl"===t&&(n=this.toHslString()),"hsv"===t&&(n=this.toHsvString()),n||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},clone:function(){return o(this.toString())},_applyModification:function(t,e){var n=t.apply(null,[this].concat([].slice.call(e)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(d,arguments)},brighten:function(){return this._applyModification(p,arguments)},darken:function(){return this._applyModification(y,arguments)},desaturate:function(){return this._applyModification(c,arguments)},saturate:function(){return this._applyModification(l,arguments)},greyscale:function(){return this._applyModification(h,arguments)},spin:function(){return this._applyModification(b,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(x,arguments)},complement:function(){return this._applyCombination(v,arguments)},monochromatic:function(){return this._applyCombination(M,arguments)},splitcomplement:function(){return this._applyCombination(_,arguments)},triad:function(){return this._applyCombination(m,arguments)},tetrad:function(){return this._applyCombination(g,arguments)}},o.fromRatio=function(t,e){if("object"==typeof t){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]="a"===r?t[r]:R(t[r]));t=n}return o(t,e)},o.equals=function(t,e){return!(!t||!e)&&o(t).toRgbString()==o(e).toRgbString()},o.random=function(){return o.fromRatio({r:U(),g:U(),b:U()})},o.mix=function(t,e,n){n=0===n?0:n||50;var r=o(t).toRgb(),i=o(e).toRgb(),a=n/100;return o({r:(i.r-r.r)*a+r.r,g:(i.g-r.g)*a+r.g,b:(i.b-r.b)*a+r.b,a:(i.a-r.a)*a+r.a})},o.readability=function(t,e){var n=o(t),r=o(e);return(i.max(n.getLuminance(),r.getLuminance())+.05)/(i.min(n.getLuminance(),r.getLuminance())+.05)},o.isReadable=function(t,e,n){var r,i,a=o.readability(t,e);switch(i=!1,(r=function(t){var e,n;return t=t||{level:"AA",size:"small"},e=(t.level||"AA").toUpperCase(),n=(t.size||"small").toLowerCase(),"AA"!==e&&"AAA"!==e&&(e="AA"),"small"!==n&&"large"!==n&&(n="small"),{level:e,size:n}}(n)).level+r.size){case"AAsmall":case"AAAlarge":i=a>=4.5;break;case"AAlarge":i=a>=3;break;case"AAAsmall":i=a>=7}return i},o.mostReadable=function(t,e,n){var r,i,a,u,s=null,f=0;i=(n=n||{}).includeFallbackColors,a=n.level,u=n.size;for(var c=0;c<e.length;c++)(r=o.readability(t,e[c]))>f&&(f=r,s=o(e[c]));return o.isReadable(t,s,{level:a,size:u})||!i?s:(n.includeFallbackColors=!1,o.mostReadable(t,["#fff","#000"],n))};var V=o.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},B=o.hexNames=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}(V),D=function(){var t="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",e="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?",n="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?";return{CSS_UNIT:new RegExp(t),rgb:new RegExp("rgb"+e),rgba:new RegExp("rgba"+n),hsl:new RegExp("hsl"+e),hsla:new RegExp("hsla"+n),hsv:new RegExp("hsv"+e),hsva:new RegExp("hsva"+n),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();void 0!==t&&t.exports?t.exports=o:void 0!==(r=function(){return o}.call(e,n,e,t))&&(t.exports=r)}(Math)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=r(n(69)),o=r(n(70)),a=new i.default;(0,o.default)(a),e.default=a},function(t,e,n){"use strict";e.__esModule=!0;e.COMPONENT_PRIORITY_CLEAR=1e3,e.COMPONENT_PRIORITY_BLEND=900,e.COMPONENT_PRIORITY_PROJECTION=500,e.COMPONENT_PRIORITY_POST_BLEND=-100},function(t,e,n){"use strict";e.__esModule=!0;var r=new(function(t){return t&&t.__esModule?t:{default:t}}(n(72)).default);e.default=r},function(t,e,n){"use strict";e.__esModule=!0;var r=new(function(t){return t&&t.__esModule?t:{default:t}}(n(67)).default);e.default=r},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.textureLibrary=e.resourceLibrary=e.entityManager=e.componentRegistry=e.utils=e.ecs=e.core=e.App=void 0;var o=i(n(80)),a=r(n(9)),u=r(n(75)),s=r(n(19)),f=i(n(35)),c=i(n(37)),l=i(n(74)),h=i(n(38));e.App=o.default,e.core=a,e.ecs=u,e.utils=s,e.componentRegistry=f.default,e.entityManager=c.default,e.resourceLibrary=l.default,e.textureLibrary=h.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=r(n(81)),o=r(n(92)),a=r(n(0)),u=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Object.defineProperty(this,"gl",{value:e}),function(t){var e=t.gl;t.DEPTH_BITS=e.getParameter(e.DEPTH_BITS),t.STENCIL_BITS=e.getParameter(e.STENCIL_BITS),t.MAX_TEXTURE_IMAGE_UNITS=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}(this),this.resourceLibrary=new i.default(this),this.boundBuffers=new Map,this.currentProgram=0,this.enabledVertexAttribLocations=[],this.textureManager=new o.default(this),this.boundTextures=new Array(this.MAX_TEXTURE_IMAGE_UNITS);for(var n=0;n<this.boundTextures.length;n++)this.boundTextures[n]={TEXTURE_2D:null};this.readCurrentState(),this.activeTexture(0)}return t.prototype.destroy=function(){this.textureManager.destroy(),this.boundBuffers.clear(),this.resourceLibrary.destroy(),(0,a.default)(this)},t.prototype.blend=function(t){var e=this.gl;t.enable?(this.blendEnabled||(e.enable(e.BLEND),this.blendEnabled=!0),e.blendFunc(e[t.sfactor],e[t.dfactor])):this.blendEnabled&&(e.disable(e.BLEND),this.blendEnabled=!1)},t.prototype.activeTexture=function(t){var e=this.gl,n=e.TEXTURE0+t;this.activeTexUnit!==n&&(this.activeTexUnit=n,e.activeTexture(this.activeTexUnit))},t.prototype.bindTexture2d=function(t){var e=this.gl,n=this.boundTextures[this.activeTexUnit-e.TEXTURE0];n.TEXTURE_2D!==t&&(n.TEXTURE_2D=t,e.bindTexture(e.TEXTURE_2D,t))},t.prototype.readCurrentState=function(){var t=this.gl;this.boundBuffers.set(t.ARRAY_BUFFER,t.getParameter(t.ARRAY_BUFFER_BINDING)),this.boundBuffers.set(t.ELEMENT_ARRAY_BUFFER,t.getParameter(t.ELEMENT_ARRAY_BUFFER_BINDING)),this.currentProgram=t.getParameter(t.CURRENT_PROGRAM),this.blendEnabled=t.getParameter(t.BLEND)},t.prototype.bindBuffer=function(t,e){this.boundBuffers.get(t)!==e&&(this.gl.bindBuffer(t,e),this.boundBuffers.set(t,e))},t.prototype.useProgram=function(t){return this.currentProgram!==t&&(this.gl.useProgram(t),this.currentProgram=t,!0)},t.prototype.enableVertexAttribArrays=function(t){var e=this,n=this.gl;this.enabledVertexAttribLocations.filter(function(e){return-1===t.indexOf(e)}).forEach(function(r){n.disableVertexAttribArray(r),e.enabledVertexAttribLocations.splice(t.indexOf(r),1)}),t.forEach(function(t){-1===e.enabledVertexAttribLocations.indexOf(t)&&(n.enableVertexAttribArray(t),e.enabledVertexAttribLocations.push(t))})},t}();e.default=u},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";e.__esModule=!0;var r=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.ARRAY_BUFFER,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.STATIC_DRAW;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.glx=e;var i=e.gl;this.target=i[n],this.usage=i[r],this.glBuffer=i.createBuffer()}return t.prototype.bindBuffer=function(){this.glx.bindBuffer(this.target,this.glBuffer)},t.prototype.bufferData=function(t){this.bindBuffer(),this.glx.gl.bufferData(this.target,t,this.usage)},t}();e.default=r,r.ARRAY_BUFFER="ARRAY_BUFFER",r.ELEMENT_ARRAY_BUFFER="ELEMENT_ARRAY_BUFFER",r.STATIC_DRAW="STATIC_DRAW",r.DYNAMIC_DRAW="DYNAMIC_DRAW"},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(9),o=r(n(179)),a=r(n(0)),u=function(t){var e=t.blendStack[t.blendStack.length-1]||t.initialBlendMode;e&&!e.isEqual(t.currentBlendMode)&&(t.glx.blend(e),t.currentBlendMode=e)},s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Object.defineProperty(this,"glx",{value:e}),this.shaderContext=new i.ShaderContext,this.autotouchResources=new Map,this.clearBuffer=new o.default(this.glx),this.blendStack=[],this.initialBlendMode=null,this.currentBlendMode=null,this.viewport=null}return t.prototype.destroy=function(){this.shaderContext.destroy(),this.autotouchResources.clear(),this.blendStack.length=0,(0,a.default)(this)},t.prototype.setViewport=function(t,e,n,r){var o=this.viewport;o||(this.viewport=new i.Viewport,o=this.viewport),o.x=t,o.y=e,o.width=n,o.height=r},t.prototype.setInitialBlendMode=function(t){this.initialBlendMode=t},t.prototype.renderFrame=function(t){this.beginRenderFrame(),t(),this.endRenderFrame()},t.prototype.beginRenderFrame=function(){this.shaderContext.clear(),this.clearBuffer.reset(),this.setGlViewport(this.viewport)},t.prototype.endRenderFrame=function(){this.autotouchResources.clear()},t.prototype.setGlViewport=function(t){var e=this.glx.gl;t?e.viewport(t.x,t.y,t.width,t.height):e.viewport(0,0)},t.prototype.pushBlendMode=function(t){this.blendStack.push(t)},t.prototype.popBlendMode=function(){this.blendStack.pop()},t.prototype.useShaderProgram=function(t){var e=this.glx.resourceLibrary.loadProgram(t),n=this.shaderContext;e.use(n),e.loadUniforms(n,this),e.loadAttributes(n,this)},t.prototype.drawArrays=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;u(this);var r=this.glx.gl;r.drawArrays(r[t],n,e)},t.prototype.drawIndexed=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;u(this),this.syncBuffer(e).bindBuffer();var i=this.glx.gl;i.drawElements(i[t],n||e.length,i.UNSIGNED_SHORT,r*e.array.BYTES_PER_ELEMENT)},t.prototype.syncBuffer=function(t){var e=t.resourceRef;!function(t,e){var n=e.resource;n.enableAutotouch&&(t.autotouchResources.has(e.id)||(t.autotouchResources.set(e.id,!0),n.touch()))}(this,e);var n=this.glx.resourceLibrary.loadBuffer(e);return n.sync(e,function(t){return t.bufferData(e.hints.typedArray)}),n.resource},t.prototype.syncTexture=function(t){var e=t.resourceRef,n=this.glx.resourceLibrary.loadTexture(e);return n.sync(e,function(t){return t.uploadImageData()}),n.resource},t}();e.default=s},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(93),a=r(n(10)),u=r(n(94)),s=r(n(95)),f=r(n(96)),c=r(n(97)),l=function(){function t(e){var n=this,r=e.vertexCount,i=e.attributes,o=e.aliases,a=e.proto;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.vertexCount=parseInt(r,10),(0,f.default)(this,i),(0,c.default)(this,o),(0,u.default)(this,a),(0,s.default)(this),Object.keys(this.attr).forEach(function(t){return Object.freeze(n.attr[t])}),Object.freeze(this.attr),Object.freeze(this)}return t.prototype.createVOArray=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return new a.default(this,t,null,e)},t.prototype.createVO=function(t){return(0,o.createVO)(Object.create(this.voPrototype),this,t)},t.prototype.hasAttribute=function(t,e){var n=this.attr[t];return n&&n.size===e},i(t,[{key:"maxIndexedVOPoolSize",get:function(){return Math.floor(65536/this.vertexCount)}}]),t}();e.default=l},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=r(n(98)),a=r(n(3)),u=r(n(10)),s=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=(0,a.default)(),this.descriptor=e,this.capacity=n&&n.capacity||this.descriptor.maxIndexedVOPoolSize,this.maxAllocVOSize=n&&n.maxAllocVOSize||0,this.usage=n&&n.usage||t.USAGE.DYNAMIC;var r=n&&n.voArray;if(r){if(r.usage!==this.usage)throw new Error("VOPool usage(="+this.usage+") mismatch with given voArray(usage="+r.usage+")")}else r=e.createVOArray(this.capacity,this.usage);this.voArray=r,this.voZero=n&&n.voZero||e.createVO(),this.voNew=n&&n.voNew||e.createVO(),this.availableVOs=[],this.usedVOs=[],(0,o.default)(this,this.maxAllocVOSize)}return t.prototype.alloc=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(t>1){for(var e=[],n=0;n<t;++n){var r=this.alloc(1);if(void 0===r)break;e.push(r)}return e}var i=this.availableVOs.shift();return void 0===i?this.capacity-this.allocatedCount>0?((0,o.default)(this,this.maxAllocVOSize),this.alloc()):void 0:(this.usedVOs.push(i),i.voArray.copy(this.voNew.voArray),i)},t.prototype.free=function(t){if(Array.isArray(t))t.forEach(function(t){return t.free()});else{var e=this.usedVOs.indexOf(t);if(-1!==e){var n=this.usedVOs.length-1;if(e!==n){var r=this.usedVOs[n];t.voArray.copy(r.voArray);var i=r.voArray;r.voArray=t.voArray,t.voArray=i,this.usedVOs.splice(e,1,r)}this.usedVOs.pop(),this.availableVOs.unshift(t),t.voArray.copy(this.voZero.voArray)}}},i(t,[{key:"usedCount",get:function(){return this.usedVOs.length}},{key:"availableCount",get:function(){return this.capacity-this.usedVOs.length}},{key:"allocatedCount",get:function(){return this.availableVOs.length+this.usedVOs.length}}]),t}();e.default=s,s.USAGE=u.default.USAGE},function(t,e,n){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(t){return t<0?0:t},o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e<n?(this.minX=e,this.maxX=n):(this.minX=n,this.maxX=e),r<i?(this.minY=r,this.maxY=i):(this.minY=i,this.maxY=r)}return t.prototype.addPoint=function(t,e){t<this.minX?this.minX=t:t>this.maxX&&(this.maxX=t),e<this.minY?this.minY=e:e>this.maxY&&(this.maxY=e)},t.prototype.isInside=function(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY},t.prototype.isIntersection=function(t){return!(t.maxX<this.minX||t.minX>this.maxX||t.maxY<this.minY||t.minY>this.maxY)},r(t,[{key:"width",get:function(){return i(this.maxX-this.minX+1)}},{key:"height",get:function(){return i(this.maxY-this.minY+1)}},{key:"centerX",get:function(){return i((this.maxX-this.minX)/2)}},{key:"centerY",get:function(){return i((this.maxY-this.minY)/2)}}]),t}();e.default=o},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=r(n(7)),o=r(n(42)),a=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.resourceRef=new i.default(this,{target:o.default.ELEMENT_ARRAY_BUFFER,usage:"static"}),this.objectCount=e,this.itemCount=n,this.length=e*n,this.array=new Uint16Array(this.length),this.resourceRef.hints.typedArray=this.array}return t.Generate=function(e,n){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=new t(e,n.length),a=0;a<e;++a)for(var u=0;u<n.length;++u)o.array[a*o.itemCount+u]=n[u]+(a+i)*r;return o},t}();e.default=a},function(t,e,n){"use strict";e.__esModule=!0;e.maxOf=function(t,e){return t>e?t:e},e.findNextPowerOf2=function(t){for(var e=1;t>e;)e<<=1;return e},e.isPowerOf2=function(t){return 0!==t&&0==(t&t-1)}},function(t,e,n){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(116).mat4,o=Math.PI/180,a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.mat4=i.create(),Object.freeze(this)}return t.prototype.identity=function(){i.identity(this.mat4)},t.prototype.ortho=function(t,e){var n=t>>1,r=e>>1,o=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:Math.pow(2,16))>>1;i.ortho(this.mat4,-n,n,-r,r,-o,o)},t.prototype.perspective=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,r=t/e,o=e/2,a=2*Math.atan(o/n);i.perspective(this.mat4,a,r,0,2e3),i.translate(this.mat4,this.mat4,[0,0,-n])},t.prototype.translate=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;i.translate(this.mat4,this.mat4,[t,e,n])},t.prototype.scale=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;i.scale(this.mat4,this.mat4,[t,e,n])},t.prototype.rotateX=function(t){i.rotateX(this.mat4,this.mat4,t*o)},t.prototype.rotateY=function(t){i.rotateY(this.mat4,this.mat4,t*o)},t.prototype.rotateZ=function(t){i.rotateZ(this.mat4,this.mat4,t*o)},t.prototype.multiply=function(t,e){i.multiply(this.mat4,t.mat4,e.mat4)},t.prototype.copy=function(t){i.copy(this.mat4,t.mat4)},t.prototype.clone=function(){var e=new t;return e.copy(this),e},r(t,[{key:"x",get:function(){return this.mat4[12]},set:function(t){this.mat4[12]=t}},{key:"y",get:function(){return this.mat4[13]},set:function(t){this.mat4[13]=t}},{key:"z",get:function(){return this.mat4[14]},set:function(t){this.mat4[14]=t}},{key:"sx",get:function(){return this.mat4[0]},set:function(t){this.mat4[0]=t}},{key:"sy",get:function(){return this.mat4[5]},set:function(t){this.mat4[5]=t}},{key:"sz",get:function(){return this.mat4[10]},set:function(t){this.mat4[10]=t}}]),t}();e.default=a},function(t,e,n){"use strict";function r(t,e,n){let r=e[0],i=e[1],o=e[2],a=e[3],u=e[4],s=e[5],f=e[6],c=e[7],l=e[8],h=n[0],d=n[1],p=n[2],y=n[3],b=n[4],v=n[5],m=n[6],g=n[7],_=n[8];return t[0]=h*r+d*a+p*f,t[1]=h*i+d*u+p*c,t[2]=h*o+d*s+p*l,t[3]=y*r+b*a+v*f,t[4]=y*i+b*u+v*c,t[5]=y*o+b*s+v*l,t[6]=m*r+g*a+_*f,t[7]=m*i+g*u+_*c,t[8]=m*o+g*s+_*l,t}function i(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}Object.defineProperty(e,"__esModule",{value:!0}),e.create=function(){let t=new o.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},e.clone=function(t){let e=new o.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},e.fromValues=function(t,e,n,r,i,a,u,s,f){let c=new o.ARRAY_TYPE(9);return c[0]=t,c[1]=e,c[2]=n,c[3]=r,c[4]=i,c[5]=a,c[6]=u,c[7]=s,c[8]=f,c},e.set=function(t,e,n,r,i,o,a,u,s,f){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t[6]=u,t[7]=s,t[8]=f,t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.transpose=function(t,e){if(t===e){let n=e[1],r=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},e.invert=function(t,e){let n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],u=e[5],s=e[6],f=e[7],c=e[8],l=c*a-u*f,h=-c*o+u*s,d=f*o-a*s,p=n*l+r*h+i*d;return p?(p=1/p,t[0]=l*p,t[1]=(-c*r+i*f)*p,t[2]=(u*r-i*a)*p,t[3]=h*p,t[4]=(c*n-i*s)*p,t[5]=(-u*n+i*o)*p,t[6]=d*p,t[7]=(-f*n+r*s)*p,t[8]=(a*n-r*o)*p,t):null},e.adjoint=function(t,e){let n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],u=e[5],s=e[6],f=e[7],c=e[8];return t[0]=a*c-u*f,t[1]=i*f-r*c,t[2]=r*u-i*a,t[3]=u*s-o*c,t[4]=n*c-i*s,t[5]=i*o-n*u,t[6]=o*f-a*s,t[7]=r*s-n*f,t[8]=n*a-r*o,t},e.determinant=function(t){let e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],u=t[6],s=t[7],f=t[8];return e*(f*o-a*s)+n*(-f*i+a*u)+r*(s*i-o*u)},e.multiply=r,e.translate=function(t,e,n){let r=e[0],i=e[1],o=e[2],a=e[3],u=e[4],s=e[5],f=e[6],c=e[7],l=e[8],h=n[0],d=n[1];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=u,t[5]=s,t[6]=h*r+d*a+f,t[7]=h*i+d*u+c,t[8]=h*o+d*s+l,t},e.rotate=function(t,e,n){let r=e[0],i=e[1],o=e[2],a=e[3],u=e[4],s=e[5],f=e[6],c=e[7],l=e[8],h=Math.sin(n),d=Math.cos(n);return t[0]=d*r+h*a,t[1]=d*i+h*u,t[2]=d*o+h*s,t[3]=d*a-h*r,t[4]=d*u-h*i,t[5]=d*s-h*o,t[6]=f,t[7]=c,t[8]=l,t},e.scale=function(t,e,n){let r=n[0],i=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},e.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},e.fromRotation=function(t,e){let n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},e.fromQuat=function(t,e){let n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,u=r+r,s=i+i,f=n*a,c=r*a,l=r*u,h=i*a,d=i*u,p=i*s,y=o*a,b=o*u,v=o*s;return t[0]=1-l-p,t[3]=c-v,t[6]=h+b,t[1]=c+v,t[4]=1-f-p,t[7]=d-y,t[2]=h-b,t[5]=d+y,t[8]=1-f-l,t},e.normalFromMat4=function(t,e){let n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],u=e[5],s=e[6],f=e[7],c=e[8],l=e[9],h=e[10],d=e[11],p=e[12],y=e[13],b=e[14],v=e[15],m=n*u-r*a,g=n*s-i*a,_=n*f-o*a,x=r*s-i*u,M=r*f-o*u,w=i*f-o*s,A=c*y-l*p,E=c*b-h*p,T=c*v-d*p,O=l*b-h*y,R=l*v-d*y,S=h*v-d*b,P=m*S-g*R+_*O+x*T-M*E+w*A;return P?(P=1/P,t[0]=(u*S-s*R+f*O)*P,t[1]=(s*T-a*S-f*E)*P,t[2]=(a*R-u*T+f*A)*P,t[3]=(i*R-r*S-o*O)*P,t[4]=(n*S-i*T+o*E)*P,t[5]=(r*T-n*R-o*A)*P,t[6]=(y*w-b*M+v*x)*P,t[7]=(b*_-p*w-v*g)*P,t[8]=(p*M-y*_+v*m)*P,t):null},e.projection=function(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},e.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t},e.subtract=i,e.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t},e.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},e.equals=function(t,e){let n=t[0],r=t[1],i=t[2],a=t[3],u=t[4],s=t[5],f=t[6],c=t[7],l=t[8],h=e[0],d=e[1],p=e[2],y=e[3],b=e[4],v=e[5],m=e[6],g=e[7],_=e[8];return Math.abs(n-h)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(r-d)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(i-p)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(a-y)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(y))&&Math.abs(u-b)<=o.EPSILON*Math.max(1,Math.abs(u),Math.abs(b))&&Math.abs(s-v)<=o.EPSILON*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(f-m)<=o.EPSILON*Math.max(1,Math.abs(f),Math.abs(m))&&Math.abs(c-g)<=o.EPSILON*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(l-_)<=o.EPSILON*Math.max(1,Math.abs(l),Math.abs(_))};var o=n(1);const a=r;e.mul=a;const u=i;e.sub=u},function(t,e,n){"use strict";function r(){let t=new p.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t}function i(t){let e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)}function o(t,e,n){let r=new p.ARRAY_TYPE(3);return r[0]=t,r[1]=e,r[2]=n,r}function a(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function u(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function s(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function f(t,e){let n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.sqrt(n*n+r*r+i*i)}function c(t,e){let n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return n*n+r*r+i*i}function l(t){let e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function h(t,e){let n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t}function d(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}Object.defineProperty(e,"__esModule",{value:!0}),e.create=r,e.clone=function(t){var e=new p.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},e.length=i,e.fromValues=o,e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},e.set=function(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t},e.subtract=a,e.multiply=u,e.divide=s,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},e.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t},e.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},e.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t},e.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t},e.distance=f,e.squaredDistance=c,e.squaredLength=l,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},e.normalize=h,e.dot=d,e.cross=function(t,e,n){let r=e[0],i=e[1],o=e[2],a=n[0],u=n[1],s=n[2];return t[0]=i*s-o*u,t[1]=o*a-r*s,t[2]=r*u-i*a,t},e.lerp=function(t,e,n,r){let i=e[0],o=e[1],a=e[2];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t},e.hermite=function(t,e,n,r,i,o){let a=o*o,u=a*(2*o-3)+1,s=a*(o-2)+o,f=a*(o-1),c=a*(3-2*o);return t[0]=e[0]*u+n[0]*s+r[0]*f+i[0]*c,t[1]=e[1]*u+n[1]*s+r[1]*f+i[1]*c,t[2]=e[2]*u+n[2]*s+r[2]*f+i[2]*c,t},e.bezier=function(t,e,n,r,i,o){let a=1-o,u=a*a,s=o*o,f=u*a,c=3*o*u,l=3*s*a,h=s*o;return t[0]=e[0]*f+n[0]*c+r[0]*l+i[0]*h,t[1]=e[1]*f+n[1]*c+r[1]*l+i[1]*h,t[2]=e[2]*f+n[2]*c+r[2]*l+i[2]*h,t},e.random=function(t,e){e=e||1;let n=2*p.RANDOM()*Math.PI,r=2*p.RANDOM()-1,i=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*i,t[1]=Math.sin(n)*i,t[2]=r*e,t},e.transformMat4=function(t,e,n){let r=e[0],i=e[1],o=e[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return a=a||1,t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/a,t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,t},e.transformMat3=function(t,e,n){let r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t},e.transformQuat=function(t,e,n){let r=e[0],i=e[1],o=e[2],a=n[0],u=n[1],s=n[2],f=n[3],c=f*r+u*o-s*i,l=f*i+s*r-a*o,h=f*o+a*i-u*r,d=-a*r-u*i-s*o;return t[0]=c*f+d*-a+l*-s-h*-u,t[1]=l*f+d*-u+h*-a-c*-s,t[2]=h*f+d*-s+c*-u-l*-a,t},e.rotateX=function(t,e,n,r){let i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},e.rotateY=function(t,e,n,r){let i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},e.rotateZ=function(t,e,n,r){let i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},e.angle=function(t,e){let n=o(t[0],t[1],t[2]),r=o(e[0],e[1],e[2]);h(n,n),h(r,r);let i=d(n,r);return i>1?0:i<-1?Math.PI:Math.acos(i)},e.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},e.equals=function(t,e){let n=t[0],r=t[1],i=t[2],o=e[0],a=e[1],u=e[2];return Math.abs(n-o)<=p.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-a)<=p.EPSILON*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(i-u)<=p.EPSILON*Math.max(1,Math.abs(i),Math.abs(u))};var p=n(1);const y=a;e.sub=y;const b=u;e.mul=b;const v=s;e.div=v;const m=f;e.dist=m;const g=c;e.sqrDist=g;const _=i;e.len=_;const x=l;e.sqrLen=x;const M=function(){let t=r();return function(e,n,r,i,o,a){let u,s;for(n||(n=3),r||(r=0),s=i?Math.min(i*n+r,e.length):e.length,u=r;u<s;u+=n)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],o(t,t,a),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2];return e}}();e.forEach=M},function(t,e,n){"use strict";function r(){let t=new d.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function i(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function o(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function a(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function u(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function s(t,e){let n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return Math.sqrt(n*n+r*r+i*i+o*o)}function f(t,e){let n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return n*n+r*r+i*i+o*o}function c(t){let e=t[0],n=t[1],r=t[2],i=t[3];return Math.sqrt(e*e+n*n+r*r+i*i)}function l(t){let e=t[0],n=t[1],r=t[2],i=t[3];return e*e+n*n+r*r+i*i}function h(t,e){let n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a),t[0]=n*a,t[1]=r*a,t[2]=i*a,t[3]=o*a),t}Object.defineProperty(e,"__esModule",{value:!0}),e.create=r,e.clone=function(t){let e=new d.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},e.fromValues=function(t,e,n,r){let i=new d.ARRAY_TYPE(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},e.set=function(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},e.subtract=i,e.multiply=o,e.divide=a,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t},e.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t},e.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t},e.scale=u,e.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t},e.distance=s,e.squaredDistance=f,e.length=c,e.squaredLength=l,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},e.normalize=h,e.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},e.lerp=function(t,e,n,r){let i=e[0],o=e[1],a=e[2],u=e[3];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t[3]=u+r*(n[3]-u),t},e.random=function(t,e){return e=e||1,t[0]=d.RANDOM(),t[1]=d.RANDOM(),t[2]=d.RANDOM(),t[3]=d.RANDOM(),h(t,t),u(t,t,e),t},e.transformMat4=function(t,e,n){let r=e[0],i=e[1],o=e[2],a=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,t},e.transformQuat=function(t,e,n){let r=e[0],i=e[1],o=e[2],a=n[0],u=n[1],s=n[2],f=n[3],c=f*r+u*o-s*i,l=f*i+s*r-a*o,h=f*o+a*i-u*r,d=-a*r-u*i-s*o;return t[0]=c*f+d*-a+l*-s-h*-u,t[1]=l*f+d*-u+h*-a-c*-s,t[2]=h*f+d*-s+c*-u-l*-a,t[3]=e[3],t},e.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},e.equals=function(t,e){let n=t[0],r=t[1],i=t[2],o=t[3],a=e[0],u=e[1],s=e[2],f=e[3];return Math.abs(n-a)<=d.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-u)<=d.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(i-s)<=d.EPSILON*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(o-f)<=d.EPSILON*Math.max(1,Math.abs(o),Math.abs(f))};var d=n(1);const p=i;e.sub=p;const y=o;e.mul=y;const b=a;e.div=b;const v=s;e.dist=v;const m=f;e.sqrDist=m;const g=c;e.len=g;const _=l;e.sqrLen=_;const x=function(){let t=r();return function(e,n,r,i,o,a){let u,s;for(n||(n=4),r||(r=0),s=i?Math.min(i*n+r,e.length):e.length,u=r;u<s;u+=n)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],t[3]=e[u+3],o(t,t,a),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2],e[u+3]=t[3];return e}}();e.forEach=x},function(t,e,n){"use strict";e.__esModule=!0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(5)),i=function(t){function e(n,i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,r.default.TYPE.UNIFORM,i))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(r.default);e.default=i},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=r(n(44)),o=r(n(21)),a=r(n(0)),u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.descriptors=new Map,this.vertexShaders=new Map,this.fragmentShaders=new Map}return t.prototype.destroy=function(){this.descriptors.clear(),this.vertexShaders.clear(),this.fragmentShaders.clear(),(0,a.default)(this)},t.prototype.addDescriptor=function(t,e){return this.descriptors.set(t,new i.default(e)),this},t.prototype.addVertexShader=function(t,e){return this.vertexShaders.set(t,new o.default(o.default.VERTEX_SHADER,e)),this},t.prototype.addFragmentShader=function(t,e){return this.fragmentShaders.set(t,new o.default(o.default.FRAGMENT_SHADER,e)),this},t.prototype.findDescriptor=function(t){return this.descriptors.get(t)},t.prototype.findVertexShader=function(t){return this.vertexShaders.get(t)},t.prototype.findFragmentShader=function(t){return this.fragmentShaders.get(t)},t}();e.default=u},function(t,e,n){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(t){return t&&t.__esModule?t:{default:t}}(n(10)),o=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=e,this.descriptor=n,this.bufferSource=r}return r(t,[{key:"attrDescriptor",get:function(){return this.descriptor.attr[this.name]}},{key:"resourceRef",get:function(){var t=this.bufferSource;return t instanceof i.default?t.resourceRef:t.voArray.resourceRef}}]),t}();e.default=o},function(t,e,n){"use strict";e.__esModule=!0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(5)),i=function(t){function e(n,i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,r.default.TYPE.ATTRIB,i))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(r.default);e.default=i},function(t,e,n){"use strict";e.__esModule=!0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(3));e.default=function t(e,n){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.id=(0,r.default)(),this.vertexShader=e,this.fragmentShader=n}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=r(n(13)),a=r(n(29)),u=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.shaderLibrary=e,this.waitFor=Object.keys(n).map(function(t){return{shaderVarKey:t,textureId:n[t],isLoaded:!1}}),this.shaderVarGroup=new o.default([]),this.shaderVarStore=new Map}return t.prototype.whenLoaded=function(t){var e=this;this.isLoaded?t(this.shaderVarGroup):(this.waitFor.forEach(function(t){if(!t.isLoaded){var n=e.shaderLibrary.states.get(t.textureId);if(void 0===n||!n.isReady)return;var r=new a.default(t.shaderVarKey);r.texture=n.texture,e.shaderVarGroup.shaderVars.push(r),t.isLoaded=!0}}),this.waitFor=this.waitFor.filter(function(t){return!1===t.isLoaded}),this.isLoaded&&t(this.shaderVarGroup))},i(t,[{key:"isLoaded",get:function(){return 0===this.waitFor.length&&this.shaderVarGroup.shaderVars.length>0}}]),t}();e.default=u},function(t,e,n){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=e,this.shaderVar=n}return r(t,[{key:"type",get:function(){return this.shaderVar.type}},{key:"value",get:function(){return this.shaderVar.value}},{key:"serial",get:function(){return this.shaderVar.serial}}]),t}();e.default=i},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=r(n(13)),a=r(n(56)),u=r(n(55)),s=r(n(59)),f=function(t){function e(n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,[])),i=n.descriptor,o=void 0;return Object.keys(i.attr).forEach(function(t){o?r.shaderVars.push(new s.default(t,o)):(o=new a.default(t,new u.default(t,i,n)),r.shaderVars.push(o))}),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.touch=function(){return this.shaderVars[0].touch()},i(e,[{key:"bufferSource",get:function(){return this.shaderVars[0].value.bufferSource}},{key:"serial",get:function(){return this.shaderVars[0].serial}}]),e}(o.default);e.default=f},function(t,e){t.exports=function(t,e){return t===e||t!=t&&e!=e}},function(t,e,n){var r=n(30),i=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=i},function(t,e){var n=9007199254740991,r=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){return!!(e=null==e?n:e)&&("number"==typeof t||r.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e,n){var r=n(164),i=n(27),o=Object.prototype,a=o.hasOwnProperty,u=o.propertyIsEnumerable,s=r(function(){return arguments}())?r:function(t){return i(t)&&a.call(t,"callee")&&!u.call(t,"callee")};t.exports=s},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=r(n(18)),a=r(n(33)),u=r(n(28)),s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.jsonDef=e,this.frameNames=Object.keys(e.frames)}return t.prototype.createTextureAtlas=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return Promise.resolve(e).then(function(e){if("function"==typeof e)return Promise.resolve(e(t)).then(function(t){return"string"==typeof t?new u.default(t).complete:t});if("string"==typeof e)return new u.default(e).complete;if(e)return e;throw new Error("TextureAtlasSpec.createTextureAtlas(): no image found!")}).then(function(e){for(var r=new o.default(e,void 0,void 0,0,0,n),i=new a.default(r,t),u=Object.keys(t.frames),s=Array.isArray(u),f=0,u=s?u:u[Symbol.iterator]();;){var c;if(s){if(f>=u.length)break;c=u[f++]}else{if((f=u.next()).done)break;c=f.value}var l=c,h=t.frames[l].frame;i.addFrame(l,h.w,h.h,h.x,h.y)}return i})},t.load=function(e,n){return window.fetch(e,n).then(function(t){return t.json()}).then(function(e){return new t(e)})},i(t,[{key:"frames",get:function(){return this.jsonDef.frames}},{key:"meta",get:function(){return this.jsonDef.meta}},{key:"imageUrl",get:function(){return this.meta.image}}]),t}();e.default=s},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t){return t[Math.random()*t.length|0]}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=r(n(18)),o=r(n(68)),a=r(n(33)),u=r(n(29)),s=r(n(0)),f=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.states=new Map,this.shaderVars=new Map}return t.prototype.destroy=function(){this.states.clear(),this.shaderVars.clear(),(0,s.default)(this)},t.prototype.loadTexture=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=new o.default(i.default.load(e,n));return this.states.set(t,r),r.promise},t.prototype.loadTextureAtlas=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=a.default.load(e,null,null,n),i=new o.default(r.then(function(t){return i.atlas=t,t.rootTexture}));return this.states.set(t,i),r},t.prototype.getTextureAtlas=function(t){return this.states.get(t).atlas},t.prototype.whenLoaded=function(t,e,n){var r=this.states.get(t);if(void 0!==r&&r.isReady){var i=this.shaderVars.get(e);void 0===i&&(i=new u.default(e),this.shaderVars.set(e,i)),i.texture=r.texture,n(i)}},t}();e.default=f},function(t,e,n){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(){function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.texture=null,this.atlas=null,this.promise=Promise.resolve(e).then(function(t){return r.texture=t,t}).catch(function(t){console.error("TextureState error:",t)}),Promise.resolve(n).then(function(t){r.atlas=t})}return r(t,[{key:"isReady",get:function(){return null!=this.texture}}]),t}();e.default=i},function(t,e,n){"use strict";e.__esModule=!0;var r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.registry=new Map,this.parentComponentRegistry=e}return t.prototype.registerComponent=function(t,e){return this.registry.set(t,e),this},t.prototype.createComponent=function(t,e,n){var r=this.registry.get(e);if(!r)return this.parentComponentRegistry&&this.parentComponentRegistry.createComponent(t,e,n),this;var i=r.create(t,n);return t.setComponent(e,i,this),this},t.prototype.updateComponent=function(t,e,n){var r=this.registry.get(e);if(!r)return this.parentComponentRegistry&&this.parentComponentRegistry.updateComponent(t,e,n),this;var i=t[e];return r.update(i,n),this},t.prototype.createOrUpdateComponent=function(t,e,n){var r=t.getComponentRegistry(e);return r?r.updateComponent(t,e,n):this.createComponent(t,e,n),this},t.prototype.destroyComponent=function(t,e){var n=this.registry.get(e);if(!n)return this.parentComponentRegistry&&this.parentComponentRegistry.destroyComponent(t,e),this;var r=t[e];return n.destroy(r),this},t}();e.default=r},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.default=function(t){t.registerComponent("clear",i.default.createCssStyledPropsComponent(o.default)),t.registerComponent("blend",i.default.createCssStyledPropsComponent(a.default)),t.registerComponent("projection",i.default.createCssStyledPropsComponent(u.default))};var i=r(n(71)),o=r(n(183)),a=r(n(184)),u=r(n(185))},function(t,e,n){"use strict";e.__esModule=!0;var r=n(19),i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.createCssStyledPropsComponent=function(t){return{create:function(e,n){return new t(e,(0,r.parseCssStyledProperties)(n))},update:function(t,e){t.update((0,r.parseCssStyledProperties)(e))},destroy:function(){}}},t.createComponent=function(t){return{create:function(e,n){return new t(e,n)},update:function(t,e){t.update(e)},destroy:function(){}}},t}();e.default=i},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=r(n(73)),o=r(n(0)),a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.entities=new Map}return t.prototype.createEntity=function(){var t=new i.default;return this.entities.set(t.id,t),t},t.prototype.getEntity=function(t){return this.entities.get(t)},t.prototype.destroyEntity=function(t){var e=this.entities.get(t);return!!e&&(e.destroy(),this.entities.delete(t),!0)},t.prototype.destroyAllEntities=function(){for(var t=this.entities.keys(),e=Array.isArray(t),n=0,t=e?t:t[Symbol.iterator]();;){var r;if(e){if(n>=t.length)break;r=t[n++]}else{if((n=t.next()).done)break;r=n.value}var i=r;this.destroyEntity(i)}},t.prototype.destroy=function(){this.destroyAllEntities(),this.entities.clear(),(0,o.default)(this)},t}();e.default=a},function(t,e,n){"use strict";e.__esModule=!0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(3)),i=n(22),o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.registries=new Map,this.id=(0,r.default)(),i(this)}return t.prototype.hasComponent=function(t){return this.registries.has(t)},t.prototype.getComponentRegistry=function(t){return this.registries.get(t)},t.prototype.setComponent=function(t,e,n){if(this[t])throw new Error('Component name "'+t+'" is already assigned!');return this.registries.set(t,n),this[t]=e,e.connectedEntity&&e.connectedEntity(this),this},t.prototype.queryComponent=function(t,e){var n=this[t];return n&&e?e(n):n},t.prototype.destroyComponent=function(t){if(this.registries.has(t)){var e=this.registries.get(t);this.registries.delete(t),e&&e.destroyComponent(this,t);var n=this[t];delete this[t],n.disconnectedEntity&&n.disconnectedEntity(this)}return this},t.prototype.destroy=function(){this.emit("destroy",this),function(t){for(var e=t.registries.keys(),n=Array.isArray(e),r=0,e=n?e:e[Symbol.iterator]();;){var i;if(n){if(r>=e.length)break;i=e[r++]}else{if((r=e.next()).done)break;i=r.value}var o=i;t.destroyComponent(o)}}(this)},t}();e.default=o},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=r(n(54)),o=r(n(186)),a=new i.default;(0,o.default)(a),e.default=a},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.EntityManager=e.Entity=e.ComponentRegistry=e.ComponentFactory=void 0;var i=r(n(71)),o=r(n(69)),a=r(n(73)),u=r(n(72));e.ComponentFactory=i.default,e.ComponentRegistry=o.default,e.Entity=a.default,e.EntityManager=u.default},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e,n){if(!t.hasAttribute(e))return n;switch(t.getAttribute(e).toLowerCase()){case"true":case"yes":case"on":case"":case e:return!0}return!1}},function(t,e,n){n(78),t.exports=n(79)},function(t,e){!function(t){"use strict";function e(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function n(t){return"string"!=typeof t&&(t=String(t)),t}function r(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return d.iterable&&(e[Symbol.iterator]=function(){return e}),e}function i(t){this.map={},t instanceof i?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function o(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function a(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function u(t){var e=new FileReader,n=a(e);return e.readAsArrayBuffer(t),n}function s(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function f(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t)if("string"==typeof t)this._bodyText=t;else if(d.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(d.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(d.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(d.arrayBuffer&&d.blob&&y(t))this._bodyArrayBuffer=s(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!d.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t)&&!b(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=s(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):d.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},d.blob&&(this.blob=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(u)}),this.text=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return function(t){var e=new FileReader,n=a(e);return e.readAsText(t),n}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},d.formData&&(this.formData=function(){return this.text().then(l)}),this.json=function(){return this.text().then(JSON.parse)},this}function c(t,e){var n=(e=e||{}).body;if(t instanceof c){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new i(t.headers)),this.method=t.method,this.mode=t.mode,n||null==t._bodyInit||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new i(e.headers)),this.method=function(t){var e=t.toUpperCase();return v.indexOf(e)>-1?e:t}(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function l(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(i))}}),e}function h(t,e){e||(e={}),this.type="default",this.status="status"in e?e.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new i(e.headers),this.url=e.url||"",this._initBody(t)}if(!t.fetch){var d={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(d.arrayBuffer)var p=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],y=function(t){return t&&DataView.prototype.isPrototypeOf(t)},b=ArrayBuffer.isView||function(t){return t&&p.indexOf(Object.prototype.toString.call(t))>-1};i.prototype.append=function(t,r){t=e(t),r=n(r);var i=this.map[t];this.map[t]=i?i+","+r:r},i.prototype.delete=function(t){delete this.map[e(t)]},i.prototype.get=function(t){return t=e(t),this.has(t)?this.map[t]:null},i.prototype.has=function(t){return this.map.hasOwnProperty(e(t))},i.prototype.set=function(t,r){this.map[e(t)]=n(r)},i.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},i.prototype.keys=function(){var t=[];return this.forEach(function(e,n){t.push(n)}),r(t)},i.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),r(t)},i.prototype.entries=function(){var t=[];return this.forEach(function(e,n){t.push([n,e])}),r(t)},d.iterable&&(i.prototype[Symbol.iterator]=i.prototype.entries);var v=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];c.prototype.clone=function(){return new c(this,{body:this._bodyInit})},f.call(c.prototype),f.call(h.prototype),h.prototype.clone=function(){return new h(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})},h.error=function(){var t=new h(null,{status:0,statusText:""});return t.type="error",t};var m=[301,302,303,307,308];h.redirect=function(t,e){if(-1===m.indexOf(e))throw new RangeError("Invalid status code");return new h(null,{status:e,headers:{location:t}})},t.Headers=i,t.Request=c,t.Response=h,t.fetch=function(t,e){return new Promise(function(n,r){var o=new c(t,e),a=new XMLHttpRequest;a.onload=function(){var t={status:a.status,statusText:a.statusText,headers:function(t){var e=new i;return t.split(/\r?\n/).forEach(function(t){var n=t.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();e.append(r,i)}}),e}(a.getAllResponseHeaders()||"")};t.url="responseURL"in a?a.responseURL:t.headers.get("X-Request-URL");var e="response"in a?a.response:a.responseText;n(new h(e,t))},a.onerror=function(){r(new TypeError("Network request failed"))},a.ontimeout=function(){r(new TypeError("Network request failed"))},a.open(o.method,o.url,!0),"include"===o.credentials&&(a.withCredentials=!0),"responseType"in a&&d.blob&&(a.responseType="blob"),o.headers.forEach(function(t,e){a.setRequestHeader(e,t)}),a.send(void 0===o._bodyInit?null:o._bodyInit)})},t.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},function(t,e,n){"use strict";e.__esModule=!0;var r=n(39);Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return r[t]}})});var i=function(t){return t&&t.__esModule?t:{default:t}}(n(195));e.default=i.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=r(n(40)),a=r(n(43)),u=r(n(35)),s=r(n(37)),f=r(n(74)),c=r(n(38)),l=r(n(70)),h=r(n(0)),d=n(2),p=n(22),y=n(34),b=function(){return window.performance.now()/1e3},v=function(t,e,n){return t&&e in t?t[e]:"function"==typeof n?n():n},m=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),p(this);var r=v.bind(null,e);this.componentRegistry=u.default,this.entityManager=s.default,this.resourceLibrary=f.default,this.textureLibrary=c.default,this.canvas=r("canvas",function(){return document.createElement("canvas")}),this.contextAttributes={alpha:r("alpha",!1),depth:r("depth",!1),stencil:r("stencil",!1),antialias:r("antialias",!1),premultipliedAlpha:r("premultipliedAlpha",!1),preserveDrawingBuffer:r("preserveDrawingBuffer",!1)},this.time=r("time",0),this.lastFrameTime=0,this.timeFrameOffset=0,this.frameNo=r("frameNo",0),this.clearColor=r("clearColor"),this.createGlContext=r("createGlContext",function(){return function(){return function(t,e){var n=void 0;try{n=t.getContext("webgl",e)}catch(t){(0,d.error)(t)}if(!n)try{n=t.getContext("experimental-webgl",e)}catch(t){(0,d.error)(t)}if(!n)throw new Error("cannot create webgl1 context");return n}(n.canvas,n.contextAttributes)}}),(0,l.default)(this.componentRegistry),this.entity=this.entityManager.createEntity(),this.entity.setComponent("blitpunk",this),this.entity.setComponent("resourceLibrary",this.resourceLibrary),this.entity.setComponent("textureLibrary",this.textureLibrary),this.componentRegistry.createComponent(this.entity,"children"),this.el=null,this.started=!1,this.stopped=!1,this.destroyed=!1}return t.prototype.start=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;if(this.canStart){if(this.stopped)return this.stopped=!1,this.resize(),void this.requestAnimate();this.el=t,this.started=!0,this.glx=new o.default(this.createGlContext()),this.renderer=new a.default(this.glx),this._clearColor&&this.renderer.setClearColor(this._clearColor),this.startTime=b(),this.el.appendChild(this.canvas),this.resize(),this.requestAnimate()}},t.prototype.requestAnimate=function(){var t=this;this.rafSubscription=window.requestAnimationFrame(function(){return t.animate()})},t.prototype.cancelAnimate=function(){window.cancelAnimationFrame(this.rafSubscription)},t.prototype.stop=function(){this.canStop&&(this.stopped=!0,this.cancelAnimate())},t.prototype.destroy=function(){if(!this.destroyed){this.cancelAnimate();try{this.glx.destroy()}catch(t){(0,d.error)("blitpunk->destroy(WebGlContext) panic!",t)}try{this.renderer.destroy()}catch(t){(0,d.error)("blitpunk->destroy(WebGlRenderer) panic!",t)}this.el.removeChild(this.canvas),(0,h.default)(this)}},t.prototype.animate=function(){this.canAnimate&&(this.renderFrame(),this.requestAnimate())},t.prototype.renderFrame=function(){++this.frameNo,this.time=b()-this.startTime,this.lastFrameTime&&(this.timeFrameOffset=this.time-this.lastFrameTime),this.lastFrameTime=this.time,this.resize(),this.renderer.renderFrame(this.entity,this)},t.prototype.resize=function(){var t="inline"===window.getComputedStyle(this.el,null).display?this.el.parentNode:this.el,e=this.canvas,n=window.devicePixelRatio||1,r=t.clientWidth,i=t.clientHeight;e.style.width=r+"px",e.style.height=i+"px";var o=Math.round(r*n),a=Math.round(i*n);o===e.width&&a===e.height||(e.width=o,e.height=a),o===this.width&&a===this.height||(this.width=o,this.height=a,this.glx.gl.viewport(0,0,o,a))},i(t,[{key:"clearColor",get:function(){return this.renderer?this.renderer.clearColor:this._clearColor},set:function(t){this._clearColor=null==t?t:y(t),this.renderer&&this.renderer.setClearColor(this._clearColor)}},{key:"canStart",get:function(){return(!this.started||this.started&&this.stopped)&&!this.destroyed}},{key:"canStop",get:function(){return this.started&&!this.stopped&&!this.destroyed}},{key:"canAnimate",get:function(){return this.started&&!this.stopped&&!this.destroyed}}]),t}();e.default=m},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=r(n(7)),o=r(n(86)),a=r(n(88)),u=r(n(42)),s=r(n(91)),f=r(n(0)),c=Object.freeze({static:u.default.STATIC_DRAW,dynamic:u.default.DYNAMIC_DRAW}),l=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Object.defineProperty(this,"glx",{value:e}),this.vertexShader=new Map,this.fragmentShader=new Map,this.shaderProgram=new Map,this.buffer=new Map,this.texture=new Map}return t.prototype.destroy=function(){this.texture.clear(),this.buffer.clear(),this.shaderProgram.clear(),this.fragmentShader.clear(),this.vertexShader.clear(),(0,f.default)(this)},t.prototype.loadVertexShader=function(t){var e=this.vertexShader.get(t.id);return e||(e=new o.default(this.glx,t),this.vertexShader.set(t.id,e)),e},t.prototype.loadFragementShader=function(t){var e=this.fragmentShader.get(t.id);return e||(e=new o.default(this.glx,t),this.vertexShader.set(t.id,e)),e},t.prototype.loadProgram=function(t){var e=this.shaderProgram.get(t.id);return e||(e=new a.default(this.glx,t),this.shaderProgram.set(t.id,e)),e},t.prototype.loadBuffer=function(t){var e=this.buffer.get(t.id);if(!e){var n=t.hints.target||u.default.ARRAY_BUFFER,r=new u.default(this.glx,n,c[t.hints.usage]);e=new i.default(r,{id:t.id,serial:0}),this.buffer.set(t.id,e)}return e},t.prototype.findBuffer=function(t){return this.buffer.get(t.id)},t.prototype.loadTexture=function(t){var e=this.texture.get(t.id);if(!e){var n=new s.default(this.glx,t.resource.imgEl,t.hints.flipY,t.hints.repeatable,t.hints.premultiplyAlpha,t.hints.nearest);e=new i.default(n,{id:t.id,serial:0}),this.texture.set(t.id,e)}return e},t}();e.default=l},function(t,e,n){var r=n(83),i=n(84);t.exports=function(t,e,n){var o=e&&n||0;"string"==typeof t&&(e="binary"==t?new Array(16):null,t=null);var a=(t=t||{}).random||(t.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,e)for(var u=0;u<16;++u)e[o+u]=a[u];return e||i(a)}},function(t,e,n){(function(e){var n,r=e.crypto||e.msCrypto;if(r&&r.getRandomValues){var i=new Uint8Array(16);n=function(){return r.getRandomValues(i),i}}if(!n){var o=new Array(16);n=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),o[e]=t>>>((3&e)<<3)&255;return o}}t.exports=n}).call(e,n(41))},function(t,e){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);t.exports=function(t,e){var r=e||0,i=n;return i[t[r++]]+i[t[r++]]+i[t[r++]]+i[t[r++]]+"-"+i[t[r++]]+i[t[r++]]+"-"+i[t[r++]]+i[t[r++]]+"-"+i[t[r++]]+i[t[r++]]+"-"+i[t[r++]]+i[t[r++]]+i[t[r++]]+i[t[r++]]+i[t[r++]]+i[t[r++]]}},function(t,e,n){"use strict";e.__esModule=!0;var r=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.value=e}return t.prototype.touch=function(){++this.value},t}();e.default=r},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=r(n(21)),o=r(n(87));e.default=function t(e,n){if(function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.glx=e,!(n instanceof i.default))throw new Error("WebGlShader panic! source must be an instance of ShaderSource!");this.source=n;var r=e.gl;this.shaderType=r[n.type],this.glShader=r.createShader(this.shaderType),function(t){var e=t.glx.gl,n=t.glShader,r=t.source,i=(0,o.default)({glx:t.glx},r.source);if(e.shaderSource(n,i),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS)){var a=e.getShaderInfoLog(n);console.error(a),console.group("shader-info"),console.debug("shaderSource",t),console.log(r),console.groupEnd();var u=new Error("WebGlShader compile panic!");throw u.webGlShader=t,u.shaderInfoLog=a,u}}(this),Object.freeze(this)}},function(t,e,n){"use strict";function r(t,e){return"string"==typeof e?e:"function"==typeof e?r(t,e(t)):Array.isArray(e)?e.map(r.bind(null,t)).join("\n"):e+""}e.__esModule=!0,e.default=r},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=r(n(89)),o=r(n(90)),a=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.glx=e,this.vertexShader=e.resourceLibrary.loadVertexShader(n.vertexShader),this.fragmentShader=e.resourceLibrary.loadFragementShader(n.fragmentShader);var r=e.gl;this.glProgram=r.createProgram(),function(t,e,n){var r=t.glx.gl,i=t.glProgram;if(r.attachShader(i,e),r.attachShader(i,n),r.linkProgram(i),!r.getProgramParameter(i,r.LINK_STATUS)){var o=new Error("WebGlProgram link panic!");throw o.webGlProgram=t,o}}(this,this.vertexShader.glShader,this.fragmentShader.glShader),function(t){var e=t.glx.gl,n=e.getProgramParameter(t.glProgram,e.ACTIVE_UNIFORMS);t.uniforms={},t.uniformNames=[];for(var r=0;r<n;++r){var o=new i.default(t,r);t.uniforms[o.name]=o,t.uniformNames.push(o.name)}Object.freeze(t.uniforms)}(this),function(t){var e=t.glx.gl,n=e.getProgramParameter(t.glProgram,e.ACTIVE_ATTRIBUTES);t.attributes={},t.attributeNames=[],t.attributeLocations=[];for(var r=0;r<n;++r){var i=new o.default(t,r);t.attributes[i.name]=i,t.attributeNames.push(i.name),t.attributeLocations.push(i.location)}Object.freeze(t.attributes)}(this),Object.freeze(this)}return t.prototype.use=function(){var t=this.glx;return!!t.useProgram(this.glProgram)&&(t.enableVertexAttribArrays(this.attributeLocations),!0)},t.prototype.loadUniforms=function(t,e){var n=this;this.uniformNames.forEach(function(r){var i=t.curUniform(r);null==i&&(null==(i=t.curTex2d(r))&&console.error("[WebGlProgram] could not load uniform:",r),i.syncTextureAndValue(e)),n.uniforms[r].setValue(i.value)})},t.prototype.loadAttributes=function(t,e){var n=this;this.attributeNames.forEach(function(r){var i=t.curAttrib(r).value;e.syncBuffer(i).bindBuffer(),n.attributes[r].vertexAttribPointer(i.descriptor)})},t}();e.default=a},function(t,e,n){"use strict";e.__esModule=!0;e.default=function t(e,n){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.program=e,this.glx=e.glx;var r=e.glx.gl,i=e.glProgram,o=r.getActiveUniform(i,n),a=o.name,u=o.size,s=o.type;this.name=a,this.size=u,this.type=s,this.location=r.getUniformLocation(i,a),this.setValue=function(t){var e=t.type,n=t.location,r=t.glx.gl;switch(e){case r.FLOAT:return function(t){return r.uniform1f(n,t)};case r.FLOAT_VEC2:return function(t){return r.uniform2f(n,t[0],t[1])};case r.FLOAT_VEC3:return function(t){return r.uniform3f(n,t[0],t[1],t[2])};case r.FLOAT_VEC4:return function(t){return r.uniform4f(n,t[0],t[1],t[2],t[3])};case r.FLOAT_MAT4:return function(t){return r.uniformMatrix4fv(n,r.FALSE,t.mat4)};case r.SAMPLER_2D:return function(t){return r.uniform1i(n,t)}}var i=new Error("WebGlUniform unknown uniform type:"+e);throw i.webGlUniform=t,i}(this),Object.freeze(this)}},function(t,e,n){"use strict";e.__esModule=!0;var r=n(8),i=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.program=e,this.glx=e.glx;var r=e.glx.gl,i=e.glProgram,o=r.getActiveAttrib(i,n),a=o.name,u=o.size,s=o.type;this.name=a,this.size=u,this.type=s,this.location=r.getAttribLocation(i,a),Object.freeze(this)}return t.prototype.vertexAttribPointer=function(t){var e=this.glx.gl,n=t.attr[this.name],i=function(t,e){return t[r.GL_ITEM_TYPES[e]]}(e,n.type);e.vertexAttribPointer(this.location,n.size,i,!1,t.bytesPerVertex,n.byteOffset)},t}();e.default=i},function(t,e,n){"use strict";e.__esModule=!0;var r=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.glx=e,this.imgEl=n,this.flipY=r,this.repeatable=i,this.premultiplyAlpha=o,this.nearest=a,this.isInitialized=!1,this.glTexObj=e.gl.createTexture(),this.texUnit=-1}return t.prototype.bind=function(){return this.glx.textureManager.bindWebGlTexture(this)},t.prototype.uploadImageData=function(){if(null!=this.imgEl){this.isInitialized||(!function(t){t.bind();var e=t.glx.gl;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha);var n=t.repeatable?e.REPEAT:e.CLAMP_TO_EDGE;e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,n);var r=t.nearest?e.NEAREST:e.LINEAR;e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,r),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t.imgEl.width,t.imgEl.height,0,e.RGBA,e.UNSIGNED_BYTE,null)}(this),this.isInitialized=!0),this.bind();var t=this.glx.gl;t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this.imgEl)}},t}();e.default=r},function(t,e,n){"use strict";e.__esModule=!0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(0)),i=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Object.defineProperty(this,"glx",{value:e}),this.boundTextures=new Array(e.MAX_TEXTURE_IMAGE_UNITS);for(var n=0;n<this.boundTextures.length;++n)this.boundTextures[n]=null;this.lastBoundTexUnit=0}return t.prototype.destroy=function(){this.boundTextures.length=0,(0,r.default)(this)},t.prototype.bindWebGlTexture=function(t){var e=this.boundTextures.indexOf(t);if(e<0){for(var n=0;n<this.boundTextures.length;++n)if(!this.boundTextures[n]){e=n,this.boundTextures[n]=t;break}if(e<0){e=this.lastBoundTexUnit;var r=this.boundTextures[e];r&&(r.texUnit=-1),this.lastBoundTexUnit=(this.lastBoundTexUnit+1)%this.glx.MAX_TEXTURE_IMAGE_UNITS}this.glx.activeTexture(e),this.glx.bindTexture2d(t.glTexObj),t.texUnit=e}return e},t}();e.default=i},function(t,e,n){"use strict";e.__esModule=!0,e.createVO=function(t,e,n){if(t.descriptor=e||(n?n.descriptor:null),!t.descriptor)throw new Error("could not detect VODescriptor!");if(t.voArray=n||t.descriptor.createVOArray(),t.descriptor!==t.voArray.descriptor&&(t.descriptor.vertexCount!==t.voArray.descriptor.vertexCount||t.descriptor.vertexAttrCount!==t.voArray.descriptor.vertexAttrCount))throw new Error("Incompatible vertex object descriptors!");return t}},function(t,e,n){"use strict";e.__esModule=!0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.default=function(t,e){var n={toArray:{value:function(e){for(var n=[],r=Array.isArray(e)?e.map(function(e){return t.attr[e]}):t.attrList,i=r.length,o=0;o<t.vertexCount;++o)for(var a=0;a<i;++a)for(var u=r[a],s=0;s<u.size;++s)n.push(u.getValue(this,o,s));return n}}};Object.keys(t.attr).forEach(function(e){var r=t.attr[e];i.default.defineProperties(r,n,t)}),t.voPrototype=Object.create("object"===(void 0===e?"undefined":r(e))?e:{},n)};var i=function(t){return t&&t.__esModule?t:{default:t}}(n(11))},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t){t.typedArrays={float32:!1,int16:!1,int32:!1,int8:!1,uint16:!1,uint32:!1,uint8:!1},Object.keys(t.attr).forEach(function(e){t.typedArrays[t.attr[e].type]=!0}),Object.freeze(t.typedArrays),t.typeList=Object.keys(t.typedArrays).filter(function(e){return t.typedArrays[e]}).sort()}},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e){if(t.attr={},t.attrNames=[],Array.isArray(e)){for(var n=0,o=0,a=0;a<e.length;++a){var u=e[a];if(void 0===u.size)throw new Error("vertex object attribute descriptor has no size!");var s=u.type||"float32";void 0!==u.name&&(t.attrNames.push(u.name),t.attr[u.name]=new i.default(u.name,s,u.size,n,o,!!u.uniform,u.attrNames)),n+=u.size,o+=r.BYTES_PER_ELEMENT[s]*u.size}t.rightPadBytesPerVertex=o%4>0?4-o%4:0,t.bytesPerVertex=o+t.rightPadBytesPerVertex,t.bytesPerVO=t.bytesPerVertex*t.vertexCount,t.vertexAttrCount=n}t.attrList=t.attrNames.map(function(e){return t.attr[e]})};var r=n(8),i=function(t){return t&&t.__esModule?t:{default:t}}(n(11))},function(t,e,n){"use strict";e.__esModule=!0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.default=function(t,e){"object"===(void 0===e?"undefined":r(e))&&Object.keys(e).forEach(function(n){var r=e[n];"string"==typeof r?void 0!==(r=t.attr[r])&&(t.attr[n]=r):t.attr[n]=new i.default(n,r.type,r.size,r.offset,r.byteOffset,!!r.uniform,r.attrNames)})};var i=function(t){return t&&t.__esModule?t:{default:t}}(n(11))},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=t.capacity-t.usedCount-t.allocatedCount,r=t.allocatedCount+(e>0&&e<n?e:n),i=t.allocatedCount;i<r;i++){var o=t.voArray.subarray(i),a=t.descriptor.createVO(o);a.free=t.free.bind(t,a),t.availableVOs.push(a)}}},function(t,e,n){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(100),o=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.enable=e,this.sfactor=n,this.dfactor=r}return t.prototype.isEqual=function(t){return t&&this.enable===t.enable&&this._sfactor===t._sfactor&&this._dfactor===t._dfactor},r(t,[{key:"sfactor",set:function(t){this._sfactor="string"==typeof t?i(t).toUpperCase():void 0},get:function(){return this._sfactor}},{key:"dfactor",set:function(t){this._dfactor="string"==typeof t?i(t).toUpperCase():void 0},get:function(){return this._dfactor}}]),t}();e.default=o},function(t,e,n){var r=n(101)(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()});t.exports=r},function(t,e,n){var r=n(102),i=n(103),o=n(111),a=RegExp("[']","g");t.exports=function(t){return function(e){return r(o(i(e).replace(a,"")),t,"")}}},function(t,e){t.exports=function(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}},function(t,e,n){var r=n(104),i=n(23),o=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,a=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");t.exports=function(t){return(t=i(t))&&t.replace(o,r).replace(a,"")}},function(t,e,n){var r=n(105)({"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"});t.exports=r},function(t,e){t.exports=function(t){return function(e){return null==t?void 0:t[e]}}},function(t,e,n){function r(t){if("string"==typeof t)return t;if(a(t))return o(t,r)+"";if(u(t))return c?c.call(t):"";var e=t+"";return"0"==e&&1/t==-s?"-0":e}var i=n(12),o=n(108),a=n(4),u=n(25),s=1/0,f=i?i.prototype:void 0,c=f?f.toString:void 0;t.exports=r},function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(e,n(41))},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}},function(t,e,n){var r=n(12),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,u=r?r.toStringTag:void 0;t.exports=function(t){var e=o.call(t,u),n=t[u];try{t[u]=void 0;var r=!0}catch(t){}var i=a.call(t);return r&&(e?t[u]=n:delete t[u]),i}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},function(t,e,n){var r=n(112),i=n(113),o=n(23),a=n(114);t.exports=function(t,e,n){return t=o(t),void 0===(e=n?void 0:e)?i(t)?a(t):r(t):t.match(e)||[]}},function(t,e){var n=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;t.exports=function(t){return t.match(n)||[]}},function(t,e){var n=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;t.exports=function(t){return n.test(t)}},function(t,e){var n="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",r="["+n+"]",i="\\d+",o="[\\u2700-\\u27bf]",a="[a-z\\xdf-\\xf6\\xf8-\\xff]",u="[^\\ud800-\\udfff"+n+i+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",s="(?:\\ud83c[\\udde6-\\uddff]){2}",f="[\\ud800-\\udbff][\\udc00-\\udfff]",c="[A-Z\\xc0-\\xd6\\xd8-\\xde]",l="(?:"+a+"|"+u+")",h="(?:"+c+"|"+u+")",d="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",p="[\\ufe0e\\ufe0f]?"+d+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",s,f].join("|")+")[\\ufe0e\\ufe0f]?"+d+")*"),y="(?:"+[o,s,f].join("|")+")"+p,b=RegExp([c+"?"+a+"+(?:['](?:d|ll|m|re|s|t|ve))?(?="+[r,c,"$"].join("|")+")",h+"+(?:['](?:D|LL|M|RE|S|T|VE))?(?="+[r,c+l,"$"].join("|")+")",c+"?"+l+"+(?:['](?:d|ll|m|re|s|t|ve))?",c+"+(?:['](?:D|LL|M|RE|S|T|VE))?","\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)","\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)",i,y].join("|"),"g");t.exports=function(t){return t.match(b)||[]}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=r(n(49)),a=r(n(53)),u=function(){function t(e){var n=e.desiredWidth,r=e.desiredHeight,i=e.pixelRatio,o=e.sizeFit,a=e.uniformName,u=e.perspective;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.desiredWidth=n,this.desiredHeight=r,this.pixelRatio=i,this.sizeFit=o,this.uniformName=a,this.perspective=u,this.width=0,this.height=0}return t.prototype.updateOrtho=function(t,e){t===this.width&&e===this.height||(this.width=t,this.height=e,this.perspective>0?this.uniform.value.perspective(t,e,this.perspective):this.uniform.value.ortho(t,e),this.uniform.touch())},t.prototype.update=function(t,e){if("fill"===this.sizeFit&&this.desiredWidth>0&&this.desiredHeight>0)this.updateOrtho(this.desiredWidth,this.desiredHeight);else if(("cover"===this.sizeFit||"contain"===this.sizeFit)&&this.desiredWidth>=0&&this.desiredHeight>=0){var n=e/t,r=this.desiredHeight/this.desiredWidth,i="cover"===this.sizeFit,o=this.desiredWidth,a=this.desiredHeight;if(0===this.desiredWidth&&this.desiredHeight||n<r){if(o=this.desiredHeight/e*t,i){var u=this.desiredWidth/o;o*=u,a*=u}}else if((this.desiredWidth&&0===this.desiredHeight||n>r)&&(a=this.desiredWidth/t*e,i)){var s=this.desiredHeight/a;o*=s,a*=s}this.updateOrtho(o,a)}},i(t,[{key:"uniformName",set:function(t){var e=t||"viewMatrix";this.uniform&&this.uniform.name===e||(this.uniform=new a.default(e,new o.default))},get:function(){return this.uniform&&this.uniform.name||"viewMatrix"}},{key:"perspective",set:function(t){this._perspective="number"==typeof t?Math.abs(t):0},get:function(){return this._perspective}}]),t}();e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=n(117),o=n(118),a=n(50),u=n(119),s=n(120),f=n(121),c=n(51),l=n(52);n.d(e,"glMatrix",function(){return r}),n.d(e,"mat2",function(){return i}),n.d(e,"mat2d",function(){return o}),n.d(e,"mat3",function(){return a}),n.d(e,"mat4",function(){return u}),n.d(e,"quat",function(){return s}),n.d(e,"vec2",function(){return f}),n.d(e,"vec3",function(){return c}),n.d(e,"vec4",function(){return l})},function(t,e,n){"use strict";function r(t,e,n){let r=e[0],i=e[1],o=e[2],a=e[3],u=n[0],s=n[1],f=n[2],c=n[3];return t[0]=r*u+o*s,t[1]=i*u+a*s,t[2]=r*f+o*c,t[3]=i*f+a*c,t}function i(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}Object.defineProperty(e,"__esModule",{value:!0}),e.create=function(){let t=new o.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},e.clone=function(t){let e=new o.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},e.fromValues=function(t,e,n,r){let i=new o.ARRAY_TYPE(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i},e.set=function(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t},e.transpose=function(t,e){if(t===e){let n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},e.invert=function(t,e){let n=e[0],r=e[1],i=e[2],o=e[3],a=n*o-i*r;return a?(a=1/a,t[0]=o*a,t[1]=-r*a,t[2]=-i*a,t[3]=n*a,t):null},e.adjoint=function(t,e){let n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t},e.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},e.multiply=r,e.rotate=function(t,e,n){let r=e[0],i=e[1],o=e[2],a=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=r*s+o*u,t[1]=i*s+a*u,t[2]=r*-u+o*s,t[3]=i*-u+a*s,t},e.scale=function(t,e,n){let r=e[0],i=e[1],o=e[2],a=e[3],u=n[0],s=n[1];return t[0]=r*u,t[1]=i*u,t[2]=o*s,t[3]=a*s,t},e.fromRotation=function(t,e){let n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t},e.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},e.LDU=function(t,e,n,r){return t[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-t[2]*n[1],[t,e,n]},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},e.subtract=i,e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},e.equals=function(t,e){let n=t[0],r=t[1],i=t[2],a=t[3],u=e[0],s=e[1],f=e[2],c=e[3];return Math.abs(n-u)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(r-s)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-f)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(a-c)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))},e.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},e.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t};var o=n(1);const a=r;e.mul=a;const u=i;e.sub=u},function(t,e,n){"use strict";function r(t,e,n){let r=e[0],i=e[1],o=e[2],a=e[3],u=e[4],s=e[5],f=n[0],c=n[1],l=n[2],h=n[3],d=n[4],p=n[5];return t[0]=r*f+o*c,t[1]=i*f+a*c,t[2]=r*l+o*h,t[3]=i*l+a*h,t[4]=r*d+o*p+u,t[5]=i*d+a*p+s,t}function i(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t}Object.defineProperty(e,"__esModule",{value:!0}),e.create=function(){let t=new o.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},e.clone=function(t){let e=new o.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},e.fromValues=function(t,e,n,r,i,a){let u=new o.ARRAY_TYPE(6);return u[0]=t,u[1]=e,u[2]=n,u[3]=r,u[4]=i,u[5]=a,u},e.set=function(t,e,n,r,i,o,a){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t},e.invert=function(t,e){let n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],u=e[5],s=n*o-r*i;return s?(s=1/s,t[0]=o*s,t[1]=-r*s,t[2]=-i*s,t[3]=n*s,t[4]=(i*u-o*a)*s,t[5]=(r*a-n*u)*s,t):null},e.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},e.multiply=r,e.rotate=function(t,e,n){let r=e[0],i=e[1],o=e[2],a=e[3],u=e[4],s=e[5],f=Math.sin(n),c=Math.cos(n);return t[0]=r*c+o*f,t[1]=i*c+a*f,t[2]=r*-f+o*c,t[3]=i*-f+a*c,t[4]=u,t[5]=s,t},e.scale=function(t,e,n){let r=e[0],i=e[1],o=e[2],a=e[3],u=e[4],s=e[5],f=n[0],c=n[1];return t[0]=r*f,t[1]=i*f,t[2]=o*c,t[3]=a*c,t[4]=u,t[5]=s,t},e.translate=function(t,e,n){let r=e[0],i=e[1],o=e[2],a=e[3],u=e[4],s=e[5],f=n[0],c=n[1];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=r*f+o*c+u,t[5]=i*f+a*c+s,t},e.fromRotation=function(t,e){let n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t[4]=0,t[5]=0,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t},e.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t},e.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t},e.subtract=i,e.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t},e.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]},e.equals=function(t,e){let n=t[0],r=t[1],i=t[2],a=t[3],u=t[4],s=t[5],f=e[0],c=e[1],l=e[2],h=e[3],d=e[4],p=e[5];return Math.abs(n-f)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(r-c)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(i-l)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(a-h)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(u-d)<=o.EPSILON*Math.max(1,Math.abs(u),Math.abs(d))&&Math.abs(s-p)<=o.EPSILON*Math.max(1,Math.abs(s),Math.abs(p))};var o=n(1);const a=r;e.mul=a;const u=i;e.sub=u},function(t,e,n){"use strict";function r(t,e,n){let r=e[0],i=e[1],o=e[2],a=e[3],u=e[4],s=e[5],f=e[6],c=e[7],l=e[8],h=e[9],d=e[10],p=e[11],y=e[12],b=e[13],v=e[14],m=e[15],g=n[0],_=n[1],x=n[2],M=n[3];return t[0]=g*r+_*u+x*l+M*y,t[1]=g*i+_*s+x*h+M*b,t[2]=g*o+_*f+x*d+M*v,t[3]=g*a+_*c+x*p+M*m,g=n[4],_=n[5],x=n[6],M=n[7],t[4]=g*r+_*u+x*l+M*y,t[5]=g*i+_*s+x*h+M*b,t[6]=g*o+_*f+x*d+M*v,t[7]=g*a+_*c+x*p+M*m,g=n[8],_=n[9],x=n[10],M=n[11],t[8]=g*r+_*u+x*l+M*y,t[9]=g*i+_*s+x*h+M*b,t[10]=g*o+_*f+x*d+M*v,t[11]=g*a+_*c+x*p+M*m,g=n[12],_=n[13],x=n[14],M=n[15],t[12]=g*r+_*u+x*l+M*y,t[13]=g*i+_*s+x*h+M*b,t[14]=g*o+_*f+x*d+M*v,t[15]=g*a+_*c+x*p+M*m,t}function i(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}Object.defineProperty(e,"__esModule",{value:!0}),e.create=function(){let t=new o.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.clone=function(t){let e=new o.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.fromValues=function(t,e,n,r,i,a,u,s,f,c,l,h,d,p,y,b){let v=new o.ARRAY_TYPE(16);return v[0]=t,v[1]=e,v[2]=n,v[3]=r,v[4]=i,v[5]=a,v[6]=u,v[7]=s,v[8]=f,v[9]=c,v[10]=l,v[11]=h,v[12]=d,v[13]=p,v[14]=y,v[15]=b,v},e.set=function(t,e,n,r,i,o,a,u,s,f,c,l,h,d,p,y,b){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t[6]=u,t[7]=s,t[8]=f,t[9]=c,t[10]=l,t[11]=h,t[12]=d,t[13]=p,t[14]=y,t[15]=b,t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.transpose=function(t,e){if(t===e){let n=e[1],r=e[2],i=e[3],o=e[6],a=e[7],u=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=i,t[13]=a,t[14]=u}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},e.invert=function(t,e){let n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],u=e[5],s=e[6],f=e[7],c=e[8],l=e[9],h=e[10],d=e[11],p=e[12],y=e[13],b=e[14],v=e[15],m=n*u-r*a,g=n*s-i*a,_=n*f-o*a,x=r*s-i*u,M=r*f-o*u,w=i*f-o*s,A=c*y-l*p,E=c*b-h*p,T=c*v-d*p,O=l*b-h*y,R=l*v-d*y,S=h*v-d*b,P=m*S-g*R+_*O+x*T-M*E+w*A;return P?(P=1/P,t[0]=(u*S-s*R+f*O)*P,t[1]=(i*R-r*S-o*O)*P,t[2]=(y*w-b*M+v*x)*P,t[3]=(h*M-l*w-d*x)*P,t[4]=(s*T-a*S-f*E)*P,t[5]=(n*S-i*T+o*E)*P,t[6]=(b*_-p*w-v*g)*P,t[7]=(c*w-h*_+d*g)*P,t[8]=(a*R-u*T+f*A)*P,t[9]=(r*T-n*R-o*A)*P,t[10]=(p*M-y*_+v*m)*P,t[11]=(l*_-c*M-d*m)*P,t[12]=(u*E-a*O-s*A)*P,t[13]=(n*O-r*E+i*A)*P,t[14]=(y*g-p*x-b*m)*P,t[15]=(c*x-l*g+h*m)*P,t):null},e.adjoint=function(t,e){let n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],u=e[5],s=e[6],f=e[7],c=e[8],l=e[9],h=e[10],d=e[11],p=e[12],y=e[13],b=e[14],v=e[15];return t[0]=u*(h*v-d*b)-l*(s*v-f*b)+y*(s*d-f*h),t[1]=-(r*(h*v-d*b)-l*(i*v-o*b)+y*(i*d-o*h)),t[2]=r*(s*v-f*b)-u*(i*v-o*b)+y*(i*f-o*s),t[3]=-(r*(s*d-f*h)-u*(i*d-o*h)+l*(i*f-o*s)),t[4]=-(a*(h*v-d*b)-c*(s*v-f*b)+p*(s*d-f*h)),t[5]=n*(h*v-d*b)-c*(i*v-o*b)+p*(i*d-o*h),t[6]=-(n*(s*v-f*b)-a*(i*v-o*b)+p*(i*f-o*s)),t[7]=n*(s*d-f*h)-a*(i*d-o*h)+c*(i*f-o*s),t[8]=a*(l*v-d*y)-c*(u*v-f*y)+p*(u*d-f*l),t[9]=-(n*(l*v-d*y)-c*(r*v-o*y)+p*(r*d-o*l)),t[10]=n*(u*v-f*y)-a*(r*v-o*y)+p*(r*f-o*u),t[11]=-(n*(u*d-f*l)-a*(r*d-o*l)+c*(r*f-o*u)),t[12]=-(a*(l*b-h*y)-c*(u*b-s*y)+p*(u*h-s*l)),t[13]=n*(l*b-h*y)-c*(r*b-i*y)+p*(r*h-i*l),t[14]=-(n*(u*b-s*y)-a*(r*b-i*y)+p*(r*s-i*u)),t[15]=n*(u*h-s*l)-a*(r*h-i*l)+c*(r*s-i*u),t},e.determinant=function(t){let e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],u=t[6],s=t[7],f=t[8],c=t[9],l=t[10],h=t[11],d=t[12],p=t[13],y=t[14],b=t[15];return(e*a-n*o)*(l*b-h*y)-(e*u-r*o)*(c*b-h*p)+(e*s-i*o)*(c*y-l*p)+(n*u-r*a)*(f*b-h*d)-(n*s-i*a)*(f*y-l*d)+(r*s-i*u)*(f*p-c*d)},e.multiply=r,e.translate=function(t,e,n){let r,i,o,a,u,s,f,c,l,h,d,p,y=n[0],b=n[1],v=n[2];return e===t?(t[12]=e[0]*y+e[4]*b+e[8]*v+e[12],t[13]=e[1]*y+e[5]*b+e[9]*v+e[13],t[14]=e[2]*y+e[6]*b+e[10]*v+e[14],t[15]=e[3]*y+e[7]*b+e[11]*v+e[15]):(r=e[0],i=e[1],o=e[2],a=e[3],u=e[4],s=e[5],f=e[6],c=e[7],l=e[8],h=e[9],d=e[10],p=e[11],t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=u,t[5]=s,t[6]=f,t[7]=c,t[8]=l,t[9]=h,t[10]=d,t[11]=p,t[12]=r*y+u*b+l*v+e[12],t[13]=i*y+s*b+h*v+e[13],t[14]=o*y+f*b+d*v+e[14],t[15]=a*y+c*b+p*v+e[15]),t},e.scale=function(t,e,n){let r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.rotate=function(t,e,n,r){let i,a,u,s,f,c,l,h,d,p,y,b,v,m,g,_,x,M,w,A,E,T,O,R,S=r[0],P=r[1],C=r[2],I=Math.sqrt(S*S+P*P+C*C);return Math.abs(I)<o.EPSILON?null:(I=1/I,S*=I,P*=I,C*=I,i=Math.sin(n),a=Math.cos(n),u=1-a,s=e[0],f=e[1],c=e[2],l=e[3],h=e[4],d=e[5],p=e[6],y=e[7],b=e[8],v=e[9],m=e[10],g=e[11],_=S*S*u+a,x=P*S*u+C*i,M=C*S*u-P*i,w=S*P*u-C*i,A=P*P*u+a,E=C*P*u+S*i,T=S*C*u+P*i,O=P*C*u-S*i,R=C*C*u+a,t[0]=s*_+h*x+b*M,t[1]=f*_+d*x+v*M,t[2]=c*_+p*x+m*M,t[3]=l*_+y*x+g*M,t[4]=s*w+h*A+b*E,t[5]=f*w+d*A+v*E,t[6]=c*w+p*A+m*E,t[7]=l*w+y*A+g*E,t[8]=s*T+h*O+b*R,t[9]=f*T+d*O+v*R,t[10]=c*T+p*O+m*R,t[11]=l*T+y*O+g*R,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},e.rotateX=function(t,e,n){let r=Math.sin(n),i=Math.cos(n),o=e[4],a=e[5],u=e[6],s=e[7],f=e[8],c=e[9],l=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+f*r,t[5]=a*i+c*r,t[6]=u*i+l*r,t[7]=s*i+h*r,t[8]=f*i-o*r,t[9]=c*i-a*r,t[10]=l*i-u*r,t[11]=h*i-s*r,t},e.rotateY=function(t,e,n){let r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],u=e[2],s=e[3],f=e[8],c=e[9],l=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-f*r,t[1]=a*i-c*r,t[2]=u*i-l*r,t[3]=s*i-h*r,t[8]=o*r+f*i,t[9]=a*r+c*i,t[10]=u*r+l*i,t[11]=s*r+h*i,t},e.rotateZ=function(t,e,n){let r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],u=e[2],s=e[3],f=e[4],c=e[5],l=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+f*r,t[1]=a*i+c*r,t[2]=u*i+l*r,t[3]=s*i+h*r,t[4]=f*i-o*r,t[5]=c*i-a*r,t[6]=l*i-u*r,t[7]=h*i-s*r,t},e.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromRotation=function(t,e,n){let r,i,a,u=n[0],s=n[1],f=n[2],c=Math.sqrt(u*u+s*s+f*f);return Math.abs(c)<o.EPSILON?null:(c=1/c,u*=c,s*=c,f*=c,r=Math.sin(e),i=Math.cos(e),a=1-i,t[0]=u*u*a+i,t[1]=s*u*a+f*r,t[2]=f*u*a-s*r,t[3]=0,t[4]=u*s*a-f*r,t[5]=s*s*a+i,t[6]=f*s*a+u*r,t[7]=0,t[8]=u*f*a+s*r,t[9]=s*f*a-u*r,t[10]=f*f*a+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},e.fromXRotation=function(t,e){let n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromYRotation=function(t,e){let n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromZRotation=function(t,e){let n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromRotationTranslation=function(t,e,n){let r=e[0],i=e[1],o=e[2],a=e[3],u=r+r,s=i+i,f=o+o,c=r*u,l=r*s,h=r*f,d=i*s,p=i*f,y=o*f,b=a*u,v=a*s,m=a*f;return t[0]=1-(d+y),t[1]=l+m,t[2]=h-v,t[3]=0,t[4]=l-m,t[5]=1-(c+y),t[6]=p+b,t[7]=0,t[8]=h+v,t[9]=p-b,t[10]=1-(c+d),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},e.getTranslation=function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},e.getScaling=function(t,e){let n=e[0],r=e[1],i=e[2],o=e[4],a=e[5],u=e[6],s=e[8],f=e[9],c=e[10];return t[0]=Math.sqrt(n*n+r*r+i*i),t[1]=Math.sqrt(o*o+a*a+u*u),t[2]=Math.sqrt(s*s+f*f+c*c),t},e.getRotation=function(t,e){let n=e[0]+e[5]+e[10],r=0;return n>0?(r=2*Math.sqrt(n+1),t[3]=.25*r,t[0]=(e[6]-e[9])/r,t[1]=(e[8]-e[2])/r,t[2]=(e[1]-e[4])/r):e[0]>e[5]&e[0]>e[10]?(r=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/r,t[0]=.25*r,t[1]=(e[1]+e[4])/r,t[2]=(e[8]+e[2])/r):e[5]>e[10]?(r=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/r,t[0]=(e[1]+e[4])/r,t[1]=.25*r,t[2]=(e[6]+e[9])/r):(r=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/r,t[0]=(e[8]+e[2])/r,t[1]=(e[6]+e[9])/r,t[2]=.25*r),t},e.fromRotationTranslationScale=function(t,e,n,r){let i=e[0],o=e[1],a=e[2],u=e[3],s=i+i,f=o+o,c=a+a,l=i*s,h=i*f,d=i*c,p=o*f,y=o*c,b=a*c,v=u*s,m=u*f,g=u*c,_=r[0],x=r[1],M=r[2];return t[0]=(1-(p+b))*_,t[1]=(h+g)*_,t[2]=(d-m)*_,t[3]=0,t[4]=(h-g)*x,t[5]=(1-(l+b))*x,t[6]=(y+v)*x,t[7]=0,t[8]=(d+m)*M,t[9]=(y-v)*M,t[10]=(1-(l+p))*M,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},e.fromRotationTranslationScaleOrigin=function(t,e,n,r,i){let o=e[0],a=e[1],u=e[2],s=e[3],f=o+o,c=a+a,l=u+u,h=o*f,d=o*c,p=o*l,y=a*c,b=a*l,v=u*l,m=s*f,g=s*c,_=s*l,x=r[0],M=r[1],w=r[2],A=i[0],E=i[1],T=i[2];return t[0]=(1-(y+v))*x,t[1]=(d+_)*x,t[2]=(p-g)*x,t[3]=0,t[4]=(d-_)*M,t[5]=(1-(h+v))*M,t[6]=(b+m)*M,t[7]=0,t[8]=(p+g)*w,t[9]=(b-m)*w,t[10]=(1-(h+y))*w,t[11]=0,t[12]=n[0]+A-(t[0]*A+t[4]*E+t[8]*T),t[13]=n[1]+E-(t[1]*A+t[5]*E+t[9]*T),t[14]=n[2]+T-(t[2]*A+t[6]*E+t[10]*T),t[15]=1,t},e.fromQuat=function(t,e){let n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,u=r+r,s=i+i,f=n*a,c=r*a,l=r*u,h=i*a,d=i*u,p=i*s,y=o*a,b=o*u,v=o*s;return t[0]=1-l-p,t[1]=c+v,t[2]=h-b,t[3]=0,t[4]=c-v,t[5]=1-f-p,t[6]=d+y,t[7]=0,t[8]=h+b,t[9]=d-y,t[10]=1-f-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.frustum=function(t,e,n,r,i,o,a){let u=1/(n-e),s=1/(i-r),f=1/(o-a);return t[0]=2*o*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*s,t[6]=0,t[7]=0,t[8]=(n+e)*u,t[9]=(i+r)*s,t[10]=(a+o)*f,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*f,t[15]=0,t},e.perspective=function(t,e,n,r,i){let o=1/Math.tan(e/2),a=1/(r-i);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+r)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*r*a,t[15]=0,t},e.perspectiveFromFieldOfView=function(t,e,n,r){let i=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),u=Math.tan(e.rightDegrees*Math.PI/180),s=2/(a+u),f=2/(i+o);return t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=f,t[6]=0,t[7]=0,t[8]=-(a-u)*s*.5,t[9]=(i-o)*f*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t},e.ortho=function(t,e,n,r,i,o,a){let u=1/(e-n),s=1/(r-i),f=1/(o-a);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*f,t[11]=0,t[12]=(e+n)*u,t[13]=(i+r)*s,t[14]=(a+o)*f,t[15]=1,t},e.lookAt=function(t,e,n,r){let i,a,u,s,f,c,l,h,d,p,y=e[0],b=e[1],v=e[2],m=r[0],g=r[1],_=r[2],x=n[0],M=n[1],w=n[2];return Math.abs(y-x)<o.EPSILON&&Math.abs(b-M)<o.EPSILON&&Math.abs(v-w)<o.EPSILON?mat4.identity(t):(l=y-x,h=b-M,d=v-w,p=1/Math.sqrt(l*l+h*h+d*d),l*=p,h*=p,d*=p,i=g*d-_*h,a=_*l-m*d,u=m*h-g*l,(p=Math.sqrt(i*i+a*a+u*u))?(i*=p=1/p,a*=p,u*=p):(i=0,a=0,u=0),s=h*u-d*a,f=d*i-l*u,c=l*a-h*i,(p=Math.sqrt(s*s+f*f+c*c))?(s*=p=1/p,f*=p,c*=p):(s=0,f=0,c=0),t[0]=i,t[1]=s,t[2]=l,t[3]=0,t[4]=a,t[5]=f,t[6]=h,t[7]=0,t[8]=u,t[9]=c,t[10]=d,t[11]=0,t[12]=-(i*y+a*b+u*v),t[13]=-(s*y+f*b+c*v),t[14]=-(l*y+h*b+d*v),t[15]=1,t)},e.targetTo=function(t,e,n,r){let i=e[0],o=e[1],a=e[2],u=r[0],s=r[1],f=r[2],c=i-n[0],l=o-n[1],h=a-n[2],d=c*c+l*l+h*h;d>0&&(c*=d=1/Math.sqrt(d),l*=d,h*=d);let p=s*h-f*l,y=f*c-u*h,b=u*l-s*c;return t[0]=p,t[1]=y,t[2]=b,t[3]=0,t[4]=l*b-h*y,t[5]=h*p-c*b,t[6]=c*y-l*p,t[7]=0,t[8]=c,t[9]=l,t[10]=h,t[11]=0,t[12]=i,t[13]=o,t[14]=a,t[15]=1,t},e.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t},e.subtract=i,e.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t},e.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},e.equals=function(t,e){let n=t[0],r=t[1],i=t[2],a=t[3],u=t[4],s=t[5],f=t[6],c=t[7],l=t[8],h=t[9],d=t[10],p=t[11],y=t[12],b=t[13],v=t[14],m=t[15],g=e[0],_=e[1],x=e[2],M=e[3],w=e[4],A=e[5],E=e[6],T=e[7],O=e[8],R=e[9],S=e[10],P=e[11],C=e[12],I=e[13],L=e[14],N=e[15];return Math.abs(n-g)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(r-_)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(_))&&Math.abs(i-x)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(a-M)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(u-w)<=o.EPSILON*Math.max(1,Math.abs(u),Math.abs(w))&&Math.abs(s-A)<=o.EPSILON*Math.max(1,Math.abs(s),Math.abs(A))&&Math.abs(f-E)<=o.EPSILON*Math.max(1,Math.abs(f),Math.abs(E))&&Math.abs(c-T)<=o.EPSILON*Math.max(1,Math.abs(c),Math.abs(T))&&Math.abs(l-O)<=o.EPSILON*Math.max(1,Math.abs(l),Math.abs(O))&&Math.abs(h-R)<=o.EPSILON*Math.max(1,Math.abs(h),Math.abs(R))&&Math.abs(d-S)<=o.EPSILON*Math.max(1,Math.abs(d),Math.abs(S))&&Math.abs(p-P)<=o.EPSILON*Math.max(1,Math.abs(p),Math.abs(P))&&Math.abs(y-C)<=o.EPSILON*Math.max(1,Math.abs(y),Math.abs(C))&&Math.abs(b-I)<=o.EPSILON*Math.max(1,Math.abs(b),Math.abs(I))&&Math.abs(v-L)<=o.EPSILON*Math.max(1,Math.abs(v),Math.abs(L))&&Math.abs(m-N)<=o.EPSILON*Math.max(1,Math.abs(m),Math.abs(N))};var o=n(1);const a=r;e.mul=a;const u=i;e.sub=u},function(t,e,n){"use strict";function r(){let t=new s.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function i(t,e,n){n*=.5;let r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function o(t,e,n){let r=e[0],i=e[1],o=e[2],a=e[3],u=n[0],s=n[1],f=n[2],c=n[3];return t[0]=r*c+a*u+i*f-o*s,t[1]=i*c+a*s+o*u-r*f,t[2]=o*c+a*f+r*s-i*u,t[3]=a*c-r*u-i*s-o*f,t}function a(t,e,n,r){let i,o,a,u,s,f=e[0],c=e[1],l=e[2],h=e[3],d=n[0],p=n[1],y=n[2],b=n[3];return(o=f*d+c*p+l*y+h*b)<0&&(o=-o,d=-d,p=-p,y=-y,b=-b),1-o>1e-6?(i=Math.acos(o),a=Math.sin(i),u=Math.sin((1-r)*i)/a,s=Math.sin(r*i)/a):(u=1-r,s=r),t[0]=u*f+s*d,t[1]=u*c+s*p,t[2]=u*l+s*y,t[3]=u*h+s*b,t}function u(t,e){let n,r=e[0]+e[4]+e[8];if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{let r=0;e[4]>e[0]&&(r=1),e[8]>e[3*r+r]&&(r=2);let i=(r+1)%3,o=(r+2)%3;n=Math.sqrt(e[3*r+r]-e[3*i+i]-e[3*o+o]+1),t[r]=.5*n,n=.5/n,t[3]=(e[3*i+o]-e[3*o+i])*n,t[i]=(e[3*i+r]+e[3*r+i])*n,t[o]=(e[3*o+r]+e[3*r+o])*n}return t}Object.defineProperty(e,"__esModule",{value:!0}),e.create=r,e.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},e.setAxisAngle=i,e.getAxisAngle=function(t,e){let n=2*Math.acos(e[3]),r=Math.sin(n/2);return 0!=r?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n},e.multiply=o,e.rotateX=function(t,e,n){n*=.5;let r=e[0],i=e[1],o=e[2],a=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=r*s+a*u,t[1]=i*s+o*u,t[2]=o*s-i*u,t[3]=a*s-r*u,t},e.rotateY=function(t,e,n){n*=.5;let r=e[0],i=e[1],o=e[2],a=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=r*s-o*u,t[1]=i*s+a*u,t[2]=o*s+r*u,t[3]=a*s-i*u,t},e.rotateZ=function(t,e,n){n*=.5;let r=e[0],i=e[1],o=e[2],a=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=r*s+i*u,t[1]=i*s-r*u,t[2]=o*s+a*u,t[3]=a*s-o*u,t},e.calculateW=function(t,e){let n=e[0],r=e[1],i=e[2];return t[0]=n,t[1]=r,t[2]=i,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),t},e.slerp=a,e.invert=function(t,e){let n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o,u=a?1/a:0;return t[0]=-n*u,t[1]=-r*u,t[2]=-i*u,t[3]=o*u,t},e.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},e.fromMat3=u,e.fromEuler=function(t,e,n,r){let i=.5*Math.PI/180;e*=i,n*=i,r*=i;let o=Math.sin(e),a=Math.cos(e),u=Math.sin(n),s=Math.cos(n),f=Math.sin(r),c=Math.cos(r);return t[0]=o*s*c-a*u*f,t[1]=a*u*c+o*s*f,t[2]=a*s*f-o*u*c,t[3]=a*s*c+o*u*f,t},e.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"};var s=n(1),f=n(50),c=n(51),l=n(52);const h=l.clone;e.clone=h;const d=l.fromValues;e.fromValues=d;const p=l.copy;e.copy=p;const y=l.set;e.set=y;const b=l.add;e.add=b;const v=o;e.mul=v;const m=l.scale;e.scale=m;const g=l.dot;e.dot=g;const _=l.lerp;e.lerp=_;const x=l.length;e.length=x;const M=x;e.len=M;const w=l.squaredLength;e.squaredLength=w;const A=w;e.sqrLen=A;const E=l.normalize;e.normalize=E;const T=l.exactEquals;e.exactEquals=T;const O=l.equals;e.equals=O;const R=function(){let t=c.create(),e=c.fromValues(1,0,0),n=c.fromValues(0,1,0);return function(r,o,a){let u=c.dot(o,a);return u<-.999999?(c.cross(t,e,o),c.len(t)<1e-6&&c.cross(t,n,o),c.normalize(t,t),i(r,t,Math.PI),r):u>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(c.cross(t,o,a),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+u,E(r,r))}}();e.rotationTo=R;const S=function(){let t=r(),e=r();return function(n,r,i,o,u,s){return a(t,r,u,s),a(e,i,o,s),a(n,t,e,2*s*(1-s)),n}}();e.sqlerp=S;const P=function(){let t=f.create();return function(e,n,r,i){return t[0]=r[0],t[3]=r[1],t[6]=r[2],t[1]=i[0],t[4]=i[1],t[7]=i[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],E(e,u(e,t))}}();e.setAxes=P},function(t,e,n){"use strict";function r(){let t=new l.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t}function i(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function o(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function a(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function u(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)}function s(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function f(t){var e=t[0],n=t[1];return Math.sqrt(e*e+n*n)}function c(t){var e=t[0],n=t[1];return e*e+n*n}Object.defineProperty(e,"__esModule",{value:!0}),e.create=r,e.clone=function(t){let e=new l.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},e.fromValues=function(t,e){let n=new l.ARRAY_TYPE(2);return n[0]=t,n[1]=e,n},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},e.set=function(t,e,n){return t[0]=e,t[1]=n,t},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t},e.subtract=i,e.multiply=o,e.divide=a,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},e.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t},e.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},e.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t},e.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t},e.distance=u,e.squaredDistance=s,e.length=f,e.squaredLength=c,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},e.normalize=function(t,e){var n=e[0],r=e[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i),t[0]=e[0]*i,t[1]=e[1]*i),t},e.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},e.cross=function(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t},e.lerp=function(t,e,n,r){var i=e[0],o=e[1];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t},e.random=function(t,e){e=e||1;var n=2*l.RANDOM()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t},e.transformMat2=function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t},e.transformMat2d=function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i+n[4],t[1]=n[1]*r+n[3]*i+n[5],t},e.transformMat3=function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[3]*i+n[6],t[1]=n[1]*r+n[4]*i+n[7],t},e.transformMat4=function(t,e,n){let r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t},e.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]},e.equals=function(t,e){let n=t[0],r=t[1],i=e[0],o=e[1];return Math.abs(n-i)<=l.EPSILON*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-o)<=l.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))};var l=n(1);const h=f;e.len=h;const d=i;e.sub=d;const p=o;e.mul=p;const y=a;e.div=y;const b=u;e.dist=b;const v=s;e.sqrDist=v;const m=c;e.sqrLen=m;const g=function(){let t=r();return function(e,n,r,i,o,a){let u,s;for(n||(n=2),r||(r=0),s=i?Math.min(i*n+r,e.length):e.length,u=r;u<s;u+=n)t[0]=e[u],t[1]=e[u+1],o(t,t,a),e[u]=t[0],e[u+1]=t[1];return e}}();e.forEach=g},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){switch(e){case a.default.TYPE.UNIFORM:return t.uniform;case a.default.TYPE.ATTRIB:return t.attrib;case a.default.TYPE.TEXTURE_2D:return t.tex2d}}function o(t,e,n){var r=i(t,e),o=r.get(n);return o||(o=[],r.set(n,o)),o}e.__esModule=!0;var a=r(n(5)),u=r(n(13)),s=r(n(0)),f=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.uniform=new Map,this.attrib=new Map,this.tex2d=new Map}return t.prototype.clear=function(){this.uniform.clear(),this.attrib.clear(),this.tex2d.clear()},t.prototype.destroy=function(){this.clear(),(0,s.default)(this)},t.prototype.pushVar=function(t){if(t instanceof u.default)t.pushVar(this);else{o(this,t.type,t.name).push(t)}},t.prototype.popVar=function(t){if(t instanceof u.default)t.popVar(this);else for(var e=o(this,t.type,t.name),n=e.length,r=0;r<n;++r)if(e[r]===t)return void(e.length=r)},t.prototype.curVar=function(t){var e=i(this,t.type).get(t.name);return e&&e.length?e[e.length-1]:null},t.prototype.curUniform=function(t){var e=this.uniform.get(t);return e&&e.length?e[e.length-1]:null},t.prototype.curAttrib=function(t){var e=this.attrib.get(t);return e&&e.length?e[e.length-1]:null},t.prototype.curTex2d=function(t){var e=this.tex2d.get(t);return e&&e.length?e[e.length-1]:null},t}();e.default=f},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=r(n(47)),a=r(n(57)),u=r(n(58)),s=r(n(60)),f=r(n(45)),c=n(124),l=function(t,e){if("function"==typeof e){var n=t.createVO();return e(n),n}return e},h=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.resourceLibrary=e,this.textureLibrary=n,this.descriptor=e.findDescriptor(r.descriptor),this.voPool=new f.default(this.descriptor,Object.assign(c(r,["capacity","usage","maxAllocVOSize","voArray"]),{voNew:l(this.descriptor,r.voNew),voZero:l(this.descriptor,r.voZero)})),this.voPoolShaderAttribs=new s.default(this.voPool),this.indices=r.indices||o.default.Generate(this.voPool.capacity,[0,1,2,0,2,3],4),this.shaderProgram=new a.default(e.findVertexShader(r.vertexShader),e.findFragmentShader(r.fragmentShader)),this.primitive=r.primitive,this.textures=Object.assign({},r.textures),this.shaderTextureGroup=null}return t.prototype.setTexture=function(t,e){this.textures[t]!==e&&(this.textures[t]=e,this.shaderTextureGroup=null)},t.prototype.loadTextureAtlas=function(t,e){return this.textures[t]=e,this.shaderTextureGroup=null,this.textureLibrary.loadTextureAtlas(e)},t.prototype.getTextureAtlas=function(t){return this.textureLibrary.getTextureAtlas(this.textures[t])},t.prototype.createSprite=function(t,e,n){var r=this.voPool.alloc(1);if(null!=t){var i=e||t.width,o=n||t.height;r.setSize(i,o),r.setTexCoordsByTexture(t)}return r},t.prototype.renderFrame=function(t){var e=this;null==this.shaderTextureGroup&&(this.shaderTextureGroup=new u.default(this.textureLibrary,this.textures)),this.shaderTextureGroup.whenLoaded(function(n){var r=t.shaderContext;r.pushVar(n),r.pushVar(e.voPoolShaderAttribs),t.useShaderProgram(e.shaderProgram),t.drawIndexed(e.primitive,e.indices)})},i(t,[{key:"capacity",get:function(){return this.voPool.capacity}},{key:"usedCount",get:function(){return this.voPool.usedCount}},{key:"availableCount",get:function(){return this.voPool.availableCount}}]),t}();e.default=h},function(t,e,n){var r=n(125),i=n(166)(function(t,e){return null==t?{}:r(t,e)});t.exports=i},function(t,e,n){var r=n(126),i=n(161);t.exports=function(t,e){return r(t,e,function(e,n){return i(t,n)})}},function(t,e,n){var r=n(127),i=n(158),o=n(14);t.exports=function(t,e,n){for(var a=-1,u=e.length,s={};++a<u;){var f=e[a],c=r(t,f);n(c,f)&&i(s,o(f,t),c)}return s}},function(t,e,n){var r=n(14),i=n(32);t.exports=function(t,e){for(var n=0,o=(e=r(e,t)).length;null!=t&&n<o;)t=t[i(e[n++])];return n&&n==o?t:void 0}},function(t,e,n){var r=n(4),i=n(25),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;t.exports=function(t,e){if(r(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!i(t))||a.test(t)||!o.test(t)||null!=e&&t in Object(e)}},function(t,e,n){var r=/^\./,i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,a=n(130)(function(t){var e=[];return r.test(t)&&e.push(""),t.replace(i,function(t,n,r,i){e.push(r?i.replace(o,"$1"):n||t)}),e});t.exports=a},function(t,e,n){var r=n(131),i=500;t.exports=function(t){var e=r(t,function(t){return n.size===i&&n.clear(),t}),n=e.cache;return e}},function(t,e,n){function r(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(o);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(r.Cache||i),n}var i=n(132),o="Expected a function";r.Cache=i,t.exports=r},function(t,e,n){function r(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}var i=n(133),o=n(153),a=n(155),u=n(156),s=n(157);r.prototype.clear=i,r.prototype.delete=o,r.prototype.get=a,r.prototype.has=u,r.prototype.set=s,t.exports=r},function(t,e,n){var r=n(134),i=n(146),o=n(152);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},function(t,e,n){function r(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}var i=n(135),o=n(142),a=n(143),u=n(144),s=n(145);r.prototype.clear=i,r.prototype.delete=o,r.prototype.get=a,r.prototype.has=u,r.prototype.set=s,t.exports=r},function(t,e,n){var r=n(15);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(t,e,n){var r=n(137),i=n(138),o=n(31),a=n(140),u=/^\[object .+?Constructor\]$/,s=Function.prototype,f=Object.prototype,c=s.toString,l=f.hasOwnProperty,h=RegExp("^"+c.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!o(t)||i(t))&&(r(t)?h:u).test(a(t))}},function(t,e,n){var r=n(26),i=n(31),o="[object AsyncFunction]",a="[object Function]",u="[object GeneratorFunction]",s="[object Proxy]";t.exports=function(t){if(!i(t))return!1;var e=r(t);return e==a||e==u||e==o||e==s}},function(t,e,n){var r=n(139),i=function(){var t=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();t.exports=function(t){return!!i&&i in t}},function(t,e,n){var r=n(24)["__core-js_shared__"];t.exports=r},function(t,e){var n=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return n.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},function(t,e,n){var r=n(15),i="__lodash_hash_undefined__",o=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(r){var n=e[t];return n===i?void 0:n}return o.call(e,t)?e[t]:void 0}},function(t,e,n){var r=n(15),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:i.call(e,t)}},function(t,e,n){var r=n(15),i="__lodash_hash_undefined__";t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?i:e,this}},function(t,e,n){function r(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}var i=n(147),o=n(148),a=n(149),u=n(150),s=n(151);r.prototype.clear=i,r.prototype.delete=o,r.prototype.get=a,r.prototype.has=u,r.prototype.set=s,t.exports=r},function(t,e){t.exports=function(){this.__data__=[],this.size=0}},function(t,e,n){var r=n(16),i=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0||(n==e.length-1?e.pop():i.call(e,n,1),--this.size,0))}},function(t,e,n){var r=n(16);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},function(t,e,n){var r=n(16);t.exports=function(t){return r(this.__data__,t)>-1}},function(t,e,n){var r=n(16);t.exports=function(t,e){var n=this.__data__,i=r(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}},function(t,e,n){var r=n(30)(n(24),"Map");t.exports=r},function(t,e,n){var r=n(17);t.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},function(t,e){t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},function(t,e,n){var r=n(17);t.exports=function(t){return r(this,t).get(t)}},function(t,e,n){var r=n(17);t.exports=function(t){return r(this,t).has(t)}},function(t,e,n){var r=n(17);t.exports=function(t,e){var n=r(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}},function(t,e,n){var r=n(159),i=n(14),o=n(63),a=n(31),u=n(32);t.exports=function(t,e,n,s){if(!a(t))return t;for(var f=-1,c=(e=i(e,t)).length,l=c-1,h=t;null!=h&&++f<c;){var d=u(e[f]),p=n;if(f!=l){var y=h[d];void 0===(p=s?s(y,d,h):void 0)&&(p=a(y)?y:o(e[f+1])?[]:{})}r(h,d,p),h=h[d]}return t}},function(t,e,n){var r=n(160),i=n(61),o=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var a=t[e];o.call(t,e)&&i(a,n)&&(void 0!==n||e in t)||r(t,e,n)}},function(t,e,n){var r=n(62);t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},function(t,e,n){var r=n(162),i=n(163);t.exports=function(t,e){return null!=t&&i(t,e,r)}},function(t,e){t.exports=function(t,e){return null!=t&&e in Object(t)}},function(t,e,n){var r=n(14),i=n(64),o=n(4),a=n(63),u=n(165),s=n(32);t.exports=function(t,e,n){for(var f=-1,c=(e=r(e,t)).length,l=!1;++f<c;){var h=s(e[f]);if(!(l=null!=t&&n(t,h)))break;t=t[h]}return l||++f!=c?l:!!(c=null==t?0:t.length)&&u(c)&&a(h,c)&&(o(t)||i(t))}},function(t,e,n){var r=n(26),i=n(27),o="[object Arguments]";t.exports=function(t){return i(t)&&r(t)==o}},function(t,e){var n=9007199254740991;t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=n}},function(t,e,n){var r=n(167),i=n(171),o=n(173);t.exports=function(t){return o(i(t,void 0,r),t+"")}},function(t,e,n){var r=n(168);t.exports=function(t){return(null==t?0:t.length)?r(t,1):[]}},function(t,e,n){function r(t,e,n,a,u){var s=-1,f=t.length;for(n||(n=o),u||(u=[]);++s<f;){var c=t[s];e>0&&n(c)?e>1?r(c,e-1,n,a,u):i(u,c):a||(u[u.length]=c)}return u}var i=n(169),o=n(170);t.exports=r},function(t,e){t.exports=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}},function(t,e,n){var r=n(12),i=n(64),o=n(4),a=r?r.isConcatSpreadable:void 0;t.exports=function(t){return o(t)||i(t)||!!(a&&t&&t[a])}},function(t,e,n){var r=n(172),i=Math.max;t.exports=function(t,e,n){return e=i(void 0===e?t.length-1:e,0),function(){for(var o=arguments,a=-1,u=i(o.length-e,0),s=Array(u);++a<u;)s[a]=o[e+a];a=-1;for(var f=Array(e+1);++a<e;)f[a]=o[a];return f[e]=n(s),r(t,this,f)}}},function(t,e){t.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},function(t,e,n){var r=n(174),i=n(177)(r);t.exports=i},function(t,e,n){var r=n(175),i=n(62),o=n(176),a=i?function(t,e){return i(t,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:o;t.exports=a},function(t,e){t.exports=function(t){return function(){return t}}},function(t,e){t.exports=function(t){return t}},function(t,e){var n=800,r=16,i=Date.now;t.exports=function(t){var e=0,o=0;return function(){var a=i(),u=r-(a-o);if(o=a,u>0){if(++e>=n)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}},function(t,e,n){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(t){return t<0?0:t},o=function(t){function e(n,r,o,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var u=parseInt(n,10),s=parseInt(r,10);return function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,u,i(u+parseInt(o,10)-1),s,i(s+parseInt(a,10)-1)))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"x",get:function(){return this.minX},set:function(t){var e=this.width;this.minX=t,this.maxX=i(t+e-1)}},{key:"y",get:function(){return this.minY},set:function(t){var e=this.height;this.minY=t,this.maxY=i(t+e-1)}},{key:"width",get:function(){return i(this.maxX-this.minX+1)},set:function(t){this.maxX=i(this.minX+t-1)}},{key:"height",get:function(){return i(this.maxY-this.minY+1)},set:function(t){this.maxY=i(this.minY+t-1)}}]),e}(function(t){return t&&t.__esModule?t:{default:t}}(n(46)).default);e.default=o},function(t,e,n){"use strict";e.__esModule=!0;var r=n(34),i=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],t.glx.gl),i=e?r.COLOR_BUFFER_BIT:0;return n&&t.hasDepthBits&&(i|=r.DEPTH_BUFFER_BIT),n&&t.hasStencilBits&&(i|=r.STENCIL_BUFFER_BIT),i},o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.glx=e,this.hasDepthBits=e.DEPTH_BUFFER_BIT>0,this.hasStencilBits=e.STENCIL_BUFFER_BIT>0,this.reset()}return t.prototype.reset=function(){this.clearColor=null,this.clearDepth=1,this.clearStencil=0,this.clearMask=0},t.prototype.setClearColor=function(t){this.clearColor=t?"string"==typeof t?r(t):t:null},t.prototype.setClearMask=function(t,e,n){this.clearMask=i(this,t,e,n)},t.prototype.clear=function(){var t=this.glx.gl,e=this.clearColor;if(e){var n=e.toRgb();t.clearColor(n.r/255,n.g/255,n.b/255,n.a)}else t.clearColor(0,0,0,0);this.hasDepthBits&&t.clearDepth(this.clearDepth),this.hasStencilBits&&t.clearStencil(this.clearStencil);var r=this.clearMask||i(this,!0,!0,!0);t.clear(r)},t}();e.default=o},function(t,e,n){"use strict";function r(t){var e=t.length;if(e>=2&&t.startsWith('"')&&t.endsWith('"'))return t.substr(1,t.length-2);if(e>=2&&t.startsWith("{")&&t.endsWith("}"))return JSON.parse(t);if(e>=2&&t.startsWith("[")&&t.endsWith("]"))return JSON.parse(t);if(e>=2&&t.startsWith("'")&&t.endsWith("'"))return t.substr(1,t.length-2);if(e>0&&s.exec(t))return parseFloat(t);var n=f.exec(t);if(n)return new URL(n[1].trim());if(n=c.exec(t))return new Float32Array(n.slice(1,3).map(parseFloat));if(n=l.exec(t))return new Float32Array(n.slice(1,4).map(parseFloat));if(n=h.exec(t))return new Float32Array(n.slice(1,5).map(parseFloat));switch(t){case"null":return null;case"undefined":return;case"true":return!0;case"false":return!1;default:return t}}function i(t,e){var n=t.length,r=e;if(r>=n)return n;do{if(" "!==t[r]&&"\t"!==t[r])return r;++r}while(r<n);return n}function o(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:";",r=t.length,i=e,o=null;do{if(null===o)switch(t[i]){case n:return i;case"'":o="'",++i;break;case'"':o='"',++i;break;case"(":o=")",++i;break;case"{":o="}",++i;break;case"\\":i+=2;break;default:++i}else t[i]===o?(o=null,++i):"\\"===t[i]?i+=2:++i}while(i<r);return r}function a(t){if("string"==typeof t&&t){var e=[],n=t.length,r=i(t,0);do{var a=o(t,r,";");a>r&&e.push(t.slice(r,a)),r=i(t,a+1)}while(r<n);return e}}function u(t){var e=a(t);if(e)return e.map(function(t){if(d.exec(t))return{value:t.trim()};var e=t.indexOf(":");if(-1===e)return{value:t.trim()};return{key:t.slice(0,e).trim(),value:t.substr(e+1).trim()}}).filter(function(t){return!(""===t.key&&""===t.value)})}e.__esModule=!0;var s=/^[-+]?(\d+\.|\.)?\d+(e\d+|e[-+]\d+)?$/,f=/^url\(\s*([^)]+)\)$/,c=/^vec2\(\s*([-+\d.e]+)\s*,\s*([-+\d.e]+)\s*\)$/,l=/^vec3\(\s*([-+\d.e]+)\s*,\s*([-+\d.e]+)\s*,\s*([-+\d.e]+)\s*\)$/,h=/^vec4\(\s*([-+\d.e]+)\s*,\s*([-+\d.e]+)\s*,\s*([-+\d.e]+)\s*,\s*([-+\d.e]+)\s*\)$/,d=/^\s*[a-zA-Z]+\(\s*[^)]+\)\s*$/;e.default=function(t){if("string"!=typeof t)return t;var e=t.trim();if(e.startsWith("{")&&e.endsWith("}"))return JSON.parse(e);var n=u(e);if(n&&0!==n.length){if("key"in n[0]){var i={};return n.forEach(function(t){var e=t.key,n=t.value;i[e]=r(n)}),i}var o=n.map(function(t){return r(t.value)});return 1===o.length?o[0]:o}},e.splitIntoPropTokens=a,e.splitIntoProps=u,e.indexOfNextNonWhitespace=i,e.indexOfNextSeperator=o,e.parseValue=r},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e,n){return t&&e in t?t[e]:"function"==typeof n?n():n}},function(t,e,n){"use strict";e.__esModule=!0;var r=n(19),i=n(2),o=n(36),a=n(34),u=function(t){return t?a(t):null},s=function(t){return{color:t.indexOf("COLOR")>-1,depth:t.indexOf("DEPTH")>-1,stencil:t.indexOf("STENCIL")>-1}},f=function(t){if(!t||"string"==typeof t)return{clearColor:u(t||"rgba(0,0,0,0)"),clearDepth:1,clearStencil:0,mask:s("COLOR,DEPTH,STENCIL")};var e=r.getDefaultOption.bind(null,t);return{clearColor:u(e("color","rgba(0,0,0,0)")),clearDepth:e("depth",1),clearStencil:e("stencil",0),mask:s(e("mask","COLOR,DEPTH,STENCIL"))}},c=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Object.assign(this,f(n)),(0,i.debug)("[clear] create",this)}return t.prototype.update=function(t){Object.assign(this,f(t)),(0,i.debug)("[clear] update",this)},t.prototype.connectedEntity=function(t){this._renderFrameId=t.on("renderFrame",o.COMPONENT_PRIORITY_CLEAR,this.renderFrame.bind(this))},t.prototype.disconnectedEntity=function(t){this._renderFrameId&&t.off(this._renderFrameId)},t.prototype.renderFrame=function(t){var e=t.clearBuffer;e.clearDepth=this.clearDepth,e.clearStencil=this.clearStencil,e.setClearColor(this.clearColor);var n=this.mask,r=n.color,i=n.depth,o=n.stencil;e.setClearMask(r,i,o),e.clear()},t}();e.default=c},function(t,e,n){"use strict";e.__esModule=!0;var r=n(9),i=n(2),o=n(36),a=function(t){return"string"==typeof t?t:void 0},u=function(t){return{enable:void 0===t.enable||Boolean(t.enable),sfactor:a(t.sfactor),dfactor:a(t.dfactor)}},s=function(t){var e=t.enable,n=t.sfactor,i=t.dfactor;return new r.BlendMode(e,n,i)},f=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.blendMode=s(u(n)),(0,i.debug)("[blend] create",this)}return t.prototype.update=function(t){Object.assign(this.blendMode,u(t)),(0,i.debug)("[blend] update",this)},t.prototype.connectedEntity=function(t){this._renderFrameId=t.on("renderFrame",o.COMPONENT_PRIORITY_BLEND,this.renderFrame.bind(this)),this._postRenderFrameId=t.on("postRenderFrame",o.COMPONENT_PRIORITY_POST_BLEND,this.postRenderFrame.bind(this))},t.prototype.disconnectedEntity=function(t){this._renderFrameId&&t.off(this._renderFrameId),this._postRenderFrameId&&t.off(this._postRenderFrameId)},t.prototype.renderFrame=function(t){t.pushBlendMode(this.blendMode)},t.prototype.postRenderFrame=function(t){t.popBlendMode()},t}();e.default=f},function(t,e,n){"use strict";e.__esModule=!0;var r=n(9),i=n(2),o=n(36),a=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.projection=new r.Projection(n),(0,i.debug)("[projection] create",this)}return t.prototype.update=function(t){var e=this;t&&Object.entries(t).forEach(function(t){var n=t[0],r=t[1];e.projection[n]=r}),(0,i.debug)("[projection] udpate",this)},t.prototype.connectedEntity=function(t){this._renderFrameId=t.on("renderFrame",o.COMPONENT_PRIORITY_PROJECTION,this.renderFrame.bind(this))},t.prototype.disconnectedEntity=function(t){this._renderFrameId&&t.off(this._renderFrameId)},t.prototype.renderFrame=function(t,e){this.projection.update(e.width,e.height),t.shaderContext.pushVar(this.projection.uniform)},t}();e.default=a},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t){t.addDescriptor(i,r.description).addVertexShader(i,r.vertexShader).addFragmentShader(i,r.fragmentShader)};var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(187)),i="simple"},function(t,e,n){"use strict";e.__esModule=!0,e.description=e.fragmentShader=e.vertexShader=void 0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(188));e.vertexShader=["\n\n  attribute vec2 pos2d;\n  attribute float posZ;\n  attribute vec2 uv;\n  attribute vec2 translate;\n  attribute float rotate;\n  attribute float scale;\n  attribute float opacity;\n\n  uniform mat4 viewMatrix;\n\n  varying vec4 vTextureCoordScaleOpacity;\n\n  ",(0,r.default)("rotateZ",0,0,1),"\n\n  void main(void)\n  {\n    mat4 rotationMatrix = rotateZ(rotate);\n    gl_Position = viewMatrix * ((rotationMatrix * (vec4(scale, scale, scale, 1.0) * vec4(pos2d.xy, posZ, 1.0))) + vec4(translate.xy, 0.0, 0.0));\n    vTextureCoordScaleOpacity = vec4(uv.xy, opacity, 0.0);\n  }\n"],e.fragmentShader="\n\n  precision mediump float;\n\n  varying vec4 vTextureCoordScaleOpacity;\n  uniform sampler2D tex;\n\n  void main(void) {\n    gl_FragColor = vTextureCoordScaleOpacity.z * texture2D(tex, vec2(vTextureCoordScaleOpacity.s, vTextureCoordScaleOpacity.t));\n  }\n\n",e.description={vertexCount:4,attributes:[{name:"position",type:"float32",size:3,attrNames:["x","y","z"]},{name:"rotate",type:"float32",size:1,uniform:!0},{name:"texCoords",type:"float32",size:2,attrNames:["s","t"]},{name:"translate",type:"float32",size:2,attrNames:["tx","ty"],uniform:!0},{name:"scale",type:"float32",size:1,uniform:!0},{name:"opacity",type:"float32",size:1,uniform:!0}],aliases:{pos2d:{size:2,type:"float32",offset:0},posZ:{size:1,type:"float32",offset:2,uniform:!0},uv:"texCoords"},proto:{setTexCoordsByViewport:function(t,e,n,r){var i=0===t.x?0:t.x/e,o=(t.x+t.width)/e,a=1-(t.y+t.height)/n,u=0===t.y?1:1-t.y/n;void 0!==r&&(i*=r,o*=r,a*=r,u*=r),this.setTexCoords(i,a,o,a,o,u,i,u)},setTexCoordsByTexture:function(t){var e=t.minS,n=t.minT,r=t.maxS,i=t.maxT;this.setTexCoords(e,n,r,n,r,i,e,i)},setSize:function(t,e){var n=.5*t,r=.5*(null==e?t:e);this.setPos2d(-n,r,n,r,n,-r,-n,-r)},get width(){return this.x1-this.x3},get height(){return this.y0-this.y2},get rotateDegree(){return 180*this.rotate/Math.PI},set rotateDegree(t){this.rotate=t*(Math.PI/180)},get z(){return this.z0},set z(t){this.z0=t,this.z1=t,this.z2=t,this.z3=t}}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"rotate",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return["mat4 "+t+"(float angle) {","float s = sin(angle);","float c = cos(angle);","float oc = 1.0 - c;",(0,i.default)((0,o.default)((0,s.default)((0,a.default)("oc",e*e),"c"),(0,u.default)((0,a.default)("oc",e*n),(0,a.default)(r,"s")),(0,s.default)((0,a.default)("oc",r*e),(0,a.default)(n,"s")),0,(0,s.default)((0,a.default)("oc",e*n),(0,a.default)(r,"s")),(0,s.default)((0,a.default)("oc",n*n),"c"),(0,u.default)((0,a.default)("oc",n*r),(0,a.default)(e,"s")),0,(0,u.default)((0,a.default)("oc",r*e),(0,a.default)(n,"s")),(0,s.default)((0,a.default)("oc",n*r),(0,a.default)(e,"s")),(0,s.default)((0,a.default)("oc",r*r),"c"))),"}"]};var i=r(n(189)),o=r(n(190)),a=r(n(192)),u=r(n(193)),s=r(n(194))},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t){return"return "+t+";"}},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,f=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,l=arguments.length>10&&void 0!==arguments[10]?arguments[10]:0,h=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,d=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,p=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,y=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,b=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1,v=(arguments.length>16&&void 0!==arguments[16]?arguments[16]:r.default)||function(t){return t+""};return"mat4("+v(t)+", "+v(e)+", "+v(n)+", "+v(i)+", "+v(o)+", "+v(a)+", "+v(u)+", "+v(s)+", "+v(f)+", "+v(c)+", "+v(l)+", "+v(h)+", "+v(d)+", "+v(p)+", "+v(y)+", "+v(b)+")"};var r=function(t){return t&&t.__esModule?t:{default:t}}(n(191))},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t){var e=(t+"").trim();return e.match(/^[0-9]+$/)?e+".0":e}},function(t,e,n){"use strict";function r(t){return"number"==typeof t}e.__esModule=!0,e.default=function(t,e){if(r(e)&&r(t))return t*e;if(r(t))switch(t){case 0:return 0;case 1:return e;default:return t+" * "+e}else{if(!r(e))return t+" * "+e;switch(e){case 0:return 0;case 1:return t;default:return t+" * "+e}}}},function(t,e,n){"use strict";function r(t){return"number"==typeof t}e.__esModule=!0,e.default=function(t,e){if(r(t)&&r(e))return t-e;if(r(t))switch(t){case 0:return"-"+e;default:return t+" - "+e}else{if(!r(e))return t+" - "+e;switch(e){case 0:return t;default:return t+" - "+e}}}},function(t,e,n){"use strict";function r(t){return"number"==typeof t}e.__esModule=!0,e.default=function(t,e){if(r(t)&&r(e))return t+e;if(r(t))switch(t){case 0:return e;default:return t+" + "+e}else{if(!r(e))return t+" + "+e;switch(e){case 0:return t;default:return t+" + "+e}}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=r(n(2)),o=r(n(196)),a=n(6),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(39));e.default=function(){return customElements.get(a.HTML_ELEMENT_ENTITY)?(0,i.default)("<blitpunk> custom elements have already been defined"):((0,i.default)("<blitpunk> custom elements are now defined"),(0,o.default)()),customElements.whenDefined(a.HTML_ELEMENT_ENTITY).then(function(){return u})}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.default=function(){[[s.HTML_ELEMENT_CANVAS,i.default],[s.HTML_ELEMENT_ENTITY,o.default],[s.HTML_ELEMENT_TEXTURE_ATLAS,a.default],[s.HTML_ELEMENT_SPRITE_GROUP,u.default]].forEach(function(t){var e=t[0],n=t[1];return window.customElements.define(e,n)})};var i=r(n(197)),o=r(n(20)),a=r(n(202)),u=r(n(206)),s=n(6);n(208)},function(t,e,n){"use strict";e.__esModule=!0;var r=n(198);Object.defineProperty(e,"default",{enumerable:!0,get:function(){return function(t){return t&&t.__esModule?t:{default:t}}(r).default}})},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}e.__esModule=!0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=r(n(20)),u=r(n(200)),s=r(n(201)),f=function(t){function e(n){var r,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=r=i(this,t.call(this,n));return a.now=0,a.animationFrameRequestId=0,a.animationFrameRequestIsStopped=!1,Object.defineProperties(a,{_webGlRenderer:{value:null,writable:!0},_clearColor:{value:void 0,writable:!0}}),a.canvas=document.createElement("canvas"),a.firstTimeConnected=!0,(0,s.default)(a),o=a,i(r,o)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.startAnimation=function(){var t=this;this.animationFrameRequestId||(this.animationFrameRequestIsStopped=!1,this.animationFrameRequestId=window.requestAnimationFrame(function(e){if(t.animationFrameRequestId=0,!t.animationFrameRequestIsStopped){t.startAnimation(),t.now=e/1e3,(0,s.default)(t);var n=t.webGlRenderer;n.setViewport(0,0,t.width,t.height),n.renderFrame(function(){t.renderFrame(t,n)})}}))},e.prototype.stopAnimation=function(){this.animationFrameRequestIsStopped=!0,0!==this.animationFrameRequestId&&(window.cancelAnimationFrame(this.animationFrameRequestId),this.animationFrameRequestId=0)},e.prototype.connectedCallback=function(){this.firstTimeConnected&&(this.firstTimeConnected=!1,this.appendChild(this.canvas)),(0,s.default)(this),this.startAnimation()},e.prototype.disconnectedCallback=function(){this.stopAnimation()},o(e,[{key:"webGlRenderer",get:function(){var t=this._webGlRenderer;if(t)return t;var e=(0,u.default)(this),n=e.webGlRenderer,r=e.canvasContextAttributes;return this.canvasContextAttributes=r,this._webGlRenderer=n,n}}]),e}(a.default);e.default=f},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}e.__esModule=!0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(19),u=n(75),s=r(n(37)),f=r(n(35)),c=n(2),l=function(t){function e(n){var r,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=r=i(this,t.call(this,n));return Object.defineProperties(a,{attributeValuesCache:{value:new Map},attributeNamesCache:{value:[]},_componentRegistry:{value:null,writable:!0},_entityManager:{value:null,writable:!0},_entity:{value:null,writable:!0}}),(0,c.debug)("[entity] constructor, self=",a),o=a,i(r,o)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.updateEntity=function(){var t=this,e=this.getAttributeNames(),n=this.attributeNamesCache.slice(0);this.attributeNamesCache.length=0,e.forEach(function(e){(0,a.removeItem)(n,e),t.attributeNamesCache.push(e);var r=t.attributeValuesCache,i=r.get(e),o=t.getAttribute(e);i!==o&&(r.set(e,o),t.componentRegistry.createOrUpdateComponent(t.entity,e,o))}),n.forEach(function(e){t.entity.destroyComponent(e),t.attributeValuesCache.delete(e)})},e.prototype.renderFrame=function(t,e){this.updateEntity(),this.entity.emit("renderFrame",e,t);for(var n=this.children,r=0;r<n.length;r++){var i=n[r];i.renderFrame&&i.renderFrame(t,e)}this.entity.emit("postRenderFrame",e,t)},e.prototype.connectedCallback=function(){(0,c.debug)("[entity] connectedCallback()",this)},e.prototype.disconnectedCallback=function(){(0,c.debug)("[entity] disconnectedCallback()",this)},o(e,[{key:"componentRegistry",get:function(){return this._componentRegistry||(this._componentRegistry=new u.ComponentRegistry(f.default)),this._componentRegistry},set:function(t){this._componentRegistry=t}},{key:"entityManager",get:function(){return this._entityManager||s.default},set:function(t){this._entityManager=t}},{key:"entity",get:function(){var t=this._entity;return t||(this._entity=this.entityManager.createEntity(),this._entity)}}]),e}(HTMLElement);e.default=l},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=r(n(40)),o=r(n(43)),a=n(2),u=r(n(76)),s=n(6);e.default=function(t){var e=Object.freeze(function(t){return{alpha:(0,u.default)(t,s.ATTR_ALPHA,!1),antialias:(0,u.default)(t,s.ATTR_ANTIALIAS,!1),depth:(0,u.default)(t,s.ATTR_DEPTH,!0),premultipliedAlpha:(0,u.default)(t,s.ATTR_PREMULTIPLIED_ALPHA,!1),preserveDrawingBuffer:(0,u.default)(t,s.ATTR_PRESERVE_DRAW,!1),stencil:(0,u.default)(t,s.ATTR_STENCIL,!1)}}(t)),n=new i.default(function(t,e){var n=void 0;try{n=t.getContext("webgl",e)}catch(t){(0,a.error)(t)}if(!n)try{n=t.getContext("experimental-webgl",e)}catch(t){(0,a.error)(t)}if(!n)throw new Error("Could not create WebGL context, attributes="+JSON.stringify(e));return n}(t.canvas,e));return{canvasContextAttributes:e,webGlRenderer:new o.default(n)}}},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t){var e="inline"===window.getComputedStyle(t,null).display?t.parentNode:t,n=e.clientWidth,r=e.clientHeight,i=t.canvas,o=window.devicePixelRatio||1;i.style.width=n+"px",i.style.height=r+"px";var a=Math.round(n*o),u=Math.round(r*o);a===i.width&&u===i.height||(i.width=a,i.height=u),a===t.width&&u===t.height||(t.width=a,t.height=u)}},function(t,e,n){"use strict";e.__esModule=!0;var r=n(203);Object.defineProperty(e,"default",{enumerable:!0,get:function(){return function(t){return t&&t.__esModule?t:{default:t}}(r).default}})},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}e.__esModule=!0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=r(n(38)),u=n(2),s=r(n(20)),f=n(6),c=r(n(204)),l=function(t){function e(n){var r,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=r=i(this,t.call(this,n));return(0,u.debug)("[texture-atlas] constructor, self=",a),Object.defineProperties(a,{previousSrc:{value:void 0,writable:!0}}),a.textureHints=void 0,a.textureAtlasPromise=new Promise(function(t){Object.defineProperty(a,"resolveTextureAtlasPromise",{value:t,writable:!0})}),o=a,i(r,o)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.loadTextureAtlas=function(){var t=this.getAttribute(f.ATTR_SRC);return t&&(0,c.default)(this,t),this.textureAtlasPromise},o(e,[{key:"textureId",get:function(){return this.entity.id}},{key:"textureLibrary",get:function(){return a.default}}]),e}(s.default);e.default=l},function(t,e,n){"use strict";e.__esModule=!0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(205));e.default=function(t,e){if(t.previousSrc===e)return t.textureAtlasPromise;t.previousSrc=e;var n=(0,r.default)(t);return t.textureAtlasPromise=t.textureLibrary.loadTextureAtlas(t.textureId,e,n).then(function(e){return t.textureAtlas=e,t.textureHints=n,t.resolveTextureAtlasPromise&&(t.resolveTextureAtlasPromise(e),t.resolveTextureAtlasPromise=null),e}),t.textureAtlasPromise}},function(t,e,n){"use strict";e.__esModule=!0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(76)),i=n(6);e.default=function(t){return{flipY:(0,r.default)(t,i.ATTR_FLIP_Y,!1),repeatable:(0,r.default)(t,i.ATTR_REPEATABLE,!1),premultiplyAlpha:(0,r.default)(t,i.ATTR_PREMULTIPLY_ALPHA,!0),nearest:(0,r.default)(t,i.ATTR_NEAREST,!1)}}},function(t,e,n){"use strict";e.__esModule=!0;var r=n(207);Object.defineProperty(e,"default",{enumerable:!0,get:function(){return function(t){return t&&t.__esModule?t:{default:t}}(r).default}})},function(t,e,n){"use strict";function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}e.__esModule=!0;var i=n(2),o=function(t){function e(n){var o,a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var u=o=r(this,t.call(this,n));return(0,i.debug)("[sprite-group] constructor, self=",u),a=u,r(o,a)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(function(t){return t&&t.__esModule?t:{default:t}}(n(20)).default);e.default=o},function(t,e,n){var r=n(209);"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0};i.transform=void 0;n(211)(r,i);r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(210)(void 0)).push([t.i,"blitpunk-canvas {\n  display: inline-block;\n  font-size: 0;\n  margin: 0;\n  padding: 0; }\n  blitpunk-canvas > canvas {\n    border: 0;\n    margin: 0;\n    overflow: hidden;\n    padding: 0;\n    -ms-touch-action: none;\n    touch-action: none;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none; }\n\nblitpunk-entity,\nblitpunk-texture-atlas,\nblitpunk-sprite-group {\n  display: none; }\n",""])},function(t,e){function n(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var i=function(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}(r),o=r.sources.map(function(t){return"/*# sourceURL="+r.sourceRoot+t+" */"});return[n].concat(o).concat([i]).join("\n")}return[n].join("\n")}t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var r=n(e,t);return e[2]?"@media "+e[2]+"{"+r+"}":r}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<t.length;i++){var a=t[i];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},function(t,e,n){function r(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=l[r.id];if(i){i.refs++;for(a=0;a<i.parts.length;a++)i.parts[a](r.parts[a]);for(;a<r.parts.length;a++)i.parts.push(f(r.parts[a],e))}else{for(var o=[],a=0;a<r.parts.length;a++)o.push(f(r.parts[a],e));l[r.id]={id:r.id,refs:1,parts:o}}}}function i(t,e){for(var n=[],r={},i=0;i<t.length;i++){var o=t[i],a=e.base?o[0]+e.base:o[0],u={css:o[1],media:o[2],sourceMap:o[3]};r[a]?r[a].parts.push(u):n.push(r[a]={id:a,parts:[u]})}return n}function o(t,e){var n=d(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=b[b.length-1];if("top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),b.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=d(t.insertInto+" "+t.insertAt.before);n.insertBefore(e,i)}}function a(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=b.indexOf(t);e>=0&&b.splice(e,1)}function u(t){var e=document.createElement("style");return t.attrs.type="text/css",s(e,t.attrs),o(t,e),e}function s(t,e){Object.keys(e).forEach(function(n){t.setAttribute(n,e[n])})}function f(t,e){var n,r,i,f;if(e.transform&&t.css){if(!(f=e.transform(t.css)))return function(){};t.css=f}if(e.singleton){var l=y++;n=p||(p=u(e)),r=c.bind(null,n,l,!1),i=c.bind(null,n,l,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return t.attrs.type="text/css",t.attrs.rel="stylesheet",s(e,t.attrs),o(t,e),e}(e),r=function(t,e,n){var r=n.css,i=n.sourceMap,o=void 0===e.convertToAbsoluteUrls&&i;(e.convertToAbsoluteUrls||o)&&(r=v(r));i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([r],{type:"text/css"}),u=t.href;t.href=URL.createObjectURL(a),u&&URL.revokeObjectURL(u)}.bind(null,n,e),i=function(){a(n),n.href&&URL.revokeObjectURL(n.href)}):(n=u(e),r=function(t,e){var n=e.css,r=e.media;r&&t.setAttribute("media",r);if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),i=function(){a(n)});return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else i()}}function c(t,e,n,r){var i=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=m(e,i);else{var o=document.createTextNode(i),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}var l={},h=function(t){var e;return function(){return void 0===e&&(e=t.apply(this,arguments)),e}}(function(){return window&&document&&document.all&&!window.atob}),d=function(t){var e={};return function(t){if(void 0===e[t]){var n=function(t){return document.querySelector(t)}.call(this,t);if(n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}}(),p=null,y=0,b=[],v=n(212);t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||(e.singleton=h()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=i(t,e);return r(n,e),function(t){for(var o=[],a=0;a<n.length;a++){var u=n[a];(s=l[u.id]).refs--,o.push(s)}if(t){r(i(t,e),e)}for(a=0;a<o.length;a++){var s=o[a];if(0===s.refs){for(var f=0;f<s.parts.length;f++)s.parts[f]();delete l[s.id]}}}};var m=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,r=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var i=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(i))return t;var o;return o=0===i.indexOf("//")?i:0===i.indexOf("/")?n+i:r+i.replace(/^\.\//,""),"url("+JSON.stringify(o)+")"})}}])});

/***/ })

});