webpackJsonpBLITPUNK([2],{

/***/ 334:
/***/ (function(module, exports, __webpack_require__) {

!function(t,e){ true?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.BLITPUNK=e():t.BLITPUNK=e()}(this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var r={};return e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=75)}([function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t){"object"==typeof t&&(t.destroyed||(n.is(t)&&"function"==typeof t.off&&t.off(),Object.keys(t).forEach(e=>{delete t[e]}),Object.defineProperty(t,"destroyed",{value:!0})))};const n=r(18)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),r.d(e,"ARRAY_TYPE",function(){return i}),e.setMatrixArrayType=function(t){i=t},e.toRadian=function(t){return t*s},e.equals=function(t,e){return Math.abs(t-e)<=n*Math.max(1,Math.abs(t),Math.abs(e))};const n=1e-6;e.EPSILON=n;let i="undefined"!=typeof Float32Array?Float32Array:Array;const a=Math.random;e.RANDOM=a;const s=Math.PI/180},function(t,e,r){"use strict";e.__esModule=!0;const n=r(79);e.default=n},function(t,e){var r=Array.isArray;t.exports=r},function(t,e,r){"use strict";e.__esModule=!0;class n{constructor(t,e,r){this.name=t,this.type=e,this._value=r,this.serial=0}get value(){return this._value}set value(t){this._value!==t&&(this._value=t,++this.serial)}touch(){++this.serial}}e.default=n,n.TYPE=Object.freeze({UNIFORM:"uniform",ATTRIB:"attrib",TEXTURE_2D:"tex2d"})},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(r(2)),a=n(r(82));class s{constructor(t,e={}){this.resource=t,this.hints=e,this.id=e.id||(0,i.default)(),this.serial=new a.default("number"==typeof e.serial?e.serial:1)}isSynced(t){const{value:e}=this.serial;return e>0&&e===t.serial.value}needSync(t){return!this.isSynced(t)}sync(t,e){this.needSync(t)&&(e(this.resource),this.serial.value=t.serial.value)}}e.default=s},function(t,e,r){"use strict";e.__esModule=!0;const n=Object.freeze({float32:4,int16:2,int32:4,int8:1,uint16:2,uint32:4,uint8:1}),i=Object.freeze({float32:Float32Array,int16:Int16Array,int32:Int32Array,int8:Int8Array,uint16:Uint16Array,uint32:Uint32Array,uint8:Uint8Array}),a=Object.freeze({float32:t=>t.float32Array,int32:t=>t.int32Array,int16:t=>t.int16Array,int8:t=>t.int8Array,uint32:t=>t.uint32Array,uint16:t=>t.uint16Array,uint8:t=>t.uint8Array}),s=Object.freeze({float32:"FLOAT",int16:"SHORT",int32:"INT",int8:"BYTE",uint16:"UNSIGNED_SHORT",uint32:"UNSIGNED_INT",uint8:"UNSIGNED_BYTE"});e.BYTES_PER_ELEMENT=n,e.TYPED_ARRAY_CONSTRUCTOR=i,e.TYPED_ARRAY_GETTER=a,e.GL_ITEM_TYPES=s},function(t,e,r){"use strict";e.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(r(5)),i=r(6);class a{constructor(t,e,r,s=a.USAGE.DYNAMIC,o){this.resourceRef=new n.default(this,{usage:s}),this.descriptor=t,this.capacity=e,r instanceof ArrayBuffer?this.float32Array=new Float32Array(r):r instanceof DataView?this.float32Array=new Float32Array(r.buffer,r.byteOffset,r.byteLength/4):r instanceof Float32Array?this.float32Array=r:this.float32Array=new Float32Array(new ArrayBuffer(e*t.bytesPerVO)),this.resourceRef.hints.typedArray=this.float32Array;const{buffer:u,bufferByteOffset:c,bufferByteLength:l}=this;t.typeList.filter(t=>"float32"!==t).forEach(t=>{this[`${t}Array`]=new i.TYPED_ARRAY_CONSTRUCTOR[t](u,c,l/i.BYTES_PER_ELEMENT[t])}),this.enableAutotouch="boolean"==typeof o?o:s===a.USAGE.DYNAMIC,Object.freeze(this)}touch(){this.resourceRef.serial.touch()}get buffer(){return this.float32Array.buffer}get bufferByteOffset(){return this.float32Array.byteOffset}get bufferByteLength(){return this.float32Array.byteLength}copy(t,e){let r=0;void 0===e&&(r=e*(this.descriptor.bytesPerVO>>2)),this.float32Array.set(t.float32Array,r)}subarray(t,e=1){return new a(this.descriptor,e,new DataView(this.buffer,this.bufferByteOffset+t*this.descriptor.bytesPerVO,e*this.descriptor.bytesPerVO))}}e.default=a,a.USAGE=Object.freeze({STATIC:"static",DYNAMIC:"dynamic"})},function(t,e,r){"use strict";function n(t,e,r){if(t.attrNames){let e=t.attrNames[r];if(void 0!==e)return e}return e+"_"+r}function i(t,e){return function(){return t(this.voArray)[e]}}function a(t,e,r,n,i){return function(){const a=t(this.voArray);let s,o;for(s=0;s<r;++s)for(o=0;o<e;++o)a[s*n+i+o]=arguments[s*e+o]}}function s(t,e,r,n){return function(i){const a=t(this.voArray);for(let t=0;t<e;++t)a[t*r+n]=i}}function o(t){return t[0].toUpperCase()+t.substr(1)}e.__esModule=!0;var u=r(6);class c{constructor(t,e,r,n,i,a,s){this.name=t,this.type=e,this.size=r,this.uniform=a,this.attrNames=s,this.bytesPerElement=u.BYTES_PER_ELEMENT[this.type],this.bytesPerVertex=this.bytesPerElement*r,this.byteOffset="number"!=typeof i?n*this.bytesPerElement:i,this.offset="number"!=typeof n?i/this.bytesPerElement:n}vertexAttrCount(t){return t.bytesPerVertex/this.bytesPerElement}static defineProperties(t,e,r){const{name:c}=t,l=u.TYPED_ARRAY_GETTER[t.type],f=r.vertexCount,h=t.vertexAttrCount(r),d=t.byteOffset/t.bytesPerElement;let p,m;if(1===t.size)if(t.uniform){const r=i(l,d),n=s(l,f,h,d);t.getValue=(t=>r.call(t)),t.setValue=((t,e)=>n.call(t,e)),e[c]={get:r,set:n,enumerable:!0}}else{const n=a(l,1,f,h,d);t.setValue=((t,e)=>n.apply(t,e)),e["set"+o(c)]={value:n,enumerable:!0};const s=[];for(p=0;p<r.vertexCount;++p){const t=i(l,d+p*h);s.push(t),e[c+p]={get:t,set:a(l,1,1,0,d+p*h),enumerable:!0}}t.getValue=function(t,e){return s[e].call(t)}}else if(t.size>=2)if(t.uniform){const r=function(t,e){return function(r){return t(this.voArray)[e+r]}}(l,d),a=function(t,e,r,n,i){return function(){const a=t(this.voArray);let s,o;for(s=0;s<r;++s)for(o=0;o<e;++o)a[s*n+i+o]=arguments[o]}}(l,t.size,f,h,d);for(t.getValue=((t,e,n)=>r.call(t,n)),t.setValue=((t,e)=>a.apply(t,e)),e["get"+o(c)]={value:r,enumerable:!0},e["set"+o(c)]={value:a,enumerable:!0},p=0;p<t.size;++p){e[n(t,c,p)]={get:i(l,d+p),set:s(l,f,h,d+p),enumerable:!0}}}else{const s=a(l,t.size,f,h,d);t.setValue=((t,e)=>s.apply(t,e)),e["set"+o(c)]={value:s,enumerable:!0};const u=[];for(p=0;p<r.vertexCount;++p){const r=[];for(m=0;m<t.size;++m){const s=n(t,c,m)+p,o=i(l,d+p*h+m);r.push(o),e[s]={get:o,set:a(l,1,1,0,d+p*h+m),enumerable:!0}}u.push(r)}t.getValue=function(t,e,r){return u[e][r].call(t)}}}}e.default=c},function(t,e,r){var n=r(20).Symbol;t.exports=n},function(t,e,r){"use strict";e.__esModule=!0;class n{constructor(t){this.shaderVars=t}pushVar(t){this.shaderVars.forEach(t.pushVar.bind(t))}popVar(t){this.shaderVars.forEach(t.popVar.bind(t))}}e.default=n},function(t,e,r){var n=r(3),i=r(125),a=r(126),s=r(19);t.exports=function(t,e){return n(t)?t:i(t,e)?[t]:a(s(t))}},function(t,e,r){var n=r(26)(Object,"create");t.exports=n},function(t,e,r){var n=r(58);t.exports=function(t,e){for(var r=t.length;r--;)if(n(t[r][0],e))return r;return-1}},function(t,e,r){var n=r(151);t.exports=function(t,e){var r=t.__data__;return n(e)?r["string"==typeof e?"string":"hash"]:r.map}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(r(24)),a=n(r(5));const s=(t,e,r)=>null!=t&&void 0!==t[e]?t[e]:r;class o{constructor(t,e,r,n=0,i=0,u){if(t instanceof o)this.parent=t,this.image=null;else{if(!("object"==typeof t&&"width"in t&&"height"in t))throw new Error("new Texture() panic: unexpected source argument!");this.image=t,this.parent=null,this._resourceRef=new a.default(this,{flipY:s(u,"flipY",!1),repeatable:s(u,"repeatable",!1),premultiplyAlpha:s(u,"premultiplyAlpha",!0),nearest:s(u,"nearest",!1)}),"origWidth"in t&&"origHeight"in t&&(e=t.origWidth,r=t.origHeight)}this._width=e,this._height=r,this.x=n,this.y=i}get root(){return this.parent&&this.parent.root||this}get imgEl(){const{root:t}=this;return t.image.imgEl||t.image}get resourceRef(){return this._resourceRef||this.root.resourceRef}get width(){return"number"==typeof this._width?this._width:this.image?this.image.width:this.parent?this.root.width:0}set width(t){this._width=t}get height(){return"number"==typeof this._height?this._height:this.image?this.image.height:this.parent?this.root.height:0}set height(t){this._height=t}get minS(){let t=this.x,e=this;for(;null!=(e=e.parent);)t+=e.x;return t/this.root.image.width}get minT(){let t=this.y,e=this;for(;null!=(e=e.parent);)t+=e.y;return t/this.root.image.height}get maxS(){let t=this.x+this.width,e=this;for(;null!=(e=e.parent);)t+=e.x;return t/this.root.image.width}get maxT(){let t=this.y+this.height,e=this;for(;null!=(e=e.parent);)t+=e.y;return t/this.root.image.height}static load(t,e){return new i.default(t).complete.then(t=>new o(t,void 0,void 0,0,0,e))}}e.default=o},function(t,e,r){"use strict";e.__esModule=!0;const n=e.DOM_ELEM_ENTITY="blitpunk-entity",i=e.DOM_ELEM_CANVAS="blitpunk-canvas",a=e.DOM_ELEM_SCENE="blitpunk-scene",s=e.DOM_ELEM_SPRITE_GROUP="blitpunk-sprite-group",o=e.DOM_ELEM_TEXTURE_ATLAS="blitpunk-texture-atlas";e.NODE_NAME_ENTITY=n.toUpperCase(),e.NODE_NAME_CANVAS=i.toUpperCase(),e.NODE_NAME_SCENE=a.toUpperCase(),e.NODE_NAME_SPRITE_GROUP=s.toUpperCase(),e.NODE_NAME_TEXTURE_ATLAS=o.toUpperCase(),e.COMP_PRIO_CLEAR=2e3,e.COMP_PRIO_PROJECTION=1e3,e.COMP_PRIO_BLEND_BEFORE=500,e.COMP_PRIO_CHILDREN=100,e.COMP_PRIO_BLEND_AFTER=-500,e.ATTR_ALPHA="alpha",e.ATTR_ANTIALIAS="antialias",e.ATTR_BLEND_MODE="blend-mode",e.ATTR_CAPACITY="capacity",e.ATTR_CLEAR_COLOR="clear-color",e.ATTR_DEPTH="depth",e.ATTR_DESCRIPTOR="descriptor",e.ATTR_FLIP_Y="flip-y",e.ATTR_FRAGMENT_SHADER="fragment-shader",e.ATTR_MODULE_SRC="module-src",e.ATTR_NEAREST="nearest",e.ATTR_PREMULTIPLIED_ALPHA="premultiplied-alpha",e.ATTR_PREMULTIPLY_ALPHA="premultiply-alpha",e.ATTR_PRESERVE_DRAW="preserve-drawing-buffer",e.ATTR_PRIMITIVE="primitive",e.ATTR_PROJECTION="projection",e.ATTR_REPEATABLE="repeatable",e.ATTR_SRC="src",e.ATTR_STENCIL="stencil",e.ATTR_TEXTURE_MAP="texture-map",e.ATTR_VERTEX_SHADER="vertex-shader",e.ATTR_VO_NEW="vo-new",e.ATTR_VO_ZERO="vo-zero"},function(t,e,r){"use strict";e.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(r(2));class i{constructor(t,e){this.id=(0,n.default)(),this.type=t,this.source=e instanceof HTMLElement?e.textContent:e}}e.default=i,i.VERTEX_SHADER="VERTEX_SHADER",i.FRAGMENT_SHADER="FRAGMENT_SHADER"},function(t,e,r){"use strict";function n(t){function e(t,e){return t.prio!==e.prio?e.prio-t.prio:t.id-e.id}function r(t,e,r){function a(){var e,n,a;if(p)for(e=0;e<p;e++)"function"==typeof(a=(n=i.boundObjects[e])[t])?r(a,n):n[h]&&r(null,n)}if(!(u.silenced||u.off.indexOf(t)>=0)){var s,o,c,l=i.callbacks[t],f=i.callbacks[d],p=i.boundObjects.length,m=!1;if(l||f.length)for(o=(l=l?l.concat(f):f).length,s=0;s<o;s++)c=l[s],!m&&c&&c.prio<n.PRIO_DEFAULT&&(a(),m=!0),e(c);m||a()}}if(t[h])return t;var i={lastCallbackId:0,callbacks:{},boundObjects:[]};i.callbacks[d]=[];var u=s({},{silenced:!1,off:[]});return o(t,h,u),void 0===n.PRIO_DEFAULT&&s(n,{PRIO_MAX:Number.POSITIVE_INFINITY,PRIO_A:1e9,PRIO_B:1e7,PRIO_C:1e5,PRIO_DEFAULT:0,PRIO_LOW:-1e5,PRIO_MIN:Number.NEGATIVE_INFINITY}),t.on=function(t,r,o){var c=arguments.length;if(0!==c){var h;if(1===c){if("string"==typeof t)return void((h=u.off.indexOf(t))>=0&&u.off.splice(h,1));if("object"!=typeof t&&"function"!=typeof t)return void(l&&f(p,".on() called with insufficient arguments!",arguments));o=t,t=d,r=n.PRIO_DEFAULT}2===c&&(o=r,r=n.PRIO_DEFAULT);var m=i.callbacks,g=m[t]||(m[t]=[]),b=++i.lastCallbackId,_=s({},{id:b,fn:o,prio:"number"!=typeof r?n.PRIO_DEFAULT:r,isFunction:"function"==typeof o});return g.push(_),g.sort(e),b}u.silenced&&(a(u,"silenced",!1),u.off.length=0)},t.once=function(e,r,i){var a=arguments.length;if(a&&!(a>3)){1===a?(i=e,e=d,r=n.PRIO_DEFAULT):2===a&&(i=r,r=n.PRIO_DEFAULT);var s=t.on(e,r,function(){var e=i.apply(this,arguments);return t.off(s),e});return s}l&&f(p,".once() called with insufficient arguments!",arguments)},t.off=function(t){if(0!==arguments.length)if("string"!=typeof t){var e,r,n,s,o,c=i.callbacks,l="object"==typeof t;if("number"==typeof t||"function"==typeof t||l)for(o=Object.keys(c),n=0;n<o.length;n++)for(s=c[o[n]],r=0;r<s.length;r++)if(((e=s[r]).id===t||e.fn===t)&&(s.splice(r,1),!l))return;l&&(r=i.boundObjects.indexOf(t))>=0&&i.boundObjects.splice(r,1)}else-1===u.off.indexOf(t)&&u.off.push(t);else u.silenced||(a(u,"silenced",!0),u.off.length=0)},t.connect=function(t,e){var r=arguments.length;if(2===r)return function(t,e,r){var i,a,s,o;for(a in r)r.hasOwnProperty(a)&&"function"==typeof(s=e[a])&&(i=r[a],Array.isArray(i)?(o=i[0],i=i[1]):o=n.PRIO_DEFAULT,t.on(i,o,s));return t}(this,t,e);l&&f(p,".connect() called with insufficient arguments (need 2 args, but got "+r+")",arguments)},t.emit=function(){for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];var n=t[0],i=t.slice(1),a=this;r(n,function(e){if(e.isFunction)e.fn.apply(a,i);else{var r=e.fn[n];"function"==typeof r?r.apply(e.fn,i):e.fn.emit&&e.fn.emit.apply(e.fn,t)}},function(e,r){e?e.apply(r,i):r.emit&&r.emit.apply(r,t)})},t.emitReduce=function(){function t(t){void 0!==t&&(i=t)}for(var e=new Array(arguments.length),n=0;n<e.length;++n)e[n]=arguments[n];var i,a=e.shift();0===e.length?(i={},e.push(i)):t(e[0]);var s=this,o=[a].concat(e);return r(a,function(r){if(r.isFunction)e[0]=i,t(r.fn.apply(s,e));else{var n=r.fn[a];"function"==typeof n?(e[0]=i,t(n.apply(r.fn,e))):r.fn.emitReduce&&(o[1]=i,t(r.fn.emitReduce.apply(r.fn,o)))}},function(r,n){r&&(e[0]=i,t(r.apply(n,e)))}),i},t.from=function(t,e){var r=this;return new e(function(e){var n=r.on(t,function(t){e.next(t)});return function(){r.off(n)}})},t.subscribe=function(t,e,r,n){var i=this;return t.subscribe(function(t){i.emit(e,t)},r?function(t){i.emit(r,t)}:void 0,n?function(t){i.emit(n,t)}:void 0)},t}function i(t,e){var r=("string"==typeof t||"symbol"==typeof t)&&t||function(){var t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)});return c?Symbol(t):t}(),i=n({}),s=!(!e||!e.replace),u=function(t){a(i,m,t)},l=function(t){return function(e){t.apply(i,e)}}(i.emit);return o(i,"events",[]),a(i,"id",r),i.collect=function(){return i[m]!==b&&u(b),i},i.emit=function(){var t,e=new Array(arguments.length);for(t=0;t<e.length;++t)e[t]=arguments[t];if(i[m]===g)l(e);else{if(s){var r,n=e[0];for(t=0,r=i.events.length;t<r;t++)if(i.events[t][0]===n)return void(i.events[t]=e)}i.events.push(e)}},i.play=function(){return i[m]!==g&&(u(g),i.events.forEach(l),i.events.length=0),i},i.toggle=function(){return i[m]!==g?i.play():i.collect()},i.play()}function a(t,e,r){return Object.defineProperty(t,e,{value:r,configurable:!0,enumerable:!0}),t}function s(t,e){var r,n=Object.keys(e);for(r=n.length;r--;)a(t,n[r],e[n[r]]);return t}function o(t,e,r){return Object.defineProperty(t,e,{value:r,configurable:!0}),t}var u="undefined"!=typeof Map,c="undefined"!=typeof Symbol,l="undefined"!=typeof console,f=l?console[console.warn?"warn":"log"].bind(console):function(){},h=c?(Symbol.eventize||(Symbol.eventize=Symbol("eventize")),Symbol.eventize):"@@eventize",d="*",p="[eventize.js]";n.is=function(t){return!(!t||!t[h])},o(n,"EventizeNamespace",h),o(n,"queues",u?new Map:{}),n.queue=function(t){var e,r,a=arguments.length;return a>=1&&("object"==typeof t&&2!==a||(e=u?n.queues.get(t):n.queues[t]),2===a?r=arguments[1]:1===a&&"object"==typeof t&&(r=t)),e||(e=i(t,r),u?n.queues.set(e.id,e):n.queues[e.id]=e),e};var m="state",g="play",b="collect";t.exports=n},function(t,e,r){var n=r(103);t.exports=function(t){return null==t?"":n(t)}},function(t,e,r){var n=r(104),i="object"==typeof self&&self&&self.Object===Object&&self,a=n||i||Function("return this")();t.exports=a},function(t,e,r){var n=r(22),i=r(23),a="[object Symbol]";t.exports=function(t){return"symbol"==typeof t||i(t)&&n(t)==a}},function(t,e,r){var n=r(9),i=r(106),a=r(107),s="[object Null]",o="[object Undefined]",u=n?n.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?o:s:u&&u in Object(t)?i(t):a(t)}},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,e,r){"use strict";function n(t,e){t.imgEl=(0,i.isPowerOf2)(e.width)&&(0,i.isPowerOf2)(e.height)?e:function(t){const e=(0,i.findNextPowerOf2)(t.width),r=(0,i.findNextPowerOf2)(t.height),n=document.createElement("canvas");return n.width=e,n.height=r,n.getContext("2d").drawImage(t,0,0),n}(e),t.origWidth=e.width,t.origHeight=e.height}e.__esModule=!0;var i=r(45);class a{constructor(t){let e;"string"==typeof t?(e=new window.Image).src=t:e=t,!1===e.complete||0===e.width&&0===e.height?(this.imgEl=null,this.complete=new Promise(t=>{const r=e.onload;e.onload=(()=>{r&&r.call(e),n(this,e),t(this)})})):(n(this,e),this.complete=Promise.resolve(this))}get isComplete(){return null!=this.imgEl}get width(){return this.imgEl&&this.imgEl.width||0}get height(){return this.imgEl&&this.imgEl.height||0}}e.default=a},function(t,e,r){"use strict";e.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(r(4));class i extends n.default{constructor(t,e){super(t,n.default.TYPE.TEXTURE_2D,e),this.texture=null}syncTextureAndValue(t){if(null!=this.texture){const e=t.syncTexture(this.texture);this.value=e.bind()}}}e.default=i},function(t,e,r){var n=r(133),i=r(138);t.exports=function(t,e){var r=i(t,e);return n(r)?r:void 0}},function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e,r){var n=r(21),i=1/0;t.exports=function(t){if("string"==typeof t||n(t))return t;var e=t+"";return"0"==e&&1/t==-i?"-0":e}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(r(15)),a=n(r(62)),s=n(r(63));class o{constructor(t,e=null){this.rootTexture=t,this.spec=e,this.frames=new Map}addFrame(t,e,r,n,a){this.frames.set(t,new i.default(this.rootTexture,e,r,n,a))}getFrame(t){return this.frames.get(t)}getRandomFrame(){return(0,s.default)(Array.from(this.frames.values()))}getRandomFrameName(){return(0,s.default)(this.frameNames())}frameNames(){return Array.from(this.frames.keys())}static load(t,e=null,r=null,n){return a.default.load(t,e||{}).then(t=>t.createTextureAtlas(r||t.imageUrl,n))}}e.default=o},function(t,e,r){var n;!function(i){function a(t,e){if(t=t||"",e=e||{},t instanceof a)return t;if(!(this instanceof a))return new a(t,e);var r=function(t){var e={r:0,g:0,b:0},r=1,n=null,a=null,s=null,o=!1,u=!1;"string"==typeof t&&(t=function(t){t=t.replace(I,"").replace(L,"").toLowerCase();var e=!1;if(j[t])t=j[t],e=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};var r;if(r=Y.rgb.exec(t))return{r:r[1],g:r[2],b:r[3]};if(r=Y.rgba.exec(t))return{r:r[1],g:r[2],b:r[3],a:r[4]};if(r=Y.hsl.exec(t))return{h:r[1],s:r[2],l:r[3]};if(r=Y.hsla.exec(t))return{h:r[1],s:r[2],l:r[3],a:r[4]};if(r=Y.hsv.exec(t))return{h:r[1],s:r[2],v:r[3]};if(r=Y.hsva.exec(t))return{h:r[1],s:r[2],v:r[3],a:r[4]};if(r=Y.hex8.exec(t))return{r:T(r[1]),g:T(r[2]),b:T(r[3]),a:P(r[4]),format:e?"name":"hex8"};if(r=Y.hex6.exec(t))return{r:T(r[1]),g:T(r[2]),b:T(r[3]),format:e?"name":"hex"};if(r=Y.hex4.exec(t))return{r:T(r[1]+""+r[1]),g:T(r[2]+""+r[2]),b:T(r[3]+""+r[3]),a:P(r[4]+""+r[4]),format:e?"name":"hex8"};if(r=Y.hex3.exec(t))return{r:T(r[1]+""+r[1]),g:T(r[2]+""+r[2]),b:T(r[3]+""+r[3]),format:e?"name":"hex"};return!1}(t));"object"==typeof t&&(C(t.r)&&C(t.g)&&C(t.b)?(e=function(t,e,r){return{r:255*E(t,255),g:255*E(e,255),b:255*E(r,255)}}(t.r,t.g,t.b),o=!0,u="%"===String(t.r).substr(-1)?"prgb":"rgb"):C(t.h)&&C(t.s)&&C(t.v)?(n=S(t.s),a=S(t.v),e=function(t,e,r){t=6*E(t,360),e=E(e,100),r=E(r,100);var n=i.floor(t),a=t-n,s=r*(1-e),o=r*(1-a*e),u=r*(1-(1-a)*e),c=n%6;return{r:255*[r,o,s,s,u,r][c],g:255*[u,r,r,o,s,s][c],b:255*[s,s,u,r,r,o][c]}}(t.h,n,a),o=!0,u="hsv"):C(t.h)&&C(t.s)&&C(t.l)&&(n=S(t.s),s=S(t.l),e=function(t,e,r){function n(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t}var i,a,s;t=E(t,360),e=E(e,100),r=E(r,100);if(0===e)i=a=s=r;else{var o=r<.5?r*(1+e):r+e-r*e,u=2*r-o;i=n(u,o,t+1/3),a=n(u,o,t),s=n(u,o,t-1/3)}return{r:255*i,g:255*a,b:255*s}}(t.h,n,s),o=!0,u="hsl"),t.hasOwnProperty("a")&&(r=t.a));return r=A(r),{ok:o,format:t.format||u,r:F(255,D(e.r,0)),g:F(255,D(e.g,0)),b:F(255,D(e.b,0)),a:r}}(t);this._originalInput=t,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=V(100*this._a)/100,this._format=e.format||r.format,this._gradientType=e.gradientType,this._r<1&&(this._r=V(this._r)),this._g<1&&(this._g=V(this._g)),this._b<1&&(this._b=V(this._b)),this._ok=r.ok,this._tc_id=N++}function s(t,e,r){t=E(t,255),e=E(e,255),r=E(r,255);var n,i,a=D(t,e,r),s=F(t,e,r),o=(a+s)/2;if(a==s)n=i=0;else{var u=a-s;switch(i=o>.5?u/(2-a-s):u/(a+s),a){case t:n=(e-r)/u+(e<r?6:0);break;case e:n=(r-t)/u+2;break;case r:n=(t-e)/u+4}n/=6}return{h:n,s:i,l:o}}function o(t,e,r){t=E(t,255),e=E(e,255),r=E(r,255);var n,i,a=D(t,e,r),s=F(t,e,r),o=a-s;if(i=0===a?0:o/a,a==s)n=0;else{switch(a){case t:n=(e-r)/o+(e<r?6:0);break;case e:n=(r-t)/o+2;break;case r:n=(t-e)/o+4}n/=6}return{h:n,s:i,v:a}}function u(t,e,r,n){var i=[R(V(t).toString(16)),R(V(e).toString(16)),R(V(r).toString(16))];return n&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function c(t,e,r,n){return[R(O(n)),R(V(t).toString(16)),R(V(e).toString(16)),R(V(r).toString(16))].join("")}function l(t,e){e=0===e?0:e||10;var r=a(t).toHsl();return r.s-=e/100,r.s=w(r.s),a(r)}function f(t,e){e=0===e?0:e||10;var r=a(t).toHsl();return r.s+=e/100,r.s=w(r.s),a(r)}function h(t){return a(t).desaturate(100)}function d(t,e){e=0===e?0:e||10;var r=a(t).toHsl();return r.l+=e/100,r.l=w(r.l),a(r)}function p(t,e){e=0===e?0:e||10;var r=a(t).toRgb();return r.r=D(0,F(255,r.r-V(-e/100*255))),r.g=D(0,F(255,r.g-V(-e/100*255))),r.b=D(0,F(255,r.b-V(-e/100*255))),a(r)}function m(t,e){e=0===e?0:e||10;var r=a(t).toHsl();return r.l-=e/100,r.l=w(r.l),a(r)}function g(t,e){var r=a(t).toHsl(),n=(r.h+e)%360;return r.h=n<0?360+n:n,a(r)}function b(t){var e=a(t).toHsl();return e.h=(e.h+180)%360,a(e)}function _(t){var e=a(t).toHsl(),r=e.h;return[a(t),a({h:(r+120)%360,s:e.s,l:e.l}),a({h:(r+240)%360,s:e.s,l:e.l})]}function y(t){var e=a(t).toHsl(),r=e.h;return[a(t),a({h:(r+90)%360,s:e.s,l:e.l}),a({h:(r+180)%360,s:e.s,l:e.l}),a({h:(r+270)%360,s:e.s,l:e.l})]}function v(t){var e=a(t).toHsl(),r=e.h;return[a(t),a({h:(r+72)%360,s:e.s,l:e.l}),a({h:(r+216)%360,s:e.s,l:e.l})]}function x(t,e,r){e=e||6,r=r||30;var n=a(t).toHsl(),i=360/r,s=[a(t)];for(n.h=(n.h-(i*e>>1)+720)%360;--e;)n.h=(n.h+i)%360,s.push(a(n));return s}function M(t,e){e=e||6;for(var r=a(t).toHsv(),n=r.h,i=r.s,s=r.v,o=[],u=1/e;e--;)o.push(a({h:n,s:i,v:s})),s=(s+u)%1;return o}function A(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function E(t,e){(function(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)})(t)&&(t="100%");var r=function(t){return"string"==typeof t&&-1!=t.indexOf("%")}(t);return t=F(e,D(0,parseFloat(t))),r&&(t=parseInt(t*e,10)/100),i.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function w(t){return F(1,D(0,t))}function T(t){return parseInt(t,16)}function R(t){return 1==t.length?"0"+t:""+t}function S(t){return t<=1&&(t=100*t+"%"),t}function O(t){return i.round(255*parseFloat(t)).toString(16)}function P(t){return T(t)/255}function C(t){return!!Y.CSS_UNIT.exec(t)}var I=/^\s+/,L=/\s+$/,N=0,V=i.round,F=i.min,D=i.max,U=i.random;a.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var t,e,r,n,a,s,o=this.toRgb();return t=o.r/255,e=o.g/255,r=o.b/255,n=t<=.03928?t/12.92:i.pow((t+.055)/1.055,2.4),a=e<=.03928?e/12.92:i.pow((e+.055)/1.055,2.4),s=r<=.03928?r/12.92:i.pow((r+.055)/1.055,2.4),.2126*n+.7152*a+.0722*s},setAlpha:function(t){return this._a=A(t),this._roundA=V(100*this._a)/100,this},toHsv:function(){var t=o(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=o(this._r,this._g,this._b),e=V(360*t.h),r=V(100*t.s),n=V(100*t.v);return 1==this._a?"hsv("+e+", "+r+"%, "+n+"%)":"hsva("+e+", "+r+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var t=s(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=s(this._r,this._g,this._b),e=V(360*t.h),r=V(100*t.s),n=V(100*t.l);return 1==this._a?"hsl("+e+", "+r+"%, "+n+"%)":"hsla("+e+", "+r+"%, "+n+"%, "+this._roundA+")"},toHex:function(t){return u(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return function(t,e,r,n,i){var a=[R(V(t).toString(16)),R(V(e).toString(16)),R(V(r).toString(16)),R(O(n))];return i&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)&&a[3].charAt(0)==a[3].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:V(this._r),g:V(this._g),b:V(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+V(this._r)+", "+V(this._g)+", "+V(this._b)+")":"rgba("+V(this._r)+", "+V(this._g)+", "+V(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:V(100*E(this._r,255))+"%",g:V(100*E(this._g,255))+"%",b:V(100*E(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+V(100*E(this._r,255))+"%, "+V(100*E(this._g,255))+"%, "+V(100*E(this._b,255))+"%)":"rgba("+V(100*E(this._r,255))+"%, "+V(100*E(this._g,255))+"%, "+V(100*E(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(k[u(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+c(this._r,this._g,this._b,this._a),r=e,n=this._gradientType?"GradientType = 1, ":"";if(t){var i=a(t);r="#"+c(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+n+"startColorstr="+e+",endColorstr="+r+")"},toString:function(t){var e=!!t;t=t||this._format;var r=!1,n=this._a<1&&this._a>=0;return e||!n||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"hex4"!==t&&"hex8"!==t&&"name"!==t?("rgb"===t&&(r=this.toRgbString()),"prgb"===t&&(r=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(r=this.toHexString()),"hex3"===t&&(r=this.toHexString(!0)),"hex4"===t&&(r=this.toHex8String(!0)),"hex8"===t&&(r=this.toHex8String()),"name"===t&&(r=this.toName()),"hsl"===t&&(r=this.toHslString()),"hsv"===t&&(r=this.toHsvString()),r||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},clone:function(){return a(this.toString())},_applyModification:function(t,e){var r=t.apply(null,[this].concat([].slice.call(e)));return this._r=r._r,this._g=r._g,this._b=r._b,this.setAlpha(r._a),this},lighten:function(){return this._applyModification(d,arguments)},brighten:function(){return this._applyModification(p,arguments)},darken:function(){return this._applyModification(m,arguments)},desaturate:function(){return this._applyModification(l,arguments)},saturate:function(){return this._applyModification(f,arguments)},greyscale:function(){return this._applyModification(h,arguments)},spin:function(){return this._applyModification(g,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(x,arguments)},complement:function(){return this._applyCombination(b,arguments)},monochromatic:function(){return this._applyCombination(M,arguments)},splitcomplement:function(){return this._applyCombination(v,arguments)},triad:function(){return this._applyCombination(_,arguments)},tetrad:function(){return this._applyCombination(y,arguments)}},a.fromRatio=function(t,e){if("object"==typeof t){var r={};for(var n in t)t.hasOwnProperty(n)&&(r[n]="a"===n?t[n]:S(t[n]));t=r}return a(t,e)},a.equals=function(t,e){return!(!t||!e)&&a(t).toRgbString()==a(e).toRgbString()},a.random=function(){return a.fromRatio({r:U(),g:U(),b:U()})},a.mix=function(t,e,r){r=0===r?0:r||50;var n=a(t).toRgb(),i=a(e).toRgb(),s=r/100;return a({r:(i.r-n.r)*s+n.r,g:(i.g-n.g)*s+n.g,b:(i.b-n.b)*s+n.b,a:(i.a-n.a)*s+n.a})},a.readability=function(t,e){var r=a(t),n=a(e);return(i.max(r.getLuminance(),n.getLuminance())+.05)/(i.min(r.getLuminance(),n.getLuminance())+.05)},a.isReadable=function(t,e,r){var n,i,s=a.readability(t,e);switch(i=!1,(n=function(t){var e,r;return t=t||{level:"AA",size:"small"},e=(t.level||"AA").toUpperCase(),r=(t.size||"small").toLowerCase(),"AA"!==e&&"AAA"!==e&&(e="AA"),"small"!==r&&"large"!==r&&(r="small"),{level:e,size:r}}(r)).level+n.size){case"AAsmall":case"AAAlarge":i=s>=4.5;break;case"AAlarge":i=s>=3;break;case"AAAsmall":i=s>=7}return i},a.mostReadable=function(t,e,r){var n,i,s,o,u=null,c=0;i=(r=r||{}).includeFallbackColors,s=r.level,o=r.size;for(var l=0;l<e.length;l++)(n=a.readability(t,e[l]))>c&&(c=n,u=a(e[l]));return a.isReadable(t,u,{level:s,size:o})||!i?u:(r.includeFallbackColors=!1,a.mostReadable(t,["#fff","#000"],r))};var j=a.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},k=a.hexNames=function(t){var e={};for(var r in t)t.hasOwnProperty(r)&&(e[t[r]]=r);return e}(j),Y=function(){var t="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",e="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?",r="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?";return{CSS_UNIT:new RegExp(t),rgb:new RegExp("rgb"+e),rgba:new RegExp("rgba"+r),hsl:new RegExp("hsl"+e),hsla:new RegExp("hsla"+r),hsv:new RegExp("hsv"+e),hsva:new RegExp("hsva"+r),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();void 0!==t&&t.exports?t.exports=a:void 0!==(n=function(){return a}.call(e,r,e,t))&&(t.exports=n)}(Math)},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(r(66)),a=n(r(67));const s=new i.default;(0,a.default)(s),e.default=s},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.getDefaultOption=e.removeItem=e.sample=e.parseCssStyledProperties=e.maxOf=e.isPowerOf2=e.generateUuid=e.findNextPowerOf2=e.Mat4=void 0;var i=n(r(2)),a=n(r(46)),s=r(45),o=n(r(177)),u=n(r(63)),c=n(r(69)),l=n(r(178));e.Mat4=a.default,e.findNextPowerOf2=s.findNextPowerOf2,e.generateUuid=i.default,e.isPowerOf2=s.isPowerOf2,e.maxOf=s.maxOf,e.parseCssStyledProperties=o.default,e.sample=u.default,e.removeItem=c.default,e.getDefaultOption=l.default},function(t,e,r){"use strict";e.__esModule=!0;const n=new(function(t){return t&&t.__esModule?t:{default:t}}(r(70)).default);e.default=n},function(t,e,r){"use strict";e.__esModule=!0;const n="undefined"!=typeof console?"function"==typeof console.debug?(...t)=>console.debug(...t):(...t)=>console.log(...t):()=>1,i="undefined"!=typeof console?"function"==typeof console.error?(...t)=>console.error(...t):(...t)=>console.log(...t):()=>1;e.default=n,e.error=i},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.textureLibrary=e.resourceLibrary=e.entityManager=e.componentRegistry=e.utils=e.ecs=e.core=e.App=void 0;var a=i(r(77)),s=n(r(40)),o=n(r(189)),u=n(r(32)),c=i(r(31)),l=i(r(33)),f=i(r(72)),h=i(r(73));e.App=a.default,e.core=s,e.ecs=o,e.utils=u,e.componentRegistry=c.default,e.entityManager=l.default,e.resourceLibrary=f.default,e.textureLibrary=h.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(r(78)),a=n(r(89)),s=n(r(0));class o{constructor(t){Object.defineProperty(this,"gl",{value:t}),function(t){const{gl:e}=t;t.DEPTH_BITS=e.getParameter(e.DEPTH_BITS),t.STENCIL_BITS=e.getParameter(e.STENCIL_BITS),t.MAX_TEXTURE_IMAGE_UNITS=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}(this),this.resourceLibrary=new i.default(this),this.boundBuffers=new Map,this.currentProgram=0,this.enabledVertexAttribLocations=[],this.textureManager=new a.default(this),this.boundTextures=new Array(this.MAX_TEXTURE_IMAGE_UNITS);for(let t=0;t<this.boundTextures.length;t++)this.boundTextures[t]={TEXTURE_2D:null};this.readCurrentState(),this.activeTexture(0)}destroy(){this.textureManager.destroy(),this.boundBuffers.clear(),this.resourceLibrary.destroy(),(0,s.default)(this)}blend(t){const{gl:e}=this;t.enable?(this.blendEnabled||(e.enable(e.BLEND),this.blendEnabled=!0),e.blendFunc(e[t.sfactor],e[t.dfactor])):this.blendEnabled&&(e.disable(e.BLEND),this.blendEnabled=!1)}activeTexture(t){const{gl:e}=this,r=e.TEXTURE0+t;this.activeTexUnit!==r&&(this.activeTexUnit=r,e.activeTexture(this.activeTexUnit))}bindTexture2d(t){const{gl:e}=this,r=this.boundTextures[this.activeTexUnit-e.TEXTURE0];r.TEXTURE_2D!==t&&(r.TEXTURE_2D=t,e.bindTexture(e.TEXTURE_2D,t))}readCurrentState(){const{gl:t}=this;this.boundBuffers.set(t.ARRAY_BUFFER,t.getParameter(t.ARRAY_BUFFER_BINDING)),this.boundBuffers.set(t.ELEMENT_ARRAY_BUFFER,t.getParameter(t.ELEMENT_ARRAY_BUFFER_BINDING)),this.currentProgram=t.getParameter(t.CURRENT_PROGRAM),this.blendEnabled=t.getParameter(t.BLEND)}bindBuffer(t,e){this.boundBuffers.get(t)!==e&&(this.gl.bindBuffer(t,e),this.boundBuffers.set(t,e))}useProgram(t){return this.currentProgram!==t&&(this.gl.useProgram(t),this.currentProgram=t,!0)}enableVertexAttribArrays(t){const{gl:e}=this;this.enabledVertexAttribLocations.filter(e=>-1===t.indexOf(e)).forEach(r=>{e.disableVertexAttribArray(r),this.enabledVertexAttribLocations.splice(t.indexOf(r),1)}),t.forEach(t=>{-1===this.enabledVertexAttribLocations.indexOf(t)&&(e.enableVertexAttribArray(t),this.enabledVertexAttribLocations.push(t))})}}e.default=o},function(t,e){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){"use strict";e.__esModule=!0;class n{constructor(t,e=n.ARRAY_BUFFER,r=n.STATIC_DRAW){this.glx=t;const{gl:i}=t;this.target=i[e],this.usage=i[r],this.glBuffer=i.createBuffer()}bindBuffer(){this.glx.bindBuffer(this.target,this.glBuffer)}bufferData(t){this.bindBuffer(),this.glx.gl.bufferData(this.target,t,this.usage)}}e.default=n,n.ARRAY_BUFFER="ARRAY_BUFFER",n.ELEMENT_ARRAY_BUFFER="ELEMENT_ARRAY_BUFFER",n.STATIC_DRAW="STATIC_DRAW",n.DYNAMIC_DRAW="DYNAMIC_DRAW"},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=r(40),a=n(r(176)),s=n(r(0));const o=t=>{const e=t.blendStack[t.blendStack.length-1]||t.initialBlendMode;e&&!e.isEqual(t.currentBlendMode)&&(t.glx.blend(e),t.currentBlendMode=e)};class u{constructor(t){Object.defineProperty(this,"glx",{value:t}),this.shaderContext=new i.ShaderContext,this.autotouchResources=new Map,this.clearBuffer=new a.default(this.glx),this.blendStack=[],this.initialBlendMode=null,this.currentBlendMode=null,this.viewport=null}destroy(){this.shaderContext.destroy(),this.autotouchResources.clear(),this.blendStack.length=0,(0,s.default)(this)}setViewport(t,e,r,n){let{viewport:a}=this;a||(this.viewport=new i.Viewport,a=this.viewport),a.x=t,a.y=e,a.width=r,a.height=n}setInitialBlendMode(t){this.initialBlendMode=t}renderFrame(t){this.beginRenderFrame(),t(),this.endRenderFrame()}beginRenderFrame(){this.shaderContext.clear(),this.clearBuffer.reset(),this.setGlViewport(this.viewport)}endRenderFrame(){this.autotouchResources.clear()}setGlViewport(t){const{gl:e}=this.glx;t?e.viewport(t.x,t.y,t.width,t.height):e.viewport(0,0)}pushBlendMode(t){this.blendStack.push(t)}popBlendMode(){this.blendStack.pop()}useShaderProgram(t){const e=this.glx.resourceLibrary.loadProgram(t),{shaderContext:r}=this;e.use(r),e.loadUniforms(r,this),e.loadAttributes(r,this)}drawArrays(t,e,r=0){o(this);const{gl:n}=this.glx;n.drawArrays(n[t],r,e)}drawIndexed(t,e,r,n=0){o(this),this.syncBuffer(e).bindBuffer();const{gl:i}=this.glx;i.drawElements(i[t],r||e.length,i.UNSIGNED_SHORT,n*e.array.BYTES_PER_ELEMENT)}syncBuffer(t){const{resourceRef:e}=t;((t,e)=>{const{resource:r}=e;r.enableAutotouch&&(t.autotouchResources.has(e.id)||(t.autotouchResources.set(e.id,!0),r.touch()))})(this,e);const r=this.glx.resourceLibrary.loadBuffer(e);return r.sync(e,t=>t.bufferData(e.hints.typedArray)),r.resource}syncTexture(t){const e=t.resourceRef,r=this.glx.resourceLibrary.loadTexture(e);return r.sync(e,t=>t.uploadImageData()),r.resource}}e.default=u},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.Viewport=e.VOPool=e.VODescriptor=e.VOAttrDescriptor=e.VOArray=e.TextureState=e.TextureLibrary=e.TextureAtlasSpec=e.TextureAtlas=e.Texture=e.SpriteGroup=e.ShaderVariableGroup=e.ShaderVariableBufferGroup=e.ShaderVariableAlias=e.ShaderVariable=e.ShaderUniformVariable=e.ShaderTextureGroup=e.ShaderTexture2dVariable=e.ShaderSource=e.ShaderProgram=e.ShaderContext=e.ShaderAttribVariable=e.ShaderAttribValue=e.ResourceLibrary=e.Projection=e.PowerOf2Image=e.ElementIndexArray=e.BlendMode=e.AABB2=void 0;var i=n(r(41)),a=n(r(42)),s=n(r(43)),o=n(r(96)),u=n(r(44)),c=n(r(24)),l=n(r(112)),f=n(r(51)),h=n(r(52)),d=n(r(53)),p=n(r(119)),m=n(r(54)),g=n(r(17)),b=n(r(25)),_=n(r(55)),y=n(r(50)),v=n(r(4)),x=n(r(56)),M=n(r(57)),A=n(r(10)),E=n(r(120)),w=n(r(15)),T=n(r(29)),R=n(r(62)),S=n(r(64)),O=n(r(65)),P=n(r(7)),C=n(r(8)),I=n(r(175));e.AABB2=s.default,e.BlendMode=o.default,e.ElementIndexArray=u.default,e.PowerOf2Image=c.default,e.Projection=l.default,e.ResourceLibrary=f.default,e.ShaderAttribValue=h.default,e.ShaderAttribVariable=d.default,e.ShaderContext=p.default,e.ShaderProgram=m.default,e.ShaderSource=g.default,e.ShaderTexture2dVariable=b.default,e.ShaderTextureGroup=_.default,e.ShaderUniformVariable=y.default,e.ShaderVariable=v.default,e.ShaderVariableAlias=x.default,e.ShaderVariableBufferGroup=M.default,e.ShaderVariableGroup=A.default,e.SpriteGroup=E.default,e.Texture=w.default,e.TextureAtlas=T.default,e.TextureAtlasSpec=R.default,e.TextureLibrary=S.default,e.TextureState=O.default,e.VOArray=P.default,e.VOAttrDescriptor=C.default,e.VODescriptor=i.default,e.VOPool=a.default,e.Viewport=I.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=r(90),a=n(r(7)),s=n(r(91)),o=n(r(92)),u=n(r(93)),c=n(r(94));class l{constructor({vertexCount:t,attributes:e,aliases:r,proto:n}){this.vertexCount=parseInt(t,10),(0,u.default)(this,e),(0,c.default)(this,r),(0,s.default)(this,n),(0,o.default)(this),Object.keys(this.attr).forEach(t=>Object.freeze(this.attr[t])),Object.freeze(this.attr),Object.freeze(this)}createVOArray(t=1,e){return new a.default(this,t,null,e)}createVO(t){return(0,i.createVO)(Object.create(this.voPrototype),this,t)}hasAttribute(t,e){const r=this.attr[t];return r&&r.size===e}get maxIndexedVOPoolSize(){return Math.floor(65536/this.vertexCount)}}e.default=l},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(r(95)),a=n(r(2)),s=n(r(7));class o{constructor(t,e){this.id=(0,a.default)(),this.descriptor=t,this.capacity=e&&e.capacity||this.descriptor.maxIndexedVOPoolSize,this.maxAllocVOSize=e&&e.maxAllocVOSize||0,this.usage=e&&e.usage||o.USAGE.DYNAMIC;let r=e&&e.voArray;if(r){if(r.usage!==this.usage)throw new Error(`VOPool usage(=${this.usage}) mismatch with given voArray(usage=${r.usage})`)}else r=t.createVOArray(this.capacity,this.usage);this.voArray=r,this.voZero=e&&e.voZero||t.createVO(),this.voNew=e&&e.voNew||t.createVO(),this.availableVOs=[],this.usedVOs=[],(0,i.default)(this,this.maxAllocVOSize)}get usedCount(){return this.usedVOs.length}get availableCount(){return this.capacity-this.usedVOs.length}get allocatedCount(){return this.availableVOs.length+this.usedVOs.length}alloc(t=1){if(t>1){const e=[];for(let r=0;r<t;++r){const t=this.alloc(1);if(void 0===t)break;e.push(t)}return e}const e=this.availableVOs.shift();return void 0===e?this.capacity-this.allocatedCount>0?((0,i.default)(this,this.maxAllocVOSize),this.alloc()):void 0:(this.usedVOs.push(e),e.voArray.copy(this.voNew.voArray),e)}free(t){if(Array.isArray(t))return void t.forEach(t=>t.free());const e=this.usedVOs.indexOf(t);if(-1===e)return;const r=this.usedVOs.length-1;if(e!==r){const n=this.usedVOs[r];t.voArray.copy(n.voArray);const i=n.voArray;n.voArray=t.voArray,t.voArray=i,this.usedVOs.splice(e,1,n)}this.usedVOs.pop(),this.availableVOs.unshift(t),t.voArray.copy(this.voZero.voArray)}}e.default=o,o.USAGE=s.default.USAGE},function(t,e,r){"use strict";e.__esModule=!0;const n=t=>t<0?0:t;class i{constructor(t=0,e=0,r=0,n=0){t<e?(this.minX=t,this.maxX=e):(this.minX=e,this.maxX=t),r<n?(this.minY=r,this.maxY=n):(this.minY=n,this.maxY=r)}get width(){return n(this.maxX-this.minX+1)}get height(){return n(this.maxY-this.minY+1)}get centerX(){return n((this.maxX-this.minX)/2)}get centerY(){return n((this.maxY-this.minY)/2)}addPoint(t,e){t<this.minX?this.minX=t:t>this.maxX&&(this.maxX=t),e<this.minY?this.minY=e:e>this.maxY&&(this.maxY=e)}isInside(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY}isIntersection(t){return!(t.maxX<this.minX||t.minX>this.maxX||t.maxY<this.minY||t.minY>this.maxY)}}e.default=i},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(r(5)),a=n(r(38));class s{constructor(t,e=1){this.resourceRef=new i.default(this,{target:a.default.ELEMENT_ARRAY_BUFFER,usage:"static"}),this.objectCount=t,this.itemCount=e,this.length=t*e,this.array=new Uint16Array(this.length),this.resourceRef.hints.typedArray=this.array}static Generate(t,e,r=4,n=0){const i=new s(t,e.length);for(let a=0;a<t;++a)for(let t=0;t<e.length;++t)i.array[a*i.itemCount+t]=e[t]+(a+n)*r;return i}}e.default=s},function(t,e,r){"use strict";e.__esModule=!0;e.maxOf=((t,e)=>t>e?t:e),e.findNextPowerOf2=function(t){let e=1;for(;t>e;)e<<=1;return e},e.isPowerOf2=(t=>0!==t&&0==(t&t-1))},function(t,e,r){"use strict";e.__esModule=!0;const{mat4:n}=r(113),i=Math.PI/180;class a{constructor(){this.mat4=n.create(),Object.freeze(this)}identity(){n.identity(this.mat4)}ortho(t,e,r=Math.pow(2,16)){const i=t>>1,a=e>>1,s=r>>1;n.ortho(this.mat4,-i,i,-a,a,-s,s)}perspective(t,e,r=100){const i=t/e,a=e/2,s=2*Math.atan(a/r);n.perspective(this.mat4,s,i,0,2e3),n.translate(this.mat4,this.mat4,[0,0,-r])}translate(t,e,r=0){n.translate(this.mat4,this.mat4,[t,e,r])}scale(t,e,r=1){n.scale(this.mat4,this.mat4,[t,e,r])}rotateX(t){n.rotateX(this.mat4,this.mat4,t*i)}rotateY(t){n.rotateY(this.mat4,this.mat4,t*i)}rotateZ(t){n.rotateZ(this.mat4,this.mat4,t*i)}multiply(t,e){n.multiply(this.mat4,t.mat4,e.mat4)}copy(t){n.copy(this.mat4,t.mat4)}clone(){const t=new a;return t.copy(this),t}get x(){return this.mat4[12]}set x(t){this.mat4[12]=t}get y(){return this.mat4[13]}set y(t){this.mat4[13]=t}get z(){return this.mat4[14]}set z(t){this.mat4[14]=t}get sx(){return this.mat4[0]}set sx(t){this.mat4[0]=t}get sy(){return this.mat4[5]}set sy(t){this.mat4[5]=t}get sz(){return this.mat4[10]}set sz(t){this.mat4[10]=t}}e.default=a},function(t,e,r){"use strict";function n(t,e,r){let n=e[0],i=e[1],a=e[2],s=e[3],o=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=r[0],d=r[1],p=r[2],m=r[3],g=r[4],b=r[5],_=r[6],y=r[7],v=r[8];return t[0]=h*n+d*s+p*c,t[1]=h*i+d*o+p*l,t[2]=h*a+d*u+p*f,t[3]=m*n+g*s+b*c,t[4]=m*i+g*o+b*l,t[5]=m*a+g*u+b*f,t[6]=_*n+y*s+v*c,t[7]=_*i+y*o+v*l,t[8]=_*a+y*u+v*f,t}function i(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t}Object.defineProperty(e,"__esModule",{value:!0}),e.create=function(){let t=new a.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},e.clone=function(t){let e=new a.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},e.fromValues=function(t,e,r,n,i,s,o,u,c){let l=new a.ARRAY_TYPE(9);return l[0]=t,l[1]=e,l[2]=r,l[3]=n,l[4]=i,l[5]=s,l[6]=o,l[7]=u,l[8]=c,l},e.set=function(t,e,r,n,i,a,s,o,u,c){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=a,t[5]=s,t[6]=o,t[7]=u,t[8]=c,t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.transpose=function(t,e){if(t===e){let r=e[1],n=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=r,t[5]=e[7],t[6]=n,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},e.invert=function(t,e){let r=e[0],n=e[1],i=e[2],a=e[3],s=e[4],o=e[5],u=e[6],c=e[7],l=e[8],f=l*s-o*c,h=-l*a+o*u,d=c*a-s*u,p=r*f+n*h+i*d;return p?(p=1/p,t[0]=f*p,t[1]=(-l*n+i*c)*p,t[2]=(o*n-i*s)*p,t[3]=h*p,t[4]=(l*r-i*u)*p,t[5]=(-o*r+i*a)*p,t[6]=d*p,t[7]=(-c*r+n*u)*p,t[8]=(s*r-n*a)*p,t):null},e.adjoint=function(t,e){let r=e[0],n=e[1],i=e[2],a=e[3],s=e[4],o=e[5],u=e[6],c=e[7],l=e[8];return t[0]=s*l-o*c,t[1]=i*c-n*l,t[2]=n*o-i*s,t[3]=o*u-a*l,t[4]=r*l-i*u,t[5]=i*a-r*o,t[6]=a*c-s*u,t[7]=n*u-r*c,t[8]=r*s-n*a,t},e.determinant=function(t){let e=t[0],r=t[1],n=t[2],i=t[3],a=t[4],s=t[5],o=t[6],u=t[7],c=t[8];return e*(c*a-s*u)+r*(-c*i+s*o)+n*(u*i-a*o)},e.multiply=n,e.translate=function(t,e,r){let n=e[0],i=e[1],a=e[2],s=e[3],o=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=r[0],d=r[1];return t[0]=n,t[1]=i,t[2]=a,t[3]=s,t[4]=o,t[5]=u,t[6]=h*n+d*s+c,t[7]=h*i+d*o+l,t[8]=h*a+d*u+f,t},e.rotate=function(t,e,r){let n=e[0],i=e[1],a=e[2],s=e[3],o=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=Math.sin(r),d=Math.cos(r);return t[0]=d*n+h*s,t[1]=d*i+h*o,t[2]=d*a+h*u,t[3]=d*s-h*n,t[4]=d*o-h*i,t[5]=d*u-h*a,t[6]=c,t[7]=l,t[8]=f,t},e.scale=function(t,e,r){let n=r[0],i=r[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},e.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},e.fromRotation=function(t,e){let r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=-r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},e.fromQuat=function(t,e){let r=e[0],n=e[1],i=e[2],a=e[3],s=r+r,o=n+n,u=i+i,c=r*s,l=n*s,f=n*o,h=i*s,d=i*o,p=i*u,m=a*s,g=a*o,b=a*u;return t[0]=1-f-p,t[3]=l-b,t[6]=h+g,t[1]=l+b,t[4]=1-c-p,t[7]=d-m,t[2]=h-g,t[5]=d+m,t[8]=1-c-f,t},e.normalFromMat4=function(t,e){let r=e[0],n=e[1],i=e[2],a=e[3],s=e[4],o=e[5],u=e[6],c=e[7],l=e[8],f=e[9],h=e[10],d=e[11],p=e[12],m=e[13],g=e[14],b=e[15],_=r*o-n*s,y=r*u-i*s,v=r*c-a*s,x=n*u-i*o,M=n*c-a*o,A=i*c-a*u,E=l*m-f*p,w=l*g-h*p,T=l*b-d*p,R=f*g-h*m,S=f*b-d*m,O=h*b-d*g,P=_*O-y*S+v*R+x*T-M*w+A*E;return P?(P=1/P,t[0]=(o*O-u*S+c*R)*P,t[1]=(u*T-s*O-c*w)*P,t[2]=(s*S-o*T+c*E)*P,t[3]=(i*S-n*O-a*R)*P,t[4]=(r*O-i*T+a*w)*P,t[5]=(n*T-r*S-a*E)*P,t[6]=(m*A-g*M+b*x)*P,t[7]=(g*v-p*A-b*y)*P,t[8]=(p*M-m*v+b*_)*P,t):null},e.projection=function(t,e,r){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/r,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},e.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},e.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t},e.subtract=i,e.multiplyScalar=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t},e.multiplyScalarAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},e.equals=function(t,e){let r=t[0],n=t[1],i=t[2],s=t[3],o=t[4],u=t[5],c=t[6],l=t[7],f=t[8],h=e[0],d=e[1],p=e[2],m=e[3],g=e[4],b=e[5],_=e[6],y=e[7],v=e[8];return Math.abs(r-h)<=a.EPSILON*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(n-d)<=a.EPSILON*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(i-p)<=a.EPSILON*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(s-m)<=a.EPSILON*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(o-g)<=a.EPSILON*Math.max(1,Math.abs(o),Math.abs(g))&&Math.abs(u-b)<=a.EPSILON*Math.max(1,Math.abs(u),Math.abs(b))&&Math.abs(c-_)<=a.EPSILON*Math.max(1,Math.abs(c),Math.abs(_))&&Math.abs(l-y)<=a.EPSILON*Math.max(1,Math.abs(l),Math.abs(y))&&Math.abs(f-v)<=a.EPSILON*Math.max(1,Math.abs(f),Math.abs(v))};var a=r(1);const s=n;e.mul=s;const o=i;e.sub=o},function(t,e,r){"use strict";function n(){let t=new p.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t}function i(t){let e=t[0],r=t[1],n=t[2];return Math.sqrt(e*e+r*r+n*n)}function a(t,e,r){let n=new p.ARRAY_TYPE(3);return n[0]=t,n[1]=e,n[2]=r,n}function s(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}function o(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t}function u(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t}function c(t,e){let r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return Math.sqrt(r*r+n*n+i*i)}function l(t,e){let r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return r*r+n*n+i*i}function f(t){let e=t[0],r=t[1],n=t[2];return e*e+r*r+n*n}function h(t,e){let r=e[0],n=e[1],i=e[2],a=r*r+n*n+i*i;return a>0&&(a=1/Math.sqrt(a),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a),t}function d(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}Object.defineProperty(e,"__esModule",{value:!0}),e.create=n,e.clone=function(t){var e=new p.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},e.length=i,e.fromValues=a,e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},e.set=function(t,e,r,n){return t[0]=e,t[1]=r,t[2]=n,t},e.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t},e.subtract=s,e.multiply=o,e.divide=u,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},e.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t},e.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},e.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t},e.scaleAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t},e.distance=c,e.squaredDistance=l,e.squaredLength=f,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},e.normalize=h,e.dot=d,e.cross=function(t,e,r){let n=e[0],i=e[1],a=e[2],s=r[0],o=r[1],u=r[2];return t[0]=i*u-a*o,t[1]=a*s-n*u,t[2]=n*o-i*s,t},e.lerp=function(t,e,r,n){let i=e[0],a=e[1],s=e[2];return t[0]=i+n*(r[0]-i),t[1]=a+n*(r[1]-a),t[2]=s+n*(r[2]-s),t},e.hermite=function(t,e,r,n,i,a){let s=a*a,o=s*(2*a-3)+1,u=s*(a-2)+a,c=s*(a-1),l=s*(3-2*a);return t[0]=e[0]*o+r[0]*u+n[0]*c+i[0]*l,t[1]=e[1]*o+r[1]*u+n[1]*c+i[1]*l,t[2]=e[2]*o+r[2]*u+n[2]*c+i[2]*l,t},e.bezier=function(t,e,r,n,i,a){let s=1-a,o=s*s,u=a*a,c=o*s,l=3*a*o,f=3*u*s,h=u*a;return t[0]=e[0]*c+r[0]*l+n[0]*f+i[0]*h,t[1]=e[1]*c+r[1]*l+n[1]*f+i[1]*h,t[2]=e[2]*c+r[2]*l+n[2]*f+i[2]*h,t},e.random=function(t,e){e=e||1;let r=2*p.RANDOM()*Math.PI,n=2*p.RANDOM()-1,i=Math.sqrt(1-n*n)*e;return t[0]=Math.cos(r)*i,t[1]=Math.sin(r)*i,t[2]=n*e,t},e.transformMat4=function(t,e,r){let n=e[0],i=e[1],a=e[2],s=r[3]*n+r[7]*i+r[11]*a+r[15];return s=s||1,t[0]=(r[0]*n+r[4]*i+r[8]*a+r[12])/s,t[1]=(r[1]*n+r[5]*i+r[9]*a+r[13])/s,t[2]=(r[2]*n+r[6]*i+r[10]*a+r[14])/s,t},e.transformMat3=function(t,e,r){let n=e[0],i=e[1],a=e[2];return t[0]=n*r[0]+i*r[3]+a*r[6],t[1]=n*r[1]+i*r[4]+a*r[7],t[2]=n*r[2]+i*r[5]+a*r[8],t},e.transformQuat=function(t,e,r){let n=e[0],i=e[1],a=e[2],s=r[0],o=r[1],u=r[2],c=r[3],l=c*n+o*a-u*i,f=c*i+u*n-s*a,h=c*a+s*i-o*n,d=-s*n-o*i-u*a;return t[0]=l*c+d*-s+f*-u-h*-o,t[1]=f*c+d*-o+h*-s-l*-u,t[2]=h*c+d*-u+l*-o-f*-s,t},e.rotateX=function(t,e,r,n){let i=[],a=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],a[0]=i[0],a[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),a[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t},e.rotateY=function(t,e,r,n){let i=[],a=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],a[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),a[1]=i[1],a[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t},e.rotateZ=function(t,e,r,n){let i=[],a=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],a[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),a[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),a[2]=i[2],t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t},e.angle=function(t,e){let r=a(t[0],t[1],t[2]),n=a(e[0],e[1],e[2]);h(r,r),h(n,n);let i=d(r,n);return i>1?0:i<-1?Math.PI:Math.acos(i)},e.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},e.equals=function(t,e){let r=t[0],n=t[1],i=t[2],a=e[0],s=e[1],o=e[2];return Math.abs(r-a)<=p.EPSILON*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-s)<=p.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-o)<=p.EPSILON*Math.max(1,Math.abs(i),Math.abs(o))};var p=r(1);const m=s;e.sub=m;const g=o;e.mul=g;const b=u;e.div=b;const _=c;e.dist=_;const y=l;e.sqrDist=y;const v=i;e.len=v;const x=f;e.sqrLen=x;const M=function(){let t=n();return function(e,r,n,i,a,s){let o,u;for(r||(r=3),n||(n=0),u=i?Math.min(i*r+n,e.length):e.length,o=n;o<u;o+=r)t[0]=e[o],t[1]=e[o+1],t[2]=e[o+2],a(t,t,s),e[o]=t[0],e[o+1]=t[1],e[o+2]=t[2];return e}}();e.forEach=M},function(t,e,r){"use strict";function n(){let t=new d.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function i(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}function a(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t[3]=e[3]*r[3],t}function s(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t[3]=e[3]/r[3],t}function o(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function u(t,e){let r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2],a=e[3]-t[3];return Math.sqrt(r*r+n*n+i*i+a*a)}function c(t,e){let r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2],a=e[3]-t[3];return r*r+n*n+i*i+a*a}function l(t){let e=t[0],r=t[1],n=t[2],i=t[3];return Math.sqrt(e*e+r*r+n*n+i*i)}function f(t){let e=t[0],r=t[1],n=t[2],i=t[3];return e*e+r*r+n*n+i*i}function h(t,e){let r=e[0],n=e[1],i=e[2],a=e[3],s=r*r+n*n+i*i+a*a;return s>0&&(s=1/Math.sqrt(s),t[0]=r*s,t[1]=n*s,t[2]=i*s,t[3]=a*s),t}Object.defineProperty(e,"__esModule",{value:!0}),e.create=n,e.clone=function(t){let e=new d.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},e.fromValues=function(t,e,r,n){let i=new d.ARRAY_TYPE(4);return i[0]=t,i[1]=e,i[2]=r,i[3]=n,i},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},e.set=function(t,e,r,n,i){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t},e.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t},e.subtract=i,e.multiply=a,e.divide=s,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t},e.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t[3]=Math.min(e[3],r[3]),t},e.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t[3]=Math.max(e[3],r[3]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t},e.scale=o,e.scaleAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t},e.distance=u,e.squaredDistance=c,e.length=l,e.squaredLength=f,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},e.normalize=h,e.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},e.lerp=function(t,e,r,n){let i=e[0],a=e[1],s=e[2],o=e[3];return t[0]=i+n*(r[0]-i),t[1]=a+n*(r[1]-a),t[2]=s+n*(r[2]-s),t[3]=o+n*(r[3]-o),t},e.random=function(t,e){return e=e||1,t[0]=d.RANDOM(),t[1]=d.RANDOM(),t[2]=d.RANDOM(),t[3]=d.RANDOM(),h(t,t),o(t,t,e),t},e.transformMat4=function(t,e,r){let n=e[0],i=e[1],a=e[2],s=e[3];return t[0]=r[0]*n+r[4]*i+r[8]*a+r[12]*s,t[1]=r[1]*n+r[5]*i+r[9]*a+r[13]*s,t[2]=r[2]*n+r[6]*i+r[10]*a+r[14]*s,t[3]=r[3]*n+r[7]*i+r[11]*a+r[15]*s,t},e.transformQuat=function(t,e,r){let n=e[0],i=e[1],a=e[2],s=r[0],o=r[1],u=r[2],c=r[3],l=c*n+o*a-u*i,f=c*i+u*n-s*a,h=c*a+s*i-o*n,d=-s*n-o*i-u*a;return t[0]=l*c+d*-s+f*-u-h*-o,t[1]=f*c+d*-o+h*-s-l*-u,t[2]=h*c+d*-u+l*-o-f*-s,t[3]=e[3],t},e.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},e.equals=function(t,e){let r=t[0],n=t[1],i=t[2],a=t[3],s=e[0],o=e[1],u=e[2],c=e[3];return Math.abs(r-s)<=d.EPSILON*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(n-o)<=d.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(i-u)<=d.EPSILON*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(a-c)<=d.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))};var d=r(1);const p=i;e.sub=p;const m=a;e.mul=m;const g=s;e.div=g;const b=u;e.dist=b;const _=c;e.sqrDist=_;const y=l;e.len=y;const v=f;e.sqrLen=v;const x=function(){let t=n();return function(e,r,n,i,a,s){let o,u;for(r||(r=4),n||(n=0),u=i?Math.min(i*r+n,e.length):e.length,o=n;o<u;o+=r)t[0]=e[o],t[1]=e[o+1],t[2]=e[o+2],t[3]=e[o+3],a(t,t,s),e[o]=t[0],e[o+1]=t[1],e[o+2]=t[2],e[o+3]=t[3];return e}}();e.forEach=x},function(t,e,r){"use strict";e.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(r(4));class i extends n.default{constructor(t,e){super(t,n.default.TYPE.UNIFORM,e)}}e.default=i},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(r(41)),a=n(r(17)),s=n(r(0));class o{constructor(){this.descriptors=new Map,this.vertexShaders=new Map,this.fragmentShaders=new Map}destroy(){this.descriptors.clear(),this.vertexShaders.clear(),this.fragmentShaders.clear(),(0,s.default)(this)}addDescriptor(t,e){return this.descriptors.set(t,new i.default(e)),this}addVertexShader(t,e){return this.vertexShaders.set(t,new a.default(a.default.VERTEX_SHADER,e)),this}addFragmentShader(t,e){return this.fragmentShaders.set(t,new a.default(a.default.FRAGMENT_SHADER,e)),this}findDescriptor(t){return this.descriptors.get(t)}findVertexShader(t){return this.vertexShaders.get(t)}findFragmentShader(t){return this.fragmentShaders.get(t)}}e.default=o},function(t,e,r){"use strict";e.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(r(7));class i{constructor(t,e,r){this.name=t,this.descriptor=e,this.bufferSource=r}get attrDescriptor(){return this.descriptor.attr[this.name]}get resourceRef(){const{bufferSource:t}=this;return t instanceof n.default?t.resourceRef:t.voArray.resourceRef}}e.default=i},function(t,e,r){"use strict";e.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(r(4));class i extends n.default{constructor(t,e){super(t,n.default.TYPE.ATTRIB,e)}}e.default=i},function(t,e,r){"use strict";e.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(r(2));class i{constructor(t,e){this.id=(0,n.default)(),this.vertexShader=t,this.fragmentShader=e}}e.default=i},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(r(10)),a=n(r(25));class s{constructor(t,e){this.shaderLibrary=t,this.waitFor=Object.keys(e).map(t=>({shaderVarKey:t,textureId:e[t],isLoaded:!1})),this.shaderVarGroup=new i.default([]),this.shaderVarStore=new Map}get isLoaded(){return 0===this.waitFor.length&&this.shaderVarGroup.shaderVars.length>0}whenLoaded(t){this.isLoaded?t(this.shaderVarGroup):(this.waitFor.forEach(t=>{if(!t.isLoaded){const e=this.shaderLibrary.states.get(t.textureId);if(void 0===e||!e.isReady)return;const r=new a.default(t.shaderVarKey);r.texture=e.texture,this.shaderVarGroup.shaderVars.push(r),t.isLoaded=!0}}),this.waitFor=this.waitFor.filter(t=>!1===t.isLoaded),this.isLoaded&&t(this.shaderVarGroup))}}e.default=s},function(t,e,r){"use strict";e.__esModule=!0;class n{constructor(t,e){this.name=t,this.shaderVar=e}get type(){return this.shaderVar.type}get value(){return this.shaderVar.value}get serial(){return this.shaderVar.serial}}e.default=n},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(r(10)),a=n(r(53)),s=n(r(52)),o=n(r(56));class u extends i.default{constructor(t){super([]);const e=t.descriptor;let r;Object.keys(e.attr).forEach(n=>{r?this.shaderVars.push(new o.default(n,r)):(r=new a.default(n,new s.default(n,e,t)),this.shaderVars.push(r))})}get bufferSource(){return this.shaderVars[0].value.bufferSource}get serial(){return this.shaderVars[0].serial}touch(){return this.shaderVars[0].touch()}}e.default=u},function(t,e){t.exports=function(t,e){return t===e||t!=t&&e!=e}},function(t,e,r){var n=r(26),i=function(){try{var t=n(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=i},function(t,e){var r=9007199254740991,n=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){return!!(e=null==e?r:e)&&("number"==typeof t||n.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e,r){var n=r(161),i=r(23),a=Object.prototype,s=a.hasOwnProperty,o=a.propertyIsEnumerable,u=n(function(){return arguments}())?n:function(t){return i(t)&&s.call(t,"callee")&&!o.call(t,"callee")};t.exports=u},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(r(15)),a=n(r(29)),s=n(r(24));class o{constructor(t){this.jsonDef=t,this.frameNames=Object.keys(t.frames)}get frames(){return this.jsonDef.frames}get meta(){return this.jsonDef.meta}get imageUrl(){return this.meta.image}createTextureAtlas(t=null,e){return Promise.resolve(t).then(t=>{if("function"==typeof t)return Promise.resolve(t(this)).then(t=>"string"==typeof t?new s.default(t).complete:t);if("string"==typeof t)return new s.default(t).complete;if(t)return t;throw new Error("TextureAtlasSpec.createTextureAtlas(): no image found!")}).then(t=>{const r=new i.default(t,void 0,void 0,0,0,e),n=new a.default(r,this);for(let t of Object.keys(this.frames)){const{frame:e}=this.frames[t];n.addFrame(t,e.w,e.h,e.x,e.y)}return n})}static load(t,e){return window.fetch(t,e).then(t=>t.json()).then(t=>new o(t))}}e.default=o},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t){return t[Math.random()*t.length|0]}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(r(15)),a=n(r(65)),s=n(r(29)),o=n(r(25)),u=n(r(0));class c{constructor(){this.states=new Map,this.shaderVars=new Map}destroy(){this.states.clear(),this.shaderVars.clear(),(0,u.default)(this)}loadTexture(t,e=t,r){const n=new a.default(i.default.load(e,r));return this.states.set(t,n),n.promise}loadTextureAtlas(t,e=t,r){const n=s.default.load(e,null,null,r),i=new a.default(n.then(t=>(i.atlas=t,t.rootTexture)));return this.states.set(t,i),n}getTextureAtlas(t){return this.states.get(t).atlas}whenLoaded(t,e,r){const n=this.states.get(t);if(void 0===n||!n.isReady)return;let i=this.shaderVars.get(e);void 0===i&&(i=new o.default(e),this.shaderVars.set(e,i)),i.texture=n.texture,r(i)}}e.default=c},function(t,e,r){"use strict";e.__esModule=!0;class n{constructor(t,e){this.texture=null,this.atlas=null,this.promise=Promise.resolve(t).then(t=>(this.texture=t,t)).catch(t=>{console.error("TextureState error:",t)}),Promise.resolve(e).then(t=>{this.atlas=t})}get isReady(){return null!=this.texture}}e.default=n},function(t,e,r){"use strict";e.__esModule=!0;class n{constructor(){this.registry=new Map}registerComponent(t,e){return this.registry.set(t,e),this}createComponent(t,e,r){const n=this.registry.get(e);if(!n)return this;const i=n.create(t,r);return t.setComponent(e,i,this),this}updateComponent(t,e,r){const n=this.registry.get(e);if(!n)return this;const i=t[e];return n.update(i,r),this}createOrUpdateComponent(t,e,r){return t.getComponentRegistry(e)===this?this.updateComponent(t,e,r):this.createComponent(t,e,r),this}destroyComponent(t,e){const r=this.registry.get(e);if(!r)return this;const n=t[e];return r.destroy(n),this}}e.default=n},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.default=function(t){t.registerComponent("clear",i.default.createCssStyledPropsComponent(a.default))};var i=n(r(68)),a=n(r(179))},function(t,e,r){"use strict";e.__esModule=!0;var n=r(32);class i{static createCssStyledPropsComponent(t){return{create:(e,r)=>new t(e,(0,n.parseCssStyledProperties)(r)),update(t,e){t.update((0,n.parseCssStyledProperties)(e))},destroy(){}}}static createComponent(t){return{create:(e,r)=>new t(e,r),update(t,e){t.update(e)},destroy(){}}}}e.default=i},function(t,e,r){"use strict";e.__esModule=!0,e.default=((t,e)=>{const r=t.indexOf(e);r>-1&&t.splice(r,1)})},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(r(71)),a=n(r(0));class s{constructor(){this.entities=new Map}createEntity(){const t=new i.default;return this.entities.set(t.id,t),t}getEntity(t){return this.entities.get(t)}destroyEntity(t){const e=this.entities.get(t);return!!e&&(e.destroy(),this.entities.delete(t),!0)}destroyAllEntities(){for(const t of this.entities.keys())this.destroyEntity(t)}destroy(){this.destroyAllEntities(),this.entities.clear(),(0,a.default)(this)}}e.default=s},function(t,e,r){"use strict";e.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(r(2));const i=r(18);class a{constructor(){this.registries=new Map,this.id=(0,n.default)(),i(this)}hasComponent(t){return this.registries.has(t)}getComponentRegistry(t){return this.registries.get(t)}setComponent(t,e,r){if(this[t])throw new Error(`Component name "${t}" is already assigned!`);return this.registries.set(t,r),this[t]=e,e.connectedEntity&&e.connectedEntity(this),this}queryComponent(t,e){const r=this[t];return r&&e?e(r):r}destroyComponent(t){if(this.registries.has(t)){const e=this.registries.get(t);this.registries.delete(t),e&&e.destroyComponent(this,t);const r=this[t];delete this[t],r.disconnectedEntity&&r.disconnectedEntity(this)}return this}destroy(){this.emit("destroy",this),(t=>{for(const e of t.registries.keys())t.destroyComponent(e)})(this)}}e.default=a},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(r(51)),a=n(r(180));const s=new i.default;(0,a.default)(s),e.default=s},function(t,e,r){"use strict";e.__esModule=!0;const n=new(function(t){return t&&t.__esModule?t:{default:t}}(r(64)).default);e.default=n},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(r(31)),a=n(r(33)),s=n(r(69));class o extends HTMLElement{constructor(t){const e=super(t);return Object.defineProperties(e,{attributeValuesCache:{value:new Map},attributeNamesCache:{value:[]},_componentRegistry:{value:null,writable:!0},_entityManager:{value:null,writable:!0},_entity:{value:null,writable:!0}}),console.log("[EntityElement] constructor, self=",e),e}get componentRegistry(){return this._componentRegistry||i.default}set componentRegistry(t){this._componentRegistry=t}get entityManager(){return this._entityManager||a.default}set entityManager(t){this._entityManager=t}get entity(){const t=this._entity;return t||(this._entity=this.entityManager.createEntity(),this._entity)}updateEntity(){const t=this.getAttributeNames(),e=this.attributeNamesCache.slice(0);this.attributeNamesCache.length=0,t.forEach(t=>{(0,s.default)(e,t),this.attributeNamesCache.push(t);const{attributeValuesCache:r}=this,n=r.get(t),i=this.getAttribute(t);n!==i&&(r.set(t,i),console.log("[EntityElement] attributeValueChanged:",t,"value=",i,"oldValue=",n),this.componentRegistry.createOrUpdateComponent(this.entity,t,i))}),e.forEach(t=>{this.entity.destroyComponent(t),this.attributeValuesCache.delete(t),console.log("[EntityElement] attributeRemoved:",t)})}renderFrame(t,e,r){this.updateEntity(),this.entity.emit("renderFrame",e);const{children:n}=this;for(let r=0;r<n.length;r++){const i=n[r];i.renderFrame&&i.renderFrame(t,e,this)}}connectedCallback(){console.log("[EntityElement] connectedCallback()")}disconnectedCallback(){console.log("[EntityElement] disconnectedCallback()")}}e.default=o},function(t,e,r){t.exports=r(76)},function(t,e,r){"use strict";e.__esModule=!0;var n=r(35);Object.keys(n).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}})});var i=function(t){return t&&t.__esModule?t:{default:t}}(r(190));e.default=i.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(r(36)),a=n(r(39)),s=n(r(31)),o=n(r(33)),u=n(r(72)),c=n(r(73)),l=n(r(67)),f=n(r(0)),h=r(34);const d=r(18),p=r(30),m=()=>window.performance.now()/1e3;class g{constructor(t){d(this);const e=((t,e,r)=>t&&e in t?t[e]:"function"==typeof r?r():r).bind(null,t);this.componentRegistry=s.default,this.entityManager=o.default,this.resourceLibrary=u.default,this.textureLibrary=c.default,this.canvas=e("canvas",()=>document.createElement("canvas")),this.contextAttributes={alpha:e("alpha",!1),depth:e("depth",!1),stencil:e("stencil",!1),antialias:e("antialias",!1),premultipliedAlpha:e("premultipliedAlpha",!1),preserveDrawingBuffer:e("preserveDrawingBuffer",!1)},this.time=e("time",0),this.lastFrameTime=0,this.timeFrameOffset=0,this.frameNo=e("frameNo",0),this.clearColor=e("clearColor"),this.createGlContext=e("createGlContext",()=>()=>(function(t,e){let r;try{r=t.getContext("webgl",e)}catch(t){(0,h.error)(t)}if(!r)try{r=t.getContext("experimental-webgl",e)}catch(t){(0,h.error)(t)}if(!r)throw new Error("cannot create webgl1 context");return r})(this.canvas,this.contextAttributes)),(0,l.default)(this.componentRegistry),this.entity=this.entityManager.createEntity(),this.entity.setComponent("blitpunk",this),this.entity.setComponent("resourceLibrary",this.resourceLibrary),this.entity.setComponent("textureLibrary",this.textureLibrary),this.componentRegistry.createComponent(this.entity,"children"),this.el=null,this.started=!1,this.stopped=!1,this.destroyed=!1}get clearColor(){return this.renderer?this.renderer.clearColor:this._clearColor}set clearColor(t){this._clearColor=null==t?t:p(t),this.renderer&&this.renderer.setClearColor(this._clearColor)}get canStart(){return(!this.started||this.started&&this.stopped)&&!this.destroyed}start(t=this){if(this.canStart){if(this.stopped)return this.stopped=!1,this.resize(),void this.requestAnimate();this.el=t,this.started=!0,this.glx=new i.default(this.createGlContext()),this.renderer=new a.default(this.glx),this._clearColor&&this.renderer.setClearColor(this._clearColor),this.startTime=m(),this.el.appendChild(this.canvas),this.resize(),this.requestAnimate()}}requestAnimate(){this.rafSubscription=window.requestAnimationFrame(()=>this.animate())}cancelAnimate(){window.cancelAnimationFrame(this.rafSubscription)}get canStop(){return this.started&&!this.stopped&&!this.destroyed}stop(){this.canStop&&(this.stopped=!0,this.cancelAnimate())}destroy(){if(!this.destroyed){this.cancelAnimate();try{this.glx.destroy()}catch(t){(0,h.error)("blitpunk->destroy(WebGlContext) panic!",t)}try{this.renderer.destroy()}catch(t){(0,h.error)("blitpunk->destroy(WebGlRenderer) panic!",t)}this.el.removeChild(this.canvas),(0,f.default)(this)}}get canAnimate(){return this.started&&!this.stopped&&!this.destroyed}animate(){this.canAnimate&&(this.renderFrame(),this.requestAnimate())}renderFrame(){++this.frameNo,this.time=m()-this.startTime,this.lastFrameTime&&(this.timeFrameOffset=this.time-this.lastFrameTime),this.lastFrameTime=this.time,this.resize(),this.renderer.renderFrame(this.entity,this)}resize(){const t="inline"===window.getComputedStyle(this.el,null).display?this.el.parentNode:this.el,{canvas:e}=this,r=window.devicePixelRatio||1;let n=t.clientWidth,i=t.clientHeight;e.style.width=n+"px",e.style.height=i+"px";const a=Math.round(n*r),s=Math.round(i*r);a===e.width&&s===e.height||(e.width=a,e.height=s),a===this.width&&s===this.height||(this.width=a,this.height=s,this.glx.gl.viewport(0,0,a,s))}}e.default=g},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(r(5)),a=n(r(83)),s=n(r(85)),o=n(r(38)),u=n(r(88)),c=n(r(0));const l=Object.freeze({static:o.default.STATIC_DRAW,dynamic:o.default.DYNAMIC_DRAW});class f{constructor(t){Object.defineProperty(this,"glx",{value:t}),this.vertexShader=new Map,this.fragmentShader=new Map,this.shaderProgram=new Map,this.buffer=new Map,this.texture=new Map}destroy(){this.texture.clear(),this.buffer.clear(),this.shaderProgram.clear(),this.fragmentShader.clear(),this.vertexShader.clear(),(0,c.default)(this)}loadVertexShader(t){let e=this.vertexShader.get(t.id);return e||(e=new a.default(this.glx,t),this.vertexShader.set(t.id,e)),e}loadFragementShader(t){let e=this.fragmentShader.get(t.id);return e||(e=new a.default(this.glx,t),this.vertexShader.set(t.id,e)),e}loadProgram(t){let e=this.shaderProgram.get(t.id);return e||(e=new s.default(this.glx,t),this.shaderProgram.set(t.id,e)),e}loadBuffer(t){let e=this.buffer.get(t.id);if(!e){const r=t.hints.target||o.default.ARRAY_BUFFER,n=new o.default(this.glx,r,l[t.hints.usage]);e=new i.default(n,{id:t.id,serial:0}),this.buffer.set(t.id,e)}return e}findBuffer(t){return this.buffer.get(t.id)}loadTexture(t){let e=this.texture.get(t.id);if(!e){const r=new u.default(this.glx,t.resource.imgEl,t.hints.flipY,t.hints.repeatable,t.hints.premultiplyAlpha,t.hints.nearest);e=new i.default(r,{id:t.id,serial:0}),this.texture.set(t.id,e)}return e}}e.default=f},function(t,e,r){var n=r(80),i=r(81);t.exports=function(t,e,r){var a=e&&r||0;"string"==typeof t&&(e="binary"==t?new Array(16):null,t=null);var s=(t=t||{}).random||(t.rng||n)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,e)for(var o=0;o<16;++o)e[a+o]=s[o];return e||i(s)}},function(t,e,r){(function(e){var r,n=e.crypto||e.msCrypto;if(n&&n.getRandomValues){var i=new Uint8Array(16);r=function(){return n.getRandomValues(i),i}}if(!r){var a=new Array(16);r=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),a[e]=t>>>((3&e)<<3)&255;return a}}t.exports=r}).call(e,r(37))},function(t,e){for(var r=[],n=0;n<256;++n)r[n]=(n+256).toString(16).substr(1);t.exports=function(t,e){var n=e||0,i=r;return i[t[n++]]+i[t[n++]]+i[t[n++]]+i[t[n++]]+"-"+i[t[n++]]+i[t[n++]]+"-"+i[t[n++]]+i[t[n++]]+"-"+i[t[n++]]+i[t[n++]]+"-"+i[t[n++]]+i[t[n++]]+i[t[n++]]+i[t[n++]]+i[t[n++]]+i[t[n++]]}},function(t,e,r){"use strict";e.__esModule=!0;class n{constructor(t=1){this.value=t}touch(){++this.value}}e.default=n},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(r(17)),a=n(r(84));class s{constructor(t,e){if(this.glx=t,!(e instanceof i.default))throw new Error("WebGlShader panic! source must be an instance of ShaderSource!");this.source=e;const{gl:r}=t;this.shaderType=r[e.type],this.glShader=r.createShader(this.shaderType),function(t){const{gl:e}=t.glx,{glShader:r,source:n}=t,i=(0,a.default)({glx:t.glx},n.source);if(e.shaderSource(r,i),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS)){const i=e.getShaderInfoLog(r);console.error(i),console.group("shader-info"),console.debug("shaderSource",t),console.log(n),console.groupEnd();const a=new Error("WebGlShader compile panic!");throw a.webGlShader=t,a.shaderInfoLog=i,a}}(this),Object.freeze(this)}}e.default=s},function(t,e,r){"use strict";function n(t,e){return"string"==typeof e?e:"function"==typeof e?n(t,e(t)):Array.isArray(e)?e.map(n.bind(null,t)).join("\n"):e+""}e.__esModule=!0,e.default=n},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(r(86)),a=n(r(87));class s{constructor(t,e){this.glx=t,this.vertexShader=t.resourceLibrary.loadVertexShader(e.vertexShader),this.fragmentShader=t.resourceLibrary.loadFragementShader(e.fragmentShader);const{gl:r}=t;this.glProgram=r.createProgram(),function(t,e,r){const{gl:n}=t.glx,{glProgram:i}=t;if(n.attachShader(i,e),n.attachShader(i,r),n.linkProgram(i),!n.getProgramParameter(i,n.LINK_STATUS)){const e=new Error("WebGlProgram link panic!");throw e.webGlProgram=t,e}}(this,this.vertexShader.glShader,this.fragmentShader.glShader),function(t){const{gl:e}=t.glx,r=e.getProgramParameter(t.glProgram,e.ACTIVE_UNIFORMS);t.uniforms={},t.uniformNames=[];for(let e=0;e<r;++e){const r=new i.default(t,e);t.uniforms[r.name]=r,t.uniformNames.push(r.name)}Object.freeze(t.uniforms)}(this),function(t){const{gl:e}=t.glx,r=e.getProgramParameter(t.glProgram,e.ACTIVE_ATTRIBUTES);t.attributes={},t.attributeNames=[],t.attributeLocations=[];for(let e=0;e<r;++e){const r=new a.default(t,e);t.attributes[r.name]=r,t.attributeNames.push(r.name),t.attributeLocations.push(r.location)}Object.freeze(t.attributes)}(this),Object.freeze(this)}use(){const{glx:t}=this;return!!t.useProgram(this.glProgram)&&(t.enableVertexAttribArrays(this.attributeLocations),!0)}loadUniforms(t,e){this.uniformNames.forEach(r=>{let n=t.curUniform(r);null==n&&(null==(n=t.curTex2d(r))&&console.error("[WebGlProgram] could not load uniform:",r),n.syncTextureAndValue(e)),this.uniforms[r].setValue(n.value)})}loadAttributes(t,e){this.attributeNames.forEach(r=>{const n=t.curAttrib(r).value;e.syncBuffer(n).bindBuffer(),this.attributes[r].vertexAttribPointer(n.descriptor)})}}e.default=s},function(t,e,r){"use strict";e.__esModule=!0;class n{constructor(t,e){this.program=t,this.glx=t.glx;const{gl:r}=t.glx,{glProgram:n}=t,{name:i,size:a,type:s}=r.getActiveUniform(n,e);this.name=i,this.size=a,this.type=s,this.location=r.getUniformLocation(n,i),this.setValue=function(t){const{type:e,location:r}=t,{gl:n}=t.glx;switch(e){case n.FLOAT:return t=>n.uniform1f(r,t);case n.FLOAT_VEC2:return t=>n.uniform2f(r,t[0],t[1]);case n.FLOAT_VEC3:return t=>n.uniform3f(r,t[0],t[1],t[2]);case n.FLOAT_VEC4:return t=>n.uniform4f(r,t[0],t[1],t[2],t[3]);case n.FLOAT_MAT4:return t=>n.uniformMatrix4fv(r,n.FALSE,t.mat4);case n.SAMPLER_2D:return t=>n.uniform1i(r,t)}const i=new Error(`WebGlUniform unknown uniform type:${e}`);throw i.webGlUniform=t,i}(this),Object.freeze(this)}}e.default=n},function(t,e,r){"use strict";e.__esModule=!0;var n=r(6);class i{constructor(t,e){this.program=t,this.glx=t.glx;const{gl:r}=t.glx,{glProgram:n}=t,{name:i,size:a,type:s}=r.getActiveAttrib(n,e);this.name=i,this.size=a,this.type=s,this.location=r.getAttribLocation(n,i),Object.freeze(this)}vertexAttribPointer(t){const{gl:e}=this.glx,r=t.attr[this.name],i=((t,e)=>t[n.GL_ITEM_TYPES[e]])(e,r.type);e.vertexAttribPointer(this.location,r.size,i,!1,t.bytesPerVertex,r.byteOffset)}}e.default=i},function(t,e,r){"use strict";e.__esModule=!0;class n{constructor(t,e,r=!1,n=!1,i=!1,a=!1){this.glx=t,this.imgEl=e,this.flipY=r,this.repeatable=n,this.premultiplyAlpha=i,this.nearest=a,this.isInitialized=!1,this.glTexObj=t.gl.createTexture(),this.texUnit=-1}bind(){return this.glx.textureManager.bindWebGlTexture(this)}uploadImageData(){if(null==this.imgEl)return;this.isInitialized||(!function(t){t.bind();const{gl:e}=t.glx;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha);const r=t.repeatable?e.REPEAT:e.CLAMP_TO_EDGE;e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,r);const n=t.nearest?e.NEAREST:e.LINEAR;e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,n),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t.imgEl.width,t.imgEl.height,0,e.RGBA,e.UNSIGNED_BYTE,null)}(this),this.isInitialized=!0),this.bind();const{gl:t}=this.glx;t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this.imgEl)}}e.default=n},function(t,e,r){"use strict";e.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(r(0));class i{constructor(t){Object.defineProperty(this,"glx",{value:t}),this.boundTextures=new Array(t.MAX_TEXTURE_IMAGE_UNITS);for(let t=0;t<this.boundTextures.length;++t)this.boundTextures[t]=null;this.lastBoundTexUnit=0}destroy(){this.boundTextures.length=0,(0,n.default)(this)}bindWebGlTexture(t){let e=this.boundTextures.indexOf(t);if(e<0){for(let r=0;r<this.boundTextures.length;++r)if(!this.boundTextures[r]){e=r,this.boundTextures[r]=t;break}if(e<0){e=this.lastBoundTexUnit;let t=this.boundTextures[e];t&&(t.texUnit=-1),this.lastBoundTexUnit=(this.lastBoundTexUnit+1)%this.glx.MAX_TEXTURE_IMAGE_UNITS}this.glx.activeTexture(e),this.glx.bindTexture2d(t.glTexObj),t.texUnit=e}return e}}e.default=i},function(t,e,r){"use strict";e.__esModule=!0,e.createVO=function(t,e,r){if(t.descriptor=e||(r?r.descriptor:null),!t.descriptor)throw new Error("could not detect VODescriptor!");if(t.voArray=r||t.descriptor.createVOArray(),t.descriptor!==t.voArray.descriptor&&(t.descriptor.vertexCount!==t.voArray.descriptor.vertexCount||t.descriptor.vertexAttrCount!==t.voArray.descriptor.vertexAttrCount))throw new Error("Incompatible vertex object descriptors!");return t}},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t,e){const r={toArray:{value:function(e){const r=[],n=Array.isArray(e)?e.map(e=>t.attr[e]):t.attrList,i=n.length;for(let e=0;e<t.vertexCount;++e)for(let t=0;t<i;++t){const i=n[t];for(let t=0;t<i.size;++t)r.push(i.getValue(this,e,t))}return r}}};Object.keys(t.attr).forEach(e=>{const i=t.attr[e];n.default.defineProperties(i,r,t)}),t.voPrototype=Object.create("object"==typeof e?e:{},r)};var n=function(t){return t&&t.__esModule?t:{default:t}}(r(8))},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t){t.typedArrays={float32:!1,int16:!1,int32:!1,int8:!1,uint16:!1,uint32:!1,uint8:!1},Object.keys(t.attr).forEach(e=>{t.typedArrays[t.attr[e].type]=!0}),Object.freeze(t.typedArrays),t.typeList=Object.keys(t.typedArrays).filter(e=>t.typedArrays[e]).sort()}},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t,e){if(t.attr={},t.attrNames=[],Array.isArray(e)){let r=0,a=0;for(let s=0;s<e.length;++s){const o=e[s];if(void 0===o.size)throw new Error("vertex object attribute descriptor has no size!");const u=o.type||"float32";void 0!==o.name&&(t.attrNames.push(o.name),t.attr[o.name]=new i.default(o.name,u,o.size,r,a,!!o.uniform,o.attrNames)),r+=o.size,a+=n.BYTES_PER_ELEMENT[u]*o.size}t.rightPadBytesPerVertex=a%4>0?4-a%4:0,t.bytesPerVertex=a+t.rightPadBytesPerVertex,t.bytesPerVO=t.bytesPerVertex*t.vertexCount,t.vertexAttrCount=r}t.attrList=t.attrNames.map(e=>t.attr[e])};var n=r(6),i=function(t){return t&&t.__esModule?t:{default:t}}(r(8))},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t,e){"object"==typeof e&&Object.keys(e).forEach(r=>{let i=e[r];"string"==typeof i?void 0!==(i=t.attr[i])&&(t.attr[r]=i):t.attr[r]=new n.default(r,i.type,i.size,i.offset,i.byteOffset,!!i.uniform,i.attrNames)})};var n=function(t){return t&&t.__esModule?t:{default:t}}(r(8))},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t,e=0){const r=t.capacity-t.usedCount-t.allocatedCount,n=t.allocatedCount+(e>0&&e<r?e:r);for(let e=t.allocatedCount;e<n;e++){let r=t.voArray.subarray(e),n=t.descriptor.createVO(r);n.free=t.free.bind(t,n),t.availableVOs.push(n)}}},function(t,e,r){"use strict";e.__esModule=!0;const n=r(97);class i{constructor(t,e=null,r=null){this.enable=t,this.sfactor=e,this.dfactor=r}set sfactor(t){this._sfactor="string"==typeof t?n(t).toUpperCase():void 0}get sfactor(){return this._sfactor}set dfactor(t){this._dfactor="string"==typeof t?n(t).toUpperCase():void 0}get dfactor(){return this._dfactor}isEqual(t){return t&&this.enable===t.enable&&this._sfactor===t._sfactor&&this._dfactor===t._dfactor}}e.default=i},function(t,e,r){var n=r(98)(function(t,e,r){return t+(r?"_":"")+e.toLowerCase()});t.exports=n},function(t,e,r){var n=r(99),i=r(100),a=r(108),s=RegExp("[']","g");t.exports=function(t){return function(e){return n(a(i(e).replace(s,"")),t,"")}}},function(t,e){t.exports=function(t,e,r,n){var i=-1,a=null==t?0:t.length;for(n&&a&&(r=t[++i]);++i<a;)r=e(r,t[i],i,t);return r}},function(t,e,r){var n=r(101),i=r(19),a=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,s=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");t.exports=function(t){return(t=i(t))&&t.replace(a,n).replace(s,"")}},function(t,e,r){var n=r(102)({"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"});t.exports=n},function(t,e){t.exports=function(t){return function(e){return null==t?void 0:t[e]}}},function(t,e,r){function n(t){if("string"==typeof t)return t;if(s(t))return a(t,n)+"";if(o(t))return l?l.call(t):"";var e=t+"";return"0"==e&&1/t==-u?"-0":e}var i=r(9),a=r(105),s=r(3),o=r(21),u=1/0,c=i?i.prototype:void 0,l=c?c.toString:void 0;t.exports=n},function(t,e,r){(function(e){var r="object"==typeof e&&e&&e.Object===Object&&e;t.exports=r}).call(e,r(37))},function(t,e){t.exports=function(t,e){for(var r=-1,n=null==t?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}},function(t,e,r){var n=r(9),i=Object.prototype,a=i.hasOwnProperty,s=i.toString,o=n?n.toStringTag:void 0;t.exports=function(t){var e=a.call(t,o),r=t[o];try{t[o]=void 0;var n=!0}catch(t){}var i=s.call(t);return n&&(e?t[o]=r:delete t[o]),i}},function(t,e){var r=Object.prototype.toString;t.exports=function(t){return r.call(t)}},function(t,e,r){var n=r(109),i=r(110),a=r(19),s=r(111);t.exports=function(t,e,r){return t=a(t),void 0===(e=r?void 0:e)?i(t)?s(t):n(t):t.match(e)||[]}},function(t,e){var r=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;t.exports=function(t){return t.match(r)||[]}},function(t,e){var r=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;t.exports=function(t){return r.test(t)}},function(t,e){var r="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",n="["+r+"]",i="\\d+",a="[\\u2700-\\u27bf]",s="[a-z\\xdf-\\xf6\\xf8-\\xff]",o="[^\\ud800-\\udfff"+r+i+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",u="(?:\\ud83c[\\udde6-\\uddff]){2}",c="[\\ud800-\\udbff][\\udc00-\\udfff]",l="[A-Z\\xc0-\\xd6\\xd8-\\xde]",f="(?:"+s+"|"+o+")",h="(?:"+l+"|"+o+")",d="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",p="[\\ufe0e\\ufe0f]?"+d+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",u,c].join("|")+")[\\ufe0e\\ufe0f]?"+d+")*"),m="(?:"+[a,u,c].join("|")+")"+p,g=RegExp([l+"?"+s+"+(?:['](?:d|ll|m|re|s|t|ve))?(?="+[n,l,"$"].join("|")+")",h+"+(?:['](?:D|LL|M|RE|S|T|VE))?(?="+[n,l+f,"$"].join("|")+")",l+"?"+f+"+(?:['](?:d|ll|m|re|s|t|ve))?",l+"+(?:['](?:D|LL|M|RE|S|T|VE))?","\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)","\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)",i,m].join("|"),"g");t.exports=function(t){return t.match(g)||[]}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(r(46)),a=n(r(50));class s{constructor({desiredWidth:t,desiredHeight:e,pixelRatio:r,sizeFit:n,uniformName:s}){this.desiredWidth=t,this.desiredHeight=e,this.pixelRatio=r,this.sizeFit=n,this.uniform=new a.default(s||"viewMatrix",new i.default),this.width=0,this.height=0}updateOrtho(t,e){t===this.width&&e===this.height||(this.width=t,this.height=e,this.uniform.value.perspective(t,e,100),this.uniform.touch())}update(t,e){if("fill"===this.sizeFit&&this.desiredWidth>0&&this.desiredHeight>0)this.updateOrtho(this.desiredWidth,this.desiredHeight);else if(("cover"===this.sizeFit||"contain"===this.sizeFit)&&this.desiredWidth>=0&&this.desiredHeight>=0){const r=e/t,n=this.desiredHeight/this.desiredWidth,i="cover"===this.sizeFit;let a=this.desiredWidth,s=this.desiredHeight;if(0===this.desiredWidth&&this.desiredHeight||r<n){if(a=this.desiredHeight/e*t,i){const t=this.desiredWidth/a;a*=t,s*=t}}else if((this.desiredWidth&&0===this.desiredHeight||r>n)&&(s=this.desiredWidth/t*e,i)){const t=this.desiredHeight/s;a*=t,s*=t}this.updateOrtho(a,s)}}}e.default=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),i=r(114),a=r(115),s=r(47),o=r(116),u=r(117),c=r(118),l=r(48),f=r(49);r.d(e,"glMatrix",function(){return n}),r.d(e,"mat2",function(){return i}),r.d(e,"mat2d",function(){return a}),r.d(e,"mat3",function(){return s}),r.d(e,"mat4",function(){return o}),r.d(e,"quat",function(){return u}),r.d(e,"vec2",function(){return c}),r.d(e,"vec3",function(){return l}),r.d(e,"vec4",function(){return f})},function(t,e,r){"use strict";function n(t,e,r){let n=e[0],i=e[1],a=e[2],s=e[3],o=r[0],u=r[1],c=r[2],l=r[3];return t[0]=n*o+a*u,t[1]=i*o+s*u,t[2]=n*c+a*l,t[3]=i*c+s*l,t}function i(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}Object.defineProperty(e,"__esModule",{value:!0}),e.create=function(){let t=new a.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},e.clone=function(t){let e=new a.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},e.fromValues=function(t,e,r,n){let i=new a.ARRAY_TYPE(4);return i[0]=t,i[1]=e,i[2]=r,i[3]=n,i},e.set=function(t,e,r,n,i){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t},e.transpose=function(t,e){if(t===e){let r=e[1];t[1]=e[2],t[2]=r}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},e.invert=function(t,e){let r=e[0],n=e[1],i=e[2],a=e[3],s=r*a-i*n;return s?(s=1/s,t[0]=a*s,t[1]=-n*s,t[2]=-i*s,t[3]=r*s,t):null},e.adjoint=function(t,e){let r=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=r,t},e.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},e.multiply=n,e.rotate=function(t,e,r){let n=e[0],i=e[1],a=e[2],s=e[3],o=Math.sin(r),u=Math.cos(r);return t[0]=n*u+a*o,t[1]=i*u+s*o,t[2]=n*-o+a*u,t[3]=i*-o+s*u,t},e.scale=function(t,e,r){let n=e[0],i=e[1],a=e[2],s=e[3],o=r[0],u=r[1];return t[0]=n*o,t[1]=i*o,t[2]=a*u,t[3]=s*u,t},e.fromRotation=function(t,e){let r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t},e.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},e.LDU=function(t,e,r,n){return t[2]=n[2]/n[0],r[0]=n[0],r[1]=n[1],r[3]=n[3]-t[2]*r[1],[t,e,r]},e.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t},e.subtract=i,e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},e.equals=function(t,e){let r=t[0],n=t[1],i=t[2],s=t[3],o=e[0],u=e[1],c=e[2],l=e[3];return Math.abs(r-o)<=a.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-u)<=a.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(i-c)<=a.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(s-l)<=a.EPSILON*Math.max(1,Math.abs(s),Math.abs(l))},e.multiplyScalar=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t},e.multiplyScalarAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t};var a=r(1);const s=n;e.mul=s;const o=i;e.sub=o},function(t,e,r){"use strict";function n(t,e,r){let n=e[0],i=e[1],a=e[2],s=e[3],o=e[4],u=e[5],c=r[0],l=r[1],f=r[2],h=r[3],d=r[4],p=r[5];return t[0]=n*c+a*l,t[1]=i*c+s*l,t[2]=n*f+a*h,t[3]=i*f+s*h,t[4]=n*d+a*p+o,t[5]=i*d+s*p+u,t}function i(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t}Object.defineProperty(e,"__esModule",{value:!0}),e.create=function(){let t=new a.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},e.clone=function(t){let e=new a.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},e.fromValues=function(t,e,r,n,i,s){let o=new a.ARRAY_TYPE(6);return o[0]=t,o[1]=e,o[2]=r,o[3]=n,o[4]=i,o[5]=s,o},e.set=function(t,e,r,n,i,a,s){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=a,t[5]=s,t},e.invert=function(t,e){let r=e[0],n=e[1],i=e[2],a=e[3],s=e[4],o=e[5],u=r*a-n*i;return u?(u=1/u,t[0]=a*u,t[1]=-n*u,t[2]=-i*u,t[3]=r*u,t[4]=(i*o-a*s)*u,t[5]=(n*s-r*o)*u,t):null},e.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},e.multiply=n,e.rotate=function(t,e,r){let n=e[0],i=e[1],a=e[2],s=e[3],o=e[4],u=e[5],c=Math.sin(r),l=Math.cos(r);return t[0]=n*l+a*c,t[1]=i*l+s*c,t[2]=n*-c+a*l,t[3]=i*-c+s*l,t[4]=o,t[5]=u,t},e.scale=function(t,e,r){let n=e[0],i=e[1],a=e[2],s=e[3],o=e[4],u=e[5],c=r[0],l=r[1];return t[0]=n*c,t[1]=i*c,t[2]=a*l,t[3]=s*l,t[4]=o,t[5]=u,t},e.translate=function(t,e,r){let n=e[0],i=e[1],a=e[2],s=e[3],o=e[4],u=e[5],c=r[0],l=r[1];return t[0]=n,t[1]=i,t[2]=a,t[3]=s,t[4]=n*c+a*l+o,t[5]=i*c+s*l+u,t},e.fromRotation=function(t,e){let r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t[4]=0,t[5]=0,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t},e.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t},e.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},e.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t},e.subtract=i,e.multiplyScalar=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t},e.multiplyScalarAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]},e.equals=function(t,e){let r=t[0],n=t[1],i=t[2],s=t[3],o=t[4],u=t[5],c=e[0],l=e[1],f=e[2],h=e[3],d=e[4],p=e[5];return Math.abs(r-c)<=a.EPSILON*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(n-l)<=a.EPSILON*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(i-f)<=a.EPSILON*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(s-h)<=a.EPSILON*Math.max(1,Math.abs(s),Math.abs(h))&&Math.abs(o-d)<=a.EPSILON*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(u-p)<=a.EPSILON*Math.max(1,Math.abs(u),Math.abs(p))};var a=r(1);const s=n;e.mul=s;const o=i;e.sub=o},function(t,e,r){"use strict";function n(t,e,r){let n=e[0],i=e[1],a=e[2],s=e[3],o=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=e[9],d=e[10],p=e[11],m=e[12],g=e[13],b=e[14],_=e[15],y=r[0],v=r[1],x=r[2],M=r[3];return t[0]=y*n+v*o+x*f+M*m,t[1]=y*i+v*u+x*h+M*g,t[2]=y*a+v*c+x*d+M*b,t[3]=y*s+v*l+x*p+M*_,y=r[4],v=r[5],x=r[6],M=r[7],t[4]=y*n+v*o+x*f+M*m,t[5]=y*i+v*u+x*h+M*g,t[6]=y*a+v*c+x*d+M*b,t[7]=y*s+v*l+x*p+M*_,y=r[8],v=r[9],x=r[10],M=r[11],t[8]=y*n+v*o+x*f+M*m,t[9]=y*i+v*u+x*h+M*g,t[10]=y*a+v*c+x*d+M*b,t[11]=y*s+v*l+x*p+M*_,y=r[12],v=r[13],x=r[14],M=r[15],t[12]=y*n+v*o+x*f+M*m,t[13]=y*i+v*u+x*h+M*g,t[14]=y*a+v*c+x*d+M*b,t[15]=y*s+v*l+x*p+M*_,t}function i(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t[9]=e[9]-r[9],t[10]=e[10]-r[10],t[11]=e[11]-r[11],t[12]=e[12]-r[12],t[13]=e[13]-r[13],t[14]=e[14]-r[14],t[15]=e[15]-r[15],t}Object.defineProperty(e,"__esModule",{value:!0}),e.create=function(){let t=new a.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.clone=function(t){let e=new a.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.fromValues=function(t,e,r,n,i,s,o,u,c,l,f,h,d,p,m,g){let b=new a.ARRAY_TYPE(16);return b[0]=t,b[1]=e,b[2]=r,b[3]=n,b[4]=i,b[5]=s,b[6]=o,b[7]=u,b[8]=c,b[9]=l,b[10]=f,b[11]=h,b[12]=d,b[13]=p,b[14]=m,b[15]=g,b},e.set=function(t,e,r,n,i,a,s,o,u,c,l,f,h,d,p,m,g){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=a,t[5]=s,t[6]=o,t[7]=u,t[8]=c,t[9]=l,t[10]=f,t[11]=h,t[12]=d,t[13]=p,t[14]=m,t[15]=g,t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.transpose=function(t,e){if(t===e){let r=e[1],n=e[2],i=e[3],a=e[6],s=e[7],o=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=a,t[11]=e[14],t[12]=i,t[13]=s,t[14]=o}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},e.invert=function(t,e){let r=e[0],n=e[1],i=e[2],a=e[3],s=e[4],o=e[5],u=e[6],c=e[7],l=e[8],f=e[9],h=e[10],d=e[11],p=e[12],m=e[13],g=e[14],b=e[15],_=r*o-n*s,y=r*u-i*s,v=r*c-a*s,x=n*u-i*o,M=n*c-a*o,A=i*c-a*u,E=l*m-f*p,w=l*g-h*p,T=l*b-d*p,R=f*g-h*m,S=f*b-d*m,O=h*b-d*g,P=_*O-y*S+v*R+x*T-M*w+A*E;return P?(P=1/P,t[0]=(o*O-u*S+c*R)*P,t[1]=(i*S-n*O-a*R)*P,t[2]=(m*A-g*M+b*x)*P,t[3]=(h*M-f*A-d*x)*P,t[4]=(u*T-s*O-c*w)*P,t[5]=(r*O-i*T+a*w)*P,t[6]=(g*v-p*A-b*y)*P,t[7]=(l*A-h*v+d*y)*P,t[8]=(s*S-o*T+c*E)*P,t[9]=(n*T-r*S-a*E)*P,t[10]=(p*M-m*v+b*_)*P,t[11]=(f*v-l*M-d*_)*P,t[12]=(o*w-s*R-u*E)*P,t[13]=(r*R-n*w+i*E)*P,t[14]=(m*y-p*x-g*_)*P,t[15]=(l*x-f*y+h*_)*P,t):null},e.adjoint=function(t,e){let r=e[0],n=e[1],i=e[2],a=e[3],s=e[4],o=e[5],u=e[6],c=e[7],l=e[8],f=e[9],h=e[10],d=e[11],p=e[12],m=e[13],g=e[14],b=e[15];return t[0]=o*(h*b-d*g)-f*(u*b-c*g)+m*(u*d-c*h),t[1]=-(n*(h*b-d*g)-f*(i*b-a*g)+m*(i*d-a*h)),t[2]=n*(u*b-c*g)-o*(i*b-a*g)+m*(i*c-a*u),t[3]=-(n*(u*d-c*h)-o*(i*d-a*h)+f*(i*c-a*u)),t[4]=-(s*(h*b-d*g)-l*(u*b-c*g)+p*(u*d-c*h)),t[5]=r*(h*b-d*g)-l*(i*b-a*g)+p*(i*d-a*h),t[6]=-(r*(u*b-c*g)-s*(i*b-a*g)+p*(i*c-a*u)),t[7]=r*(u*d-c*h)-s*(i*d-a*h)+l*(i*c-a*u),t[8]=s*(f*b-d*m)-l*(o*b-c*m)+p*(o*d-c*f),t[9]=-(r*(f*b-d*m)-l*(n*b-a*m)+p*(n*d-a*f)),t[10]=r*(o*b-c*m)-s*(n*b-a*m)+p*(n*c-a*o),t[11]=-(r*(o*d-c*f)-s*(n*d-a*f)+l*(n*c-a*o)),t[12]=-(s*(f*g-h*m)-l*(o*g-u*m)+p*(o*h-u*f)),t[13]=r*(f*g-h*m)-l*(n*g-i*m)+p*(n*h-i*f),t[14]=-(r*(o*g-u*m)-s*(n*g-i*m)+p*(n*u-i*o)),t[15]=r*(o*h-u*f)-s*(n*h-i*f)+l*(n*u-i*o),t},e.determinant=function(t){let e=t[0],r=t[1],n=t[2],i=t[3],a=t[4],s=t[5],o=t[6],u=t[7],c=t[8],l=t[9],f=t[10],h=t[11],d=t[12],p=t[13],m=t[14],g=t[15];return(e*s-r*a)*(f*g-h*m)-(e*o-n*a)*(l*g-h*p)+(e*u-i*a)*(l*m-f*p)+(r*o-n*s)*(c*g-h*d)-(r*u-i*s)*(c*m-f*d)+(n*u-i*o)*(c*p-l*d)},e.multiply=n,e.translate=function(t,e,r){let n,i,a,s,o,u,c,l,f,h,d,p,m=r[0],g=r[1],b=r[2];return e===t?(t[12]=e[0]*m+e[4]*g+e[8]*b+e[12],t[13]=e[1]*m+e[5]*g+e[9]*b+e[13],t[14]=e[2]*m+e[6]*g+e[10]*b+e[14],t[15]=e[3]*m+e[7]*g+e[11]*b+e[15]):(n=e[0],i=e[1],a=e[2],s=e[3],o=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=e[9],d=e[10],p=e[11],t[0]=n,t[1]=i,t[2]=a,t[3]=s,t[4]=o,t[5]=u,t[6]=c,t[7]=l,t[8]=f,t[9]=h,t[10]=d,t[11]=p,t[12]=n*m+o*g+f*b+e[12],t[13]=i*m+u*g+h*b+e[13],t[14]=a*m+c*g+d*b+e[14],t[15]=s*m+l*g+p*b+e[15]),t},e.scale=function(t,e,r){let n=r[0],i=r[1],a=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.rotate=function(t,e,r,n){let i,s,o,u,c,l,f,h,d,p,m,g,b,_,y,v,x,M,A,E,w,T,R,S,O=n[0],P=n[1],C=n[2],I=Math.sqrt(O*O+P*P+C*C);return Math.abs(I)<a.EPSILON?null:(I=1/I,O*=I,P*=I,C*=I,i=Math.sin(r),s=Math.cos(r),o=1-s,u=e[0],c=e[1],l=e[2],f=e[3],h=e[4],d=e[5],p=e[6],m=e[7],g=e[8],b=e[9],_=e[10],y=e[11],v=O*O*o+s,x=P*O*o+C*i,M=C*O*o-P*i,A=O*P*o-C*i,E=P*P*o+s,w=C*P*o+O*i,T=O*C*o+P*i,R=P*C*o-O*i,S=C*C*o+s,t[0]=u*v+h*x+g*M,t[1]=c*v+d*x+b*M,t[2]=l*v+p*x+_*M,t[3]=f*v+m*x+y*M,t[4]=u*A+h*E+g*w,t[5]=c*A+d*E+b*w,t[6]=l*A+p*E+_*w,t[7]=f*A+m*E+y*w,t[8]=u*T+h*R+g*S,t[9]=c*T+d*R+b*S,t[10]=l*T+p*R+_*S,t[11]=f*T+m*R+y*S,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},e.rotateX=function(t,e,r){let n=Math.sin(r),i=Math.cos(r),a=e[4],s=e[5],o=e[6],u=e[7],c=e[8],l=e[9],f=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=a*i+c*n,t[5]=s*i+l*n,t[6]=o*i+f*n,t[7]=u*i+h*n,t[8]=c*i-a*n,t[9]=l*i-s*n,t[10]=f*i-o*n,t[11]=h*i-u*n,t},e.rotateY=function(t,e,r){let n=Math.sin(r),i=Math.cos(r),a=e[0],s=e[1],o=e[2],u=e[3],c=e[8],l=e[9],f=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*i-c*n,t[1]=s*i-l*n,t[2]=o*i-f*n,t[3]=u*i-h*n,t[8]=a*n+c*i,t[9]=s*n+l*i,t[10]=o*n+f*i,t[11]=u*n+h*i,t},e.rotateZ=function(t,e,r){let n=Math.sin(r),i=Math.cos(r),a=e[0],s=e[1],o=e[2],u=e[3],c=e[4],l=e[5],f=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*i+c*n,t[1]=s*i+l*n,t[2]=o*i+f*n,t[3]=u*i+h*n,t[4]=c*i-a*n,t[5]=l*i-s*n,t[6]=f*i-o*n,t[7]=h*i-u*n,t},e.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromRotation=function(t,e,r){let n,i,s,o=r[0],u=r[1],c=r[2],l=Math.sqrt(o*o+u*u+c*c);return Math.abs(l)<a.EPSILON?null:(l=1/l,o*=l,u*=l,c*=l,n=Math.sin(e),i=Math.cos(e),s=1-i,t[0]=o*o*s+i,t[1]=u*o*s+c*n,t[2]=c*o*s-u*n,t[3]=0,t[4]=o*u*s-c*n,t[5]=u*u*s+i,t[6]=c*u*s+o*n,t[7]=0,t[8]=o*c*s+u*n,t[9]=u*c*s-o*n,t[10]=c*c*s+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},e.fromXRotation=function(t,e){let r=Math.sin(e),n=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromYRotation=function(t,e){let r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromZRotation=function(t,e){let r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromRotationTranslation=function(t,e,r){let n=e[0],i=e[1],a=e[2],s=e[3],o=n+n,u=i+i,c=a+a,l=n*o,f=n*u,h=n*c,d=i*u,p=i*c,m=a*c,g=s*o,b=s*u,_=s*c;return t[0]=1-(d+m),t[1]=f+_,t[2]=h-b,t[3]=0,t[4]=f-_,t[5]=1-(l+m),t[6]=p+g,t[7]=0,t[8]=h+b,t[9]=p-g,t[10]=1-(l+d),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},e.getTranslation=function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},e.getScaling=function(t,e){let r=e[0],n=e[1],i=e[2],a=e[4],s=e[5],o=e[6],u=e[8],c=e[9],l=e[10];return t[0]=Math.sqrt(r*r+n*n+i*i),t[1]=Math.sqrt(a*a+s*s+o*o),t[2]=Math.sqrt(u*u+c*c+l*l),t},e.getRotation=function(t,e){let r=e[0]+e[5]+e[10],n=0;return r>0?(n=2*Math.sqrt(r+1),t[3]=.25*n,t[0]=(e[6]-e[9])/n,t[1]=(e[8]-e[2])/n,t[2]=(e[1]-e[4])/n):e[0]>e[5]&e[0]>e[10]?(n=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/n,t[0]=.25*n,t[1]=(e[1]+e[4])/n,t[2]=(e[8]+e[2])/n):e[5]>e[10]?(n=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/n,t[0]=(e[1]+e[4])/n,t[1]=.25*n,t[2]=(e[6]+e[9])/n):(n=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/n,t[0]=(e[8]+e[2])/n,t[1]=(e[6]+e[9])/n,t[2]=.25*n),t},e.fromRotationTranslationScale=function(t,e,r,n){let i=e[0],a=e[1],s=e[2],o=e[3],u=i+i,c=a+a,l=s+s,f=i*u,h=i*c,d=i*l,p=a*c,m=a*l,g=s*l,b=o*u,_=o*c,y=o*l,v=n[0],x=n[1],M=n[2];return t[0]=(1-(p+g))*v,t[1]=(h+y)*v,t[2]=(d-_)*v,t[3]=0,t[4]=(h-y)*x,t[5]=(1-(f+g))*x,t[6]=(m+b)*x,t[7]=0,t[8]=(d+_)*M,t[9]=(m-b)*M,t[10]=(1-(f+p))*M,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},e.fromRotationTranslationScaleOrigin=function(t,e,r,n,i){let a=e[0],s=e[1],o=e[2],u=e[3],c=a+a,l=s+s,f=o+o,h=a*c,d=a*l,p=a*f,m=s*l,g=s*f,b=o*f,_=u*c,y=u*l,v=u*f,x=n[0],M=n[1],A=n[2],E=i[0],w=i[1],T=i[2];return t[0]=(1-(m+b))*x,t[1]=(d+v)*x,t[2]=(p-y)*x,t[3]=0,t[4]=(d-v)*M,t[5]=(1-(h+b))*M,t[6]=(g+_)*M,t[7]=0,t[8]=(p+y)*A,t[9]=(g-_)*A,t[10]=(1-(h+m))*A,t[11]=0,t[12]=r[0]+E-(t[0]*E+t[4]*w+t[8]*T),t[13]=r[1]+w-(t[1]*E+t[5]*w+t[9]*T),t[14]=r[2]+T-(t[2]*E+t[6]*w+t[10]*T),t[15]=1,t},e.fromQuat=function(t,e){let r=e[0],n=e[1],i=e[2],a=e[3],s=r+r,o=n+n,u=i+i,c=r*s,l=n*s,f=n*o,h=i*s,d=i*o,p=i*u,m=a*s,g=a*o,b=a*u;return t[0]=1-f-p,t[1]=l+b,t[2]=h-g,t[3]=0,t[4]=l-b,t[5]=1-c-p,t[6]=d+m,t[7]=0,t[8]=h+g,t[9]=d-m,t[10]=1-c-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.frustum=function(t,e,r,n,i,a,s){let o=1/(r-e),u=1/(i-n),c=1/(a-s);return t[0]=2*a*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*a*u,t[6]=0,t[7]=0,t[8]=(r+e)*o,t[9]=(i+n)*u,t[10]=(s+a)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=s*a*2*c,t[15]=0,t},e.perspective=function(t,e,r,n,i){let a=1/Math.tan(e/2),s=1/(n-i);return t[0]=a/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+n)*s,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*n*s,t[15]=0,t},e.perspectiveFromFieldOfView=function(t,e,r,n){let i=Math.tan(e.upDegrees*Math.PI/180),a=Math.tan(e.downDegrees*Math.PI/180),s=Math.tan(e.leftDegrees*Math.PI/180),o=Math.tan(e.rightDegrees*Math.PI/180),u=2/(s+o),c=2/(i+a);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(s-o)*u*.5,t[9]=(i-a)*c*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t},e.ortho=function(t,e,r,n,i,a,s){let o=1/(e-r),u=1/(n-i),c=1/(a-s);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+r)*o,t[13]=(i+n)*u,t[14]=(s+a)*c,t[15]=1,t},e.lookAt=function(t,e,r,n){let i,s,o,u,c,l,f,h,d,p,m=e[0],g=e[1],b=e[2],_=n[0],y=n[1],v=n[2],x=r[0],M=r[1],A=r[2];return Math.abs(m-x)<a.EPSILON&&Math.abs(g-M)<a.EPSILON&&Math.abs(b-A)<a.EPSILON?mat4.identity(t):(f=m-x,h=g-M,d=b-A,p=1/Math.sqrt(f*f+h*h+d*d),f*=p,h*=p,d*=p,i=y*d-v*h,s=v*f-_*d,o=_*h-y*f,(p=Math.sqrt(i*i+s*s+o*o))?(i*=p=1/p,s*=p,o*=p):(i=0,s=0,o=0),u=h*o-d*s,c=d*i-f*o,l=f*s-h*i,(p=Math.sqrt(u*u+c*c+l*l))?(u*=p=1/p,c*=p,l*=p):(u=0,c=0,l=0),t[0]=i,t[1]=u,t[2]=f,t[3]=0,t[4]=s,t[5]=c,t[6]=h,t[7]=0,t[8]=o,t[9]=l,t[10]=d,t[11]=0,t[12]=-(i*m+s*g+o*b),t[13]=-(u*m+c*g+l*b),t[14]=-(f*m+h*g+d*b),t[15]=1,t)},e.targetTo=function(t,e,r,n){let i=e[0],a=e[1],s=e[2],o=n[0],u=n[1],c=n[2],l=i-r[0],f=a-r[1],h=s-r[2],d=l*l+f*f+h*h;d>0&&(l*=d=1/Math.sqrt(d),f*=d,h*=d);let p=u*h-c*f,m=c*l-o*h,g=o*f-u*l;return t[0]=p,t[1]=m,t[2]=g,t[3]=0,t[4]=f*g-h*m,t[5]=h*p-l*g,t[6]=l*m-f*p,t[7]=0,t[8]=l,t[9]=f,t[10]=h,t[11]=0,t[12]=i,t[13]=a,t[14]=s,t[15]=1,t},e.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},e.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t[9]=e[9]+r[9],t[10]=e[10]+r[10],t[11]=e[11]+r[11],t[12]=e[12]+r[12],t[13]=e[13]+r[13],t[14]=e[14]+r[14],t[15]=e[15]+r[15],t},e.subtract=i,e.multiplyScalar=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12]*r,t[13]=e[13]*r,t[14]=e[14]*r,t[15]=e[15]*r,t},e.multiplyScalarAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t[9]=e[9]+r[9]*n,t[10]=e[10]+r[10]*n,t[11]=e[11]+r[11]*n,t[12]=e[12]+r[12]*n,t[13]=e[13]+r[13]*n,t[14]=e[14]+r[14]*n,t[15]=e[15]+r[15]*n,t},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},e.equals=function(t,e){let r=t[0],n=t[1],i=t[2],s=t[3],o=t[4],u=t[5],c=t[6],l=t[7],f=t[8],h=t[9],d=t[10],p=t[11],m=t[12],g=t[13],b=t[14],_=t[15],y=e[0],v=e[1],x=e[2],M=e[3],A=e[4],E=e[5],w=e[6],T=e[7],R=e[8],S=e[9],O=e[10],P=e[11],C=e[12],I=e[13],L=e[14],N=e[15];return Math.abs(r-y)<=a.EPSILON*Math.max(1,Math.abs(r),Math.abs(y))&&Math.abs(n-v)<=a.EPSILON*Math.max(1,Math.abs(n),Math.abs(v))&&Math.abs(i-x)<=a.EPSILON*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(s-M)<=a.EPSILON*Math.max(1,Math.abs(s),Math.abs(M))&&Math.abs(o-A)<=a.EPSILON*Math.max(1,Math.abs(o),Math.abs(A))&&Math.abs(u-E)<=a.EPSILON*Math.max(1,Math.abs(u),Math.abs(E))&&Math.abs(c-w)<=a.EPSILON*Math.max(1,Math.abs(c),Math.abs(w))&&Math.abs(l-T)<=a.EPSILON*Math.max(1,Math.abs(l),Math.abs(T))&&Math.abs(f-R)<=a.EPSILON*Math.max(1,Math.abs(f),Math.abs(R))&&Math.abs(h-S)<=a.EPSILON*Math.max(1,Math.abs(h),Math.abs(S))&&Math.abs(d-O)<=a.EPSILON*Math.max(1,Math.abs(d),Math.abs(O))&&Math.abs(p-P)<=a.EPSILON*Math.max(1,Math.abs(p),Math.abs(P))&&Math.abs(m-C)<=a.EPSILON*Math.max(1,Math.abs(m),Math.abs(C))&&Math.abs(g-I)<=a.EPSILON*Math.max(1,Math.abs(g),Math.abs(I))&&Math.abs(b-L)<=a.EPSILON*Math.max(1,Math.abs(b),Math.abs(L))&&Math.abs(_-N)<=a.EPSILON*Math.max(1,Math.abs(_),Math.abs(N))};var a=r(1);const s=n;e.mul=s;const o=i;e.sub=o},function(t,e,r){"use strict";function n(){let t=new u.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function i(t,e,r){r*=.5;let n=Math.sin(r);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(r),t}function a(t,e,r){let n=e[0],i=e[1],a=e[2],s=e[3],o=r[0],u=r[1],c=r[2],l=r[3];return t[0]=n*l+s*o+i*c-a*u,t[1]=i*l+s*u+a*o-n*c,t[2]=a*l+s*c+n*u-i*o,t[3]=s*l-n*o-i*u-a*c,t}function s(t,e,r,n){let i,a,s,o,u,c=e[0],l=e[1],f=e[2],h=e[3],d=r[0],p=r[1],m=r[2],g=r[3];return(a=c*d+l*p+f*m+h*g)<0&&(a=-a,d=-d,p=-p,m=-m,g=-g),1-a>1e-6?(i=Math.acos(a),s=Math.sin(i),o=Math.sin((1-n)*i)/s,u=Math.sin(n*i)/s):(o=1-n,u=n),t[0]=o*c+u*d,t[1]=o*l+u*p,t[2]=o*f+u*m,t[3]=o*h+u*g,t}function o(t,e){let r,n=e[0]+e[4]+e[8];if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{let n=0;e[4]>e[0]&&(n=1),e[8]>e[3*n+n]&&(n=2);let i=(n+1)%3,a=(n+2)%3;r=Math.sqrt(e[3*n+n]-e[3*i+i]-e[3*a+a]+1),t[n]=.5*r,r=.5/r,t[3]=(e[3*i+a]-e[3*a+i])*r,t[i]=(e[3*i+n]+e[3*n+i])*r,t[a]=(e[3*a+n]+e[3*n+a])*r}return t}Object.defineProperty(e,"__esModule",{value:!0}),e.create=n,e.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},e.setAxisAngle=i,e.getAxisAngle=function(t,e){let r=2*Math.acos(e[3]),n=Math.sin(r/2);return 0!=n?(t[0]=e[0]/n,t[1]=e[1]/n,t[2]=e[2]/n):(t[0]=1,t[1]=0,t[2]=0),r},e.multiply=a,e.rotateX=function(t,e,r){r*=.5;let n=e[0],i=e[1],a=e[2],s=e[3],o=Math.sin(r),u=Math.cos(r);return t[0]=n*u+s*o,t[1]=i*u+a*o,t[2]=a*u-i*o,t[3]=s*u-n*o,t},e.rotateY=function(t,e,r){r*=.5;let n=e[0],i=e[1],a=e[2],s=e[3],o=Math.sin(r),u=Math.cos(r);return t[0]=n*u-a*o,t[1]=i*u+s*o,t[2]=a*u+n*o,t[3]=s*u-i*o,t},e.rotateZ=function(t,e,r){r*=.5;let n=e[0],i=e[1],a=e[2],s=e[3],o=Math.sin(r),u=Math.cos(r);return t[0]=n*u+i*o,t[1]=i*u-n*o,t[2]=a*u+s*o,t[3]=s*u-a*o,t},e.calculateW=function(t,e){let r=e[0],n=e[1],i=e[2];return t[0]=r,t[1]=n,t[2]=i,t[3]=Math.sqrt(Math.abs(1-r*r-n*n-i*i)),t},e.slerp=s,e.invert=function(t,e){let r=e[0],n=e[1],i=e[2],a=e[3],s=r*r+n*n+i*i+a*a,o=s?1/s:0;return t[0]=-r*o,t[1]=-n*o,t[2]=-i*o,t[3]=a*o,t},e.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},e.fromMat3=o,e.fromEuler=function(t,e,r,n){let i=.5*Math.PI/180;e*=i,r*=i,n*=i;let a=Math.sin(e),s=Math.cos(e),o=Math.sin(r),u=Math.cos(r),c=Math.sin(n),l=Math.cos(n);return t[0]=a*u*l-s*o*c,t[1]=s*o*l+a*u*c,t[2]=s*u*c-a*o*l,t[3]=s*u*l+a*o*c,t},e.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"};var u=r(1),c=r(47),l=r(48),f=r(49);const h=f.clone;e.clone=h;const d=f.fromValues;e.fromValues=d;const p=f.copy;e.copy=p;const m=f.set;e.set=m;const g=f.add;e.add=g;const b=a;e.mul=b;const _=f.scale;e.scale=_;const y=f.dot;e.dot=y;const v=f.lerp;e.lerp=v;const x=f.length;e.length=x;const M=x;e.len=M;const A=f.squaredLength;e.squaredLength=A;const E=A;e.sqrLen=E;const w=f.normalize;e.normalize=w;const T=f.exactEquals;e.exactEquals=T;const R=f.equals;e.equals=R;const S=function(){let t=l.create(),e=l.fromValues(1,0,0),r=l.fromValues(0,1,0);return function(n,a,s){let o=l.dot(a,s);return o<-.999999?(l.cross(t,e,a),l.len(t)<1e-6&&l.cross(t,r,a),l.normalize(t,t),i(n,t,Math.PI),n):o>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(l.cross(t,a,s),n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=1+o,w(n,n))}}();e.rotationTo=S;const O=function(){let t=n(),e=n();return function(r,n,i,a,o,u){return s(t,n,o,u),s(e,i,a,u),s(r,t,e,2*u*(1-u)),r}}();e.sqlerp=O;const P=function(){let t=c.create();return function(e,r,n,i){return t[0]=n[0],t[3]=n[1],t[6]=n[2],t[1]=i[0],t[4]=i[1],t[7]=i[2],t[2]=-r[0],t[5]=-r[1],t[8]=-r[2],w(e,o(e,t))}}();e.setAxes=P},function(t,e,r){"use strict";function n(){let t=new f.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t}function i(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t}function a(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t}function s(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t}function o(t,e){var r=e[0]-t[0],n=e[1]-t[1];return Math.sqrt(r*r+n*n)}function u(t,e){var r=e[0]-t[0],n=e[1]-t[1];return r*r+n*n}function c(t){var e=t[0],r=t[1];return Math.sqrt(e*e+r*r)}function l(t){var e=t[0],r=t[1];return e*e+r*r}Object.defineProperty(e,"__esModule",{value:!0}),e.create=n,e.clone=function(t){let e=new f.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},e.fromValues=function(t,e){let r=new f.ARRAY_TYPE(2);return r[0]=t,r[1]=e,r},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},e.set=function(t,e,r){return t[0]=e,t[1]=r,t},e.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t},e.subtract=i,e.multiply=a,e.divide=s,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},e.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t},e.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},e.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t},e.scaleAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t},e.distance=o,e.squaredDistance=u,e.length=c,e.squaredLength=l,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},e.normalize=function(t,e){var r=e[0],n=e[1],i=r*r+n*n;return i>0&&(i=1/Math.sqrt(i),t[0]=e[0]*i,t[1]=e[1]*i),t},e.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},e.cross=function(t,e,r){var n=e[0]*r[1]-e[1]*r[0];return t[0]=t[1]=0,t[2]=n,t},e.lerp=function(t,e,r,n){var i=e[0],a=e[1];return t[0]=i+n*(r[0]-i),t[1]=a+n*(r[1]-a),t},e.random=function(t,e){e=e||1;var r=2*f.RANDOM()*Math.PI;return t[0]=Math.cos(r)*e,t[1]=Math.sin(r)*e,t},e.transformMat2=function(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i,t[1]=r[1]*n+r[3]*i,t},e.transformMat2d=function(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i+r[4],t[1]=r[1]*n+r[3]*i+r[5],t},e.transformMat3=function(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[3]*i+r[6],t[1]=r[1]*n+r[4]*i+r[7],t},e.transformMat4=function(t,e,r){let n=e[0],i=e[1];return t[0]=r[0]*n+r[4]*i+r[12],t[1]=r[1]*n+r[5]*i+r[13],t},e.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]},e.equals=function(t,e){let r=t[0],n=t[1],i=e[0],a=e[1];return Math.abs(r-i)<=f.EPSILON*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(n-a)<=f.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))};var f=r(1);const h=c;e.len=h;const d=i;e.sub=d;const p=a;e.mul=p;const m=s;e.div=m;const g=o;e.dist=g;const b=u;e.sqrDist=b;const _=l;e.sqrLen=_;const y=function(){let t=n();return function(e,r,n,i,a,s){let o,u;for(r||(r=2),n||(n=0),u=i?Math.min(i*r+n,e.length):e.length,o=n;o<u;o+=r)t[0]=e[o],t[1]=e[o+1],a(t,t,s),e[o]=t[0],e[o+1]=t[1];return e}}();e.forEach=y},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){switch(e){case s.default.TYPE.UNIFORM:return t.uniform;case s.default.TYPE.ATTRIB:return t.attrib;case s.default.TYPE.TEXTURE_2D:return t.tex2d}}function a(t,e,r){const n=i(t,e);let a=n.get(r);return a||(a=[],n.set(r,a)),a}e.__esModule=!0;var s=n(r(4)),o=n(r(10)),u=n(r(0));class c{constructor(){this.uniform=new Map,this.attrib=new Map,this.tex2d=new Map}clear(){this.uniform.clear(),this.attrib.clear(),this.tex2d.clear()}destroy(){this.clear(),(0,u.default)(this)}pushVar(t){if(t instanceof o.default)t.pushVar(this);else{a(this,t.type,t.name).push(t)}}popVar(t){if(t instanceof o.default)t.popVar(this);else{const e=a(this,t.type,t.name),r=e.length;for(let n=0;n<r;++n)if(e[n]===t)return void(e.length=n)}}curVar(t){const e=i(this,t.type).get(t.name);return e&&e.length?e[e.length-1]:null}curUniform(t){const e=this.uniform.get(t);return e&&e.length?e[e.length-1]:null}curAttrib(t){const e=this.attrib.get(t);return e&&e.length?e[e.length-1]:null}curTex2d(t){const e=this.tex2d.get(t);return e&&e.length?e[e.length-1]:null}}e.default=c},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(r(44)),a=n(r(54)),s=n(r(55)),o=n(r(57)),u=n(r(42));const c=r(121),l=(t,e)=>{if("function"==typeof e){const r=t.createVO();return e(r),r}return e};class f{constructor(t,e,r){this.resourceLibrary=t,this.textureLibrary=e,this.descriptor=t.findDescriptor(r.descriptor),this.voPool=new u.default(this.descriptor,Object.assign(c(r,["capacity","usage","maxAllocVOSize","voArray"]),{voNew:l(this.descriptor,r.voNew),voZero:l(this.descriptor,r.voZero)})),this.voPoolShaderAttribs=new o.default(this.voPool),this.indices=r.indices||i.default.Generate(this.voPool.capacity,[0,1,2,0,2,3],4),this.shaderProgram=new a.default(t.findVertexShader(r.vertexShader),t.findFragmentShader(r.fragmentShader)),this.primitive=r.primitive,this.textures=Object.assign({},r.textures),this.shaderTextureGroup=null}get capacity(){return this.voPool.capacity}get usedCount(){return this.voPool.usedCount}get availableCount(){return this.voPool.availableCount}setTexture(t,e){this.textures[t]!==e&&(this.textures[t]=e,this.shaderTextureGroup=null)}loadTextureAtlas(t,e){return this.textures[t]=e,this.shaderTextureGroup=null,this.textureLibrary.loadTextureAtlas(e)}getTextureAtlas(t){return this.textureLibrary.getTextureAtlas(this.textures[t])}createSprite(t,e,r){const n=this.voPool.alloc(1);if(null!=t){const i=e||t.width,a=r||t.height;n.setSize(i,a),n.setTexCoordsByTexture(t)}return n}renderFrame(t){null==this.shaderTextureGroup&&(this.shaderTextureGroup=new s.default(this.textureLibrary,this.textures)),this.shaderTextureGroup.whenLoaded(e=>{const{shaderContext:r}=t;r.pushVar(e),r.pushVar(this.voPoolShaderAttribs),t.useShaderProgram(this.shaderProgram),t.drawIndexed(this.primitive,this.indices)})}}e.default=f},function(t,e,r){var n=r(122),i=r(163)(function(t,e){return null==t?{}:n(t,e)});t.exports=i},function(t,e,r){var n=r(123),i=r(158);t.exports=function(t,e){return n(t,e,function(e,r){return i(t,r)})}},function(t,e,r){var n=r(124),i=r(155),a=r(11);t.exports=function(t,e,r){for(var s=-1,o=e.length,u={};++s<o;){var c=e[s],l=n(t,c);r(l,c)&&i(u,a(c,t),l)}return u}},function(t,e,r){var n=r(11),i=r(28);t.exports=function(t,e){for(var r=0,a=(e=n(e,t)).length;null!=t&&r<a;)t=t[i(e[r++])];return r&&r==a?t:void 0}},function(t,e,r){var n=r(3),i=r(21),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;t.exports=function(t,e){if(n(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!i(t))||s.test(t)||!a.test(t)||null!=e&&t in Object(e)}},function(t,e,r){var n=/^\./,i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,s=r(127)(function(t){var e=[];return n.test(t)&&e.push(""),t.replace(i,function(t,r,n,i){e.push(n?i.replace(a,"$1"):r||t)}),e});t.exports=s},function(t,e,r){var n=r(128),i=500;t.exports=function(t){var e=n(t,function(t){return r.size===i&&r.clear(),t}),r=e.cache;return e}},function(t,e,r){function n(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(a);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var s=t.apply(this,n);return r.cache=a.set(i,s)||a,s};return r.cache=new(n.Cache||i),r}var i=r(129),a="Expected a function";n.Cache=i,t.exports=n},function(t,e,r){function n(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}var i=r(130),a=r(150),s=r(152),o=r(153),u=r(154);n.prototype.clear=i,n.prototype.delete=a,n.prototype.get=s,n.prototype.has=o,n.prototype.set=u,t.exports=n},function(t,e,r){var n=r(131),i=r(143),a=r(149);t.exports=function(){this.size=0,this.__data__={hash:new n,map:new(a||i),string:new n}}},function(t,e,r){function n(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}var i=r(132),a=r(139),s=r(140),o=r(141),u=r(142);n.prototype.clear=i,n.prototype.delete=a,n.prototype.get=s,n.prototype.has=o,n.prototype.set=u,t.exports=n},function(t,e,r){var n=r(12);t.exports=function(){this.__data__=n?n(null):{},this.size=0}},function(t,e,r){var n=r(134),i=r(135),a=r(27),s=r(137),o=/^\[object .+?Constructor\]$/,u=Function.prototype,c=Object.prototype,l=u.toString,f=c.hasOwnProperty,h=RegExp("^"+l.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!a(t)||i(t))&&(n(t)?h:o).test(s(t))}},function(t,e,r){var n=r(22),i=r(27),a="[object AsyncFunction]",s="[object Function]",o="[object GeneratorFunction]",u="[object Proxy]";t.exports=function(t){if(!i(t))return!1;var e=n(t);return e==s||e==o||e==a||e==u}},function(t,e,r){var n=r(136),i=function(){var t=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();t.exports=function(t){return!!i&&i in t}},function(t,e,r){var n=r(20)["__core-js_shared__"];t.exports=n},function(t,e){var r=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return r.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},function(t,e,r){var n=r(12),i="__lodash_hash_undefined__",a=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(n){var r=e[t];return r===i?void 0:r}return a.call(e,t)?e[t]:void 0}},function(t,e,r){var n=r(12),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return n?void 0!==e[t]:i.call(e,t)}},function(t,e,r){var n=r(12),i="__lodash_hash_undefined__";t.exports=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=n&&void 0===e?i:e,this}},function(t,e,r){function n(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}var i=r(144),a=r(145),s=r(146),o=r(147),u=r(148);n.prototype.clear=i,n.prototype.delete=a,n.prototype.get=s,n.prototype.has=o,n.prototype.set=u,t.exports=n},function(t,e){t.exports=function(){this.__data__=[],this.size=0}},function(t,e,r){var n=r(13),i=Array.prototype.splice;t.exports=function(t){var e=this.__data__,r=n(e,t);return!(r<0||(r==e.length-1?e.pop():i.call(e,r,1),--this.size,0))}},function(t,e,r){var n=r(13);t.exports=function(t){var e=this.__data__,r=n(e,t);return r<0?void 0:e[r][1]}},function(t,e,r){var n=r(13);t.exports=function(t){return n(this.__data__,t)>-1}},function(t,e,r){var n=r(13);t.exports=function(t,e){var r=this.__data__,i=n(r,t);return i<0?(++this.size,r.push([t,e])):r[i][1]=e,this}},function(t,e,r){var n=r(26)(r(20),"Map");t.exports=n},function(t,e,r){var n=r(14);t.exports=function(t){var e=n(this,t).delete(t);return this.size-=e?1:0,e}},function(t,e){t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},function(t,e,r){var n=r(14);t.exports=function(t){return n(this,t).get(t)}},function(t,e,r){var n=r(14);t.exports=function(t){return n(this,t).has(t)}},function(t,e,r){var n=r(14);t.exports=function(t,e){var r=n(this,t),i=r.size;return r.set(t,e),this.size+=r.size==i?0:1,this}},function(t,e,r){var n=r(156),i=r(11),a=r(60),s=r(27),o=r(28);t.exports=function(t,e,r,u){if(!s(t))return t;for(var c=-1,l=(e=i(e,t)).length,f=l-1,h=t;null!=h&&++c<l;){var d=o(e[c]),p=r;if(c!=f){var m=h[d];void 0===(p=u?u(m,d,h):void 0)&&(p=s(m)?m:a(e[c+1])?[]:{})}n(h,d,p),h=h[d]}return t}},function(t,e,r){var n=r(157),i=r(58),a=Object.prototype.hasOwnProperty;t.exports=function(t,e,r){var s=t[e];a.call(t,e)&&i(s,r)&&(void 0!==r||e in t)||n(t,e,r)}},function(t,e,r){var n=r(59);t.exports=function(t,e,r){"__proto__"==e&&n?n(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}},function(t,e,r){var n=r(159),i=r(160);t.exports=function(t,e){return null!=t&&i(t,e,n)}},function(t,e){t.exports=function(t,e){return null!=t&&e in Object(t)}},function(t,e,r){var n=r(11),i=r(61),a=r(3),s=r(60),o=r(162),u=r(28);t.exports=function(t,e,r){for(var c=-1,l=(e=n(e,t)).length,f=!1;++c<l;){var h=u(e[c]);if(!(f=null!=t&&r(t,h)))break;t=t[h]}return f||++c!=l?f:!!(l=null==t?0:t.length)&&o(l)&&s(h,l)&&(a(t)||i(t))}},function(t,e,r){var n=r(22),i=r(23),a="[object Arguments]";t.exports=function(t){return i(t)&&n(t)==a}},function(t,e){var r=9007199254740991;t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=r}},function(t,e,r){var n=r(164),i=r(168),a=r(170);t.exports=function(t){return a(i(t,void 0,n),t+"")}},function(t,e,r){var n=r(165);t.exports=function(t){return(null==t?0:t.length)?n(t,1):[]}},function(t,e,r){function n(t,e,r,s,o){var u=-1,c=t.length;for(r||(r=a),o||(o=[]);++u<c;){var l=t[u];e>0&&r(l)?e>1?n(l,e-1,r,s,o):i(o,l):s||(o[o.length]=l)}return o}var i=r(166),a=r(167);t.exports=n},function(t,e){t.exports=function(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}},function(t,e,r){var n=r(9),i=r(61),a=r(3),s=n?n.isConcatSpreadable:void 0;t.exports=function(t){return a(t)||i(t)||!!(s&&t&&t[s])}},function(t,e,r){var n=r(169),i=Math.max;t.exports=function(t,e,r){return e=i(void 0===e?t.length-1:e,0),function(){for(var a=arguments,s=-1,o=i(a.length-e,0),u=Array(o);++s<o;)u[s]=a[e+s];s=-1;for(var c=Array(e+1);++s<e;)c[s]=a[s];return c[e]=r(u),n(t,this,c)}}},function(t,e){t.exports=function(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}},function(t,e,r){var n=r(171),i=r(174)(n);t.exports=i},function(t,e,r){var n=r(172),i=r(59),a=r(173),s=i?function(t,e){return i(t,"toString",{configurable:!0,enumerable:!1,value:n(e),writable:!0})}:a;t.exports=s},function(t,e){t.exports=function(t){return function(){return t}}},function(t,e){t.exports=function(t){return t}},function(t,e){var r=800,n=16,i=Date.now;t.exports=function(t){var e=0,a=0;return function(){var s=i(),o=n-(s-a);if(a=s,o>0){if(++e>=r)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}},function(t,e,r){"use strict";e.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(r(43));const i=t=>t<0?0:t;class a extends n.default{constructor(t,e,r,n){const a=parseInt(t,10),s=parseInt(e,10);super(a,i(a+parseInt(r,10)-1),s,i(s+parseInt(n,10)-1))}get x(){return this.minX}set x(t){const e=this.width;this.minX=t,this.maxX=i(t+e-1)}get y(){return this.minY}set y(t){const e=this.height;this.minY=t,this.maxY=i(t+e-1)}get width(){return i(this.maxX-this.minX+1)}set width(t){this.maxX=i(this.minX+t-1)}get height(){return i(this.maxY-this.minY+1)}set height(t){this.maxY=i(this.minY+t-1)}}e.default=a},function(t,e,r){"use strict";e.__esModule=!0;const n=r(30),i=(t,e=!1,r=!1,n=!1)=>{const{gl:i}=t.glx;let a=e?i.COLOR_BUFFER_BIT:0;return r&&t.hasDepthBits&&(a|=i.DEPTH_BUFFER_BIT),r&&t.hasStencilBits&&(a|=i.STENCIL_BUFFER_BIT),a};class a{constructor(t){this.glx=t,this.hasDepthBits=t.DEPTH_BUFFER_BIT>0,this.hasStencilBits=t.STENCIL_BUFFER_BIT>0,this.reset()}reset(){this.clearColor=null,this.clearDepth=1,this.clearStencil=0,this.clearMask=0}setClearColor(t){this.clearColor=t?"string"==typeof t?n(t):t:null}setClearMask(t,e,r){this.clearMask=i(this,t,e,r)}clear(){const{gl:t}=this.glx,{clearColor:e}=this;if(e){const r=e.toRgb();t.clearColor(r.r/255,r.g/255,r.b/255,r.a)}else t.clearColor(0,0,0,0);this.hasDepthBits&&t.clearDepth(this.clearDepth),this.hasStencilBits&&t.clearStencil(this.clearStencil);let r=this.clearMask||i(this,!0,!0,!0);t.clear(r)}}e.default=a},function(t,e,r){"use strict";function n(t){const e=t.length;if(e>=2&&t.startsWith('"')&&t.endsWith('"'))return t.substr(1,t.length-2);if(e>=2&&t.startsWith("{")&&t.endsWith("}"))return JSON.parse(t);if(e>=2&&t.startsWith("[")&&t.endsWith("]"))return JSON.parse(t);if(e>=2&&t.startsWith("'")&&t.endsWith("'"))return t.substr(1,t.length-2);if(e>0&&u.exec(t))return parseFloat(t);let r=c.exec(t);if(r)return new URL(r[1].trim());if(r=l.exec(t))return new Float32Array(r.slice(1,3).map(parseFloat));if(r=f.exec(t))return new Float32Array(r.slice(1,4).map(parseFloat));if(r=h.exec(t))return new Float32Array(r.slice(1,5).map(parseFloat));switch(t){case"null":return null;case"undefined":return;case"true":return!0;case"false":return!1;default:return t}}function i(t,e){const r=t.length;let n=e;if(n>=r)return r;do{if(" "!==t[n]&&"\t"!==t[n])return n;++n}while(n<r);return r}function a(t,e,r=";"){const n=t.length;let i=e,a=null;do{if(null===a)switch(t[i]){case r:return i;case"'":a="'",++i;break;case'"':a='"',++i;break;case"(":a=")",++i;break;case"{":a="}",++i;break;case"\\":i+=2;break;default:++i}else t[i]===a?(a=null,++i):"\\"===t[i]?i+=2:++i}while(i<n);return n}function s(t){if("string"!=typeof t||!t)return;const e=[],r=t.length;let n=i(t,0);do{const r=a(t,n,";");r>n&&e.push(t.slice(n,r)),n=i(t,r+1)}while(n<r);return e}function o(t){const e=s(t);if(e)return e.map(t=>{if(d.exec(t))return{value:t.trim()};const e=t.indexOf(":");if(-1===e)return{value:t.trim()};return{key:t.slice(0,e).trim(),value:t.substr(e+1).trim()}}).filter(t=>!(""===t.key&&""===t.value))}e.__esModule=!0;const u=/^[-+]?(\d+\.|\.)?\d+(e\d+|e[-+]\d+)?$/,c=/^url\(\s*([^)]+)\)$/,l=/^vec2\(\s*([-+\d.e]+)\s*,\s*([-+\d.e]+)\s*\)$/,f=/^vec3\(\s*([-+\d.e]+)\s*,\s*([-+\d.e]+)\s*,\s*([-+\d.e]+)\s*\)$/,h=/^vec4\(\s*([-+\d.e]+)\s*,\s*([-+\d.e]+)\s*,\s*([-+\d.e]+)\s*,\s*([-+\d.e]+)\s*\)$/,d=/^\s*[a-zA-Z]+\(\s*[^)]+\)\s*$/;e.default=function(t){if("string"!=typeof t)return t;const e=t.trim();if(e.startsWith("{")&&e.endsWith("}"))return JSON.parse(e);const r=o(e);if(r&&0!==r.length){if("key"in r[0]){const t={};return r.forEach(({key:e,value:r})=>{t[e]=n(r)}),t}{const t=r.map(({value:t})=>n(t));return 1===t.length?t[0]:t}}},e.splitIntoPropTokens=s,e.splitIntoProps=o,e.indexOfNextNonWhitespace=i,e.indexOfNextSeperator=a,e.parseValue=n},function(t,e,r){"use strict";e.__esModule=!0,e.default=((t,e,r)=>t&&e in t?t[e]:"function"==typeof r?r():r)},function(t,e,r){"use strict";e.__esModule=!0;var n=r(32),i=r(16);const a=r(30),s=t=>t?a(t):null,o=t=>({color:t.indexOf("COLOR")>-1,depth:t.indexOf("DEPTH")>-1,stencil:t.indexOf("STENCIL")>-1});class u{constructor(t,e){this.update(e)}update(t){Object.assign(this,(t=>{if(!t||"string"==typeof t)return{clearColor:s(t||"rgba(0,0,0,0)"),clearDepth:1,clearStencil:0,mask:o("COLOR,DEPTH,STENCIL")};const e=n.getDefaultOption.bind(null,t);return{clearColor:s(e("color","rgba(0,0,0,0)")),clearDepth:e("depth",1),clearStencil:e("stencil",0),mask:o(e("mask","COLOR,DEPTH,STENCIL"))}})(t))}connectedEntity(t){this.renderFrameListener=t.on("renderFrame",i.COMP_PRIO_CLEAR,this.renderFrame.bind(this)),console.log("[ClearComponent] connected",this)}disconnectedEntity(t){this.renderFrameListener&&t.off(this.renderFrameListener),console.log("[ClearComponent] disconnected",this)}renderFrame(t){const{clearBuffer:e}=t;e.clearDepth=this.clearDepth,e.clearStencil=this.clearStencil,e.setClearColor(this.clearColor);const{mask:{color:r,depth:n,stencil:i}}=this;e.setClearMask(r,n,i),e.clear()}}e.default=u},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t){t.addDescriptor(i,n.description).addVertexShader(i,n.vertexShader).addFragmentShader(i,n.fragmentShader)};var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(181));const i="simple"},function(t,e,r){"use strict";e.__esModule=!0,e.description=e.fragmentShader=e.vertexShader=void 0;var n=function(t){return t&&t.__esModule?t:{default:t}}(r(182));e.vertexShader=["\n\n  attribute vec2 pos2d;\n  attribute float posZ;\n  attribute vec2 uv;\n  attribute vec2 translate;\n  attribute float rotate;\n  attribute float scale;\n  attribute float opacity;\n\n  uniform mat4 viewMatrix;\n\n  varying vec4 vTextureCoordScaleOpacity;\n\n  ",(0,n.default)("rotateZ",0,0,1),"\n\n  void main(void)\n  {\n    mat4 rotationMatrix = rotateZ(rotate);\n    gl_Position = viewMatrix * ((rotationMatrix * (vec4(scale, scale, scale, 1.0) * vec4(pos2d.xy, posZ, 1.0))) + vec4(translate.xy, 0.0, 0.0));\n    vTextureCoordScaleOpacity = vec4(uv.xy, opacity, 0.0);\n  }\n"],e.fragmentShader="\n\n  precision mediump float;\n\n  varying vec4 vTextureCoordScaleOpacity;\n  uniform sampler2D tex;\n\n  void main(void) {\n    gl_FragColor = vTextureCoordScaleOpacity.z * texture2D(tex, vec2(vTextureCoordScaleOpacity.s, vTextureCoordScaleOpacity.t));\n  }\n\n",e.description={vertexCount:4,attributes:[{name:"position",type:"float32",size:3,attrNames:["x","y","z"]},{name:"rotate",type:"float32",size:1,uniform:!0},{name:"texCoords",type:"float32",size:2,attrNames:["s","t"]},{name:"translate",type:"float32",size:2,attrNames:["tx","ty"],uniform:!0},{name:"scale",type:"float32",size:1,uniform:!0},{name:"opacity",type:"float32",size:1,uniform:!0}],aliases:{pos2d:{size:2,type:"float32",offset:0},posZ:{size:1,type:"float32",offset:2,uniform:!0},uv:"texCoords"},proto:{setTexCoordsByViewport(t,e,r,n){let i=0===t.x?0:t.x/e,a=(t.x+t.width)/e,s=1-(t.y+t.height)/r,o=0===t.y?1:1-t.y/r;void 0!==n&&(i*=n,a*=n,s*=n,o*=n),this.setTexCoords(i,s,a,s,a,o,i,o)},setTexCoordsByTexture(t){const e=t.minS,r=t.minT,n=t.maxS,i=t.maxT;this.setTexCoords(e,r,n,r,n,i,e,i)},setSize(t,e){const r=.5*t,n=.5*(null==e?t:e);this.setPos2d(-r,n,r,n,r,-n,-r,-n)},get width(){return this.x1-this.x3},get height(){return this.y0-this.y2},get rotateDegree(){return 180*this.rotate/Math.PI},set rotateDegree(t){this.rotate=t*(Math.PI/180)},get z(){return this.z0},set z(t){this.z0=t,this.z1=t,this.z2=t,this.z3=t}}}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.default=function(t="rotate",e=0,r=0,n=1){return[`mat4 ${t}(float angle) {`,"float s = sin(angle);","float c = cos(angle);","float oc = 1.0 - c;",(0,i.default)((0,a.default)((0,u.default)((0,s.default)("oc",e*e),"c"),(0,o.default)((0,s.default)("oc",e*r),(0,s.default)(n,"s")),(0,u.default)((0,s.default)("oc",n*e),(0,s.default)(r,"s")),0,(0,u.default)((0,s.default)("oc",e*r),(0,s.default)(n,"s")),(0,u.default)((0,s.default)("oc",r*r),"c"),(0,o.default)((0,s.default)("oc",r*n),(0,s.default)(e,"s")),0,(0,o.default)((0,s.default)("oc",n*e),(0,s.default)(r,"s")),(0,u.default)((0,s.default)("oc",r*n),(0,s.default)(e,"s")),(0,u.default)((0,s.default)("oc",n*n),"c"))),"}"]};var i=n(r(183)),a=n(r(184)),s=n(r(186)),o=n(r(187)),u=n(r(188))},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t){return`return ${t};`}},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t=0,e=0,r=0,i=0,a=0,s=0,o=0,u=0,c=0,l=0,f=0,h=0,d=0,p=0,m=0,g=1,b=n.default){const _=b||(t=>t+"");return`mat4(${_(t)}, ${_(e)}, ${_(r)}, ${_(i)}, ${_(a)}, ${_(s)}, ${_(o)}, ${_(u)}, ${_(c)}, ${_(l)}, ${_(f)}, ${_(h)}, ${_(d)}, ${_(p)}, ${_(m)}, ${_(g)})`};var n=function(t){return t&&t.__esModule?t:{default:t}}(r(185))},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t){const e=(t+"").trim();return e.match(/^[0-9]+$/)?e+".0":e}},function(t,e,r){"use strict";function n(t){return"number"==typeof t}e.__esModule=!0,e.default=((t,e)=>{if(n(e)&&n(t))return t*e;if(n(t))switch(t){case 0:return 0;case 1:return e;default:return`${t} * ${e}`}else{if(!n(e))return`${t} * ${e}`;switch(e){case 0:return 0;case 1:return t;default:return`${t} * ${e}`}}})},function(t,e,r){"use strict";function n(t){return"number"==typeof t}e.__esModule=!0,e.default=function(t,e){if(n(t)&&n(e))return t-e;if(n(t))switch(t){case 0:return`-${e}`;default:return`${t} - ${e}`}else{if(!n(e))return`${t} - ${e}`;switch(e){case 0:return t;default:return`${t} - ${e}`}}}},function(t,e,r){"use strict";function n(t){return"number"==typeof t}e.__esModule=!0,e.default=function(t,e){if(n(t)&&n(e))return t+e;if(n(t))switch(t){case 0:return e;default:return`${t} + ${e}`}else{if(!n(e))return`${t} + ${e}`;switch(e){case 0:return t;default:return`${t} + ${e}`}}}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.EntityManager=e.Entity=e.ComponentRegistry=e.ComponentFactory=void 0;var i=n(r(68)),a=n(r(66)),s=n(r(71)),o=n(r(70));e.ComponentFactory=i.default,e.ComponentRegistry=a.default,e.Entity=s.default,e.EntityManager=o.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(r(191)),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(35)),s=r(16),o=n(r(34));e.default=(()=>(customElements.get(s.DOM_ELEM_CANVAS)?(0,o.default)("<blitpunk> custom elements have already been defined"):((0,o.default)("<blitpunk> custom elements are now defined"),(0,i.default)()),customElements.whenDefined(s.DOM_ELEM_CANVAS).then(()=>a)))},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.default=function(){const{customElements:t}=window;t.define(s.DOM_ELEM_CANVAS,i.default),t.define(s.DOM_ELEM_ENTITY,a.default)};var i=n(r(192)),a=n(r(74)),s=r(16);r(196)},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(r(74)),a=n(r(193)),s=n(r(194));class o extends i.default{constructor(t){const e=super(t);return console.log("[CanvasElement] constructor, self=",e),e.now=0,e.animationFrameRequestId=0,e.animationFrameRequestIsStopped=!1,Object.defineProperties(e,{_webGlRenderer:{value:null,writable:!0},_clearColor:{value:void 0,writable:!0}}),e.canvas=document.createElement("canvas"),e.firstTimeConnected=!0,(0,a.default)(e),e}get webGlRenderer(){const t=this._webGlRenderer;if(t)return t;const{webGlRenderer:e,canvasContextAttributes:r}=(0,s.default)(this);return this.canvasContextAttributes=r,this._webGlRenderer=e,e}startAnimation(){this.animationFrameRequestId||(this.animationFrameRequestIsStopped=!1,this.animationFrameRequestId=window.requestAnimationFrame(t=>{if(this.animationFrameRequestId=0,!this.animationFrameRequestIsStopped){this.startAnimation(),this.now=t/1e3,(0,a.default)(this);const{webGlRenderer:e}=this;e.setViewport(0,0,this.width,this.height),e.renderFrame(()=>{this.renderFrame(this,e)})}}))}stopAnimation(){this.animationFrameRequestIsStopped=!0,0!==this.animationFrameRequestId&&(window.cancelAnimationFrame(this.animationFrameRequestId),this.animationFrameRequestId=0)}connectedCallback(){console.log("[CanvasElement] connectedCallback()"),this.firstTimeConnected&&(this.firstTimeConnected=!1,this.appendChild(this.canvas)),(0,a.default)(this),this.startAnimation()}disconnectedCallback(){console.log("[CanvasElement] disconnectedCallback()"),this.stopAnimation()}}e.default=o},function(t,e,r){"use strict";e.__esModule=!0,e.default=(t=>{const e=window.getComputedStyle(t,null),{clientWidth:r,clientHeight:n}="inline"===e.display?t.parentNode:t,{canvas:i}=t,a=window.devicePixelRatio||1;i.style.width=r+"px",i.style.height=n+"px";const s=Math.round(r*a),o=Math.round(n*a);s===i.width&&o===i.height||(i.width=s,i.height=o),s===t.width&&o===t.height||(t.width=s,t.height=o)})},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(r(36)),a=n(r(39)),s=r(34),o=n(r(195)),u=r(16);e.default=(t=>{const e=Object.freeze((t=>({alpha:(0,o.default)(t,u.ATTR_ALPHA,!1),antialias:(0,o.default)(t,u.ATTR_ANTIALIAS,!1),depth:(0,o.default)(t,u.ATTR_DEPTH,!0),premultipliedAlpha:(0,o.default)(t,u.ATTR_PREMULTIPLIED_ALPHA,!1),preserveDrawingBuffer:(0,o.default)(t,u.ATTR_PRESERVE_DRAW,!1),stencil:(0,o.default)(t,u.ATTR_STENCIL,!1)}))(t)),r=new i.default(((t,e)=>{let r;try{r=t.getContext("webgl",e)}catch(t){(0,s.error)(t)}if(!r)try{r=t.getContext("experimental-webgl",e)}catch(t){(0,s.error)(t)}if(!r)throw new Error(`Could not create WebGL context, attributes=${JSON.stringify(e)}`);return r})(t.canvas,e));return{canvasContextAttributes:e,webGlRenderer:new a.default(r)}})},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t,e,r){if(!t.hasAttribute(e))return r;switch(t.getAttribute(e).toLowerCase()){case"true":case"yes":case"on":case"":case e:return!0}return!1}},function(t,e,r){var n=r(197);"string"==typeof n&&(n=[[t.i,n,""]]);var i={hmr:!0};i.transform=void 0;r(199)(n,i);n.locals&&(t.exports=n.locals)},function(t,e,r){(t.exports=r(198)(void 0)).push([t.i,"blitpunk-canvas {\n  display: inline-block;\n  font-size: 0;\n  margin: 0;\n  padding: 0; }\n  blitpunk-canvas > canvas {\n    border: 0;\n    margin: 0;\n    overflow: hidden;\n    padding: 0;\n    -ms-touch-action: none;\n    touch-action: none;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none; }\n\nblitpunk-scene,\nblitpunk-texture-atlas,\nblitpunk-sprite-group {\n  display: none; }\n",""])},function(t,e){function r(t,e){var r=t[1]||"",n=t[3];if(!n)return r;if(e&&"function"==typeof btoa){var i=function(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}(n),a=n.sources.map(function(t){return"/*# sourceURL="+n.sourceRoot+t+" */"});return[r].concat(a).concat([i]).join("\n")}return[r].join("\n")}t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=r(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n}).join("")},e.i=function(t,r){"string"==typeof t&&(t=[[null,t,""]]);for(var n={},i=0;i<this.length;i++){var a=this[i][0];"number"==typeof a&&(n[a]=!0)}for(i=0;i<t.length;i++){var s=t[i];"number"==typeof s[0]&&n[s[0]]||(r&&!s[2]?s[2]=r:r&&(s[2]="("+s[2]+") and ("+r+")"),e.push(s))}},e}},function(t,e,r){function n(t,e){for(var r=0;r<t.length;r++){var n=t[r],i=f[n.id];if(i){i.refs++;for(s=0;s<i.parts.length;s++)i.parts[s](n.parts[s]);for(;s<n.parts.length;s++)i.parts.push(c(n.parts[s],e))}else{for(var a=[],s=0;s<n.parts.length;s++)a.push(c(n.parts[s],e));f[n.id]={id:n.id,refs:1,parts:a}}}}function i(t,e){for(var r=[],n={},i=0;i<t.length;i++){var a=t[i],s=e.base?a[0]+e.base:a[0],o={css:a[1],media:a[2],sourceMap:a[3]};n[s]?n[s].parts.push(o):r.push(n[s]={id:s,parts:[o]})}return r}function a(t,e){var r=d(t.insertInto);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=g[g.length-1];if("top"===t.insertAt)n?n.nextSibling?r.insertBefore(e,n.nextSibling):r.appendChild(e):r.insertBefore(e,r.firstChild),g.push(e);else if("bottom"===t.insertAt)r.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=d(t.insertInto+" "+t.insertAt.before);r.insertBefore(e,i)}}function s(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=g.indexOf(t);e>=0&&g.splice(e,1)}function o(t){var e=document.createElement("style");return t.attrs.type="text/css",u(e,t.attrs),a(t,e),e}function u(t,e){Object.keys(e).forEach(function(r){t.setAttribute(r,e[r])})}function c(t,e){var r,n,i,c;if(e.transform&&t.css){if(!(c=e.transform(t.css)))return function(){};t.css=c}if(e.singleton){var f=m++;r=p||(p=o(e)),n=l.bind(null,r,f,!1),i=l.bind(null,r,f,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(r=function(t){var e=document.createElement("link");return t.attrs.type="text/css",t.attrs.rel="stylesheet",u(e,t.attrs),a(t,e),e}(e),n=function(t,e,r){var n=r.css,i=r.sourceMap,a=void 0===e.convertToAbsoluteUrls&&i;(e.convertToAbsoluteUrls||a)&&(n=b(n));i&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var s=new Blob([n],{type:"text/css"}),o=t.href;t.href=URL.createObjectURL(s),o&&URL.revokeObjectURL(o)}.bind(null,r,e),i=function(){s(r),r.href&&URL.revokeObjectURL(r.href)}):(r=o(e),n=function(t,e){var r=e.css,n=e.media;n&&t.setAttribute("media",n);if(t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}.bind(null,r),i=function(){s(r)});return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else i()}}function l(t,e,r,n){var i=r?"":n.css;if(t.styleSheet)t.styleSheet.cssText=_(e,i);else{var a=document.createTextNode(i),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(a,s[e]):t.appendChild(a)}}var f={},h=function(t){var e;return function(){return void 0===e&&(e=t.apply(this,arguments)),e}}(function(){return window&&document&&document.all&&!window.atob}),d=function(t){var e={};return function(t){if(void 0===e[t]){var r=function(t){return document.querySelector(t)}.call(this,t);if(r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}e[t]=r}return e[t]}}(),p=null,m=0,g=[],b=r(200);t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||(e.singleton=h()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var r=i(t,e);return n(r,e),function(t){for(var a=[],s=0;s<r.length;s++){var o=r[s];(u=f[o.id]).refs--,a.push(u)}if(t){n(i(t,e),e)}for(s=0;s<a.length;s++){var u=a[s];if(0===u.refs){for(var c=0;c<u.parts.length;c++)u.parts[c]();delete f[u.id]}}}};var _=function(){var t=[];return function(e,r){return t[e]=r,t.filter(Boolean).join("\n")}}()},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var r=e.protocol+"//"+e.host,n=r+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var i=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(i))return t;var a;return a=0===i.indexOf("//")?i:0===i.indexOf("/")?r+i:n+i.replace(/^\.\//,""),"url("+JSON.stringify(a)+")"})}}])});

/***/ })

});