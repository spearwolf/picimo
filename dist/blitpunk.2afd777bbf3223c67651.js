webpackJsonpBLITPUNK([3],{

/***/ 336:
/***/ (function(module, exports, __webpack_require__) {

!function(t,e){ true?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.BLITPUNK=e():t.BLITPUNK=e()}(this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var r={};return e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=80)}([function(t,e,r){"use strict";e.__esModule=!0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.default=function(t){"object"===(void 0===t?"undefined":n(t))&&(t.destroyed||(i.is(t)&&"function"==typeof t.off&&t.off(),Object.keys(t).forEach(function(e){delete t[e]}),Object.defineProperty(t,"destroyed",{value:!0})))};var i=r(22)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),r.d(e,"ARRAY_TYPE",function(){return i}),e.setMatrixArrayType=function(t){i=t},e.toRadian=function(t){return t*a},e.equals=function(t,e){return Math.abs(t-e)<=n*Math.max(1,Math.abs(t),Math.abs(e))};const n=1e-6;e.EPSILON=n;let i="undefined"!=typeof Float32Array?Float32Array:Array;const o=Math.random;e.RANDOM=o;const a=Math.PI/180},function(t,e,r){"use strict";e.__esModule=!0;var n="undefined"!=typeof console?"function"==typeof console.debug?function(){var t;return(t=console).debug.apply(t,arguments)}:function(){var t;return(t=console).log.apply(t,arguments)}:function(){return 1},i="undefined"!=typeof console?"function"==typeof console.error?function(){var t;return(t=console).error.apply(t,arguments)}:function(){var t;return(t=console).log.apply(t,arguments)}:function(){return 1},o=function(){return 1};e.default=n,e.debug=o,e.error=i},function(t,e,r){"use strict";e.__esModule=!0;var n=r(84);e.default=n},function(t,e,r){"use strict";e.__esModule=!0;e.HTML_ELEMENT_ENTITY="blitpunk-entity",e.HTML_ELEMENT_CANVAS="blitpunk-canvas",e.HTML_ELEMENT_SPRITE_GROUP="blitpunk-sprite-group",e.HTML_ELEMENT_TEXTURE_ATLAS="blitpunk-texture-atlas",e.ATTR_ALPHA="alpha",e.ATTR_ANTIALIAS="antialias",e.ATTR_BLEND_MODE="blend-mode",e.ATTR_CAPACITY="capacity",e.ATTR_CLEAR_COLOR="clear-color",e.ATTR_DEPTH="depth",e.ATTR_DESCRIPTOR="descriptor",e.ATTR_FLIP_Y="flip-y",e.ATTR_FRAGMENT_SHADER="fragment-shader",e.ATTR_MODULE_SRC="module-src",e.ATTR_NEAREST="nearest",e.ATTR_PREMULTIPLIED_ALPHA="premultiplied-alpha",e.ATTR_PREMULTIPLY_ALPHA="premultiply-alpha",e.ATTR_PRESERVE_DRAW="preserve-drawing-buffer",e.ATTR_PRIMITIVE="primitive",e.ATTR_PROJECTION="projection",e.ATTR_REPEATABLE="repeatable",e.ATTR_SRC="src",e.ATTR_STENCIL="stencil",e.ATTR_TEXTURE_MAP="texture-map",e.ATTR_VERTEX_SHADER="vertex-shader",e.ATTR_VO_NEW="vo-new",e.ATTR_VO_ZERO="vo-zero"},function(t,e){var r=Array.isArray;t.exports=r},function(t,e,r){"use strict";e.__esModule=!0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=e,this.type=r,this._value=n,this.serial=0}return t.prototype.touch=function(){++this.serial},n(t,[{key:"value",get:function(){return this._value},set:function(t){this._value!==t&&(this._value=t,++this.serial)}}]),t}();e.default=i,i.TYPE=Object.freeze({UNIFORM:"uniform",ATTRIB:"attrib",TEXTURE_2D:"tex2d"})},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.createVoPropsSetter=e.isNumberGreaterThanZero=e.isNonEmptyString=e.getDefaultOption=e.removeItem=e.sample=e.parseCssStyledProperties=e.maxOf=e.isPowerOf2=e.generateUuid=e.findNextPowerOf2=e.Mat4=void 0;var i=n(r(3)),o=n(r(50)),a=r(49),u=n(r(74)),s=n(r(68)),f=n(r(181)),c=n(r(182)),l=n(r(183)),h=n(r(184)),d=n(r(185));e.Mat4=o.default,e.findNextPowerOf2=a.findNextPowerOf2,e.generateUuid=i.default,e.isPowerOf2=a.isPowerOf2,e.maxOf=a.maxOf,e.parseCssStyledProperties=u.default,e.sample=s.default,e.removeItem=f.default,e.getDefaultOption=c.default,e.isNonEmptyString=l.default,e.isNumberGreaterThanZero=h.default,e.createVoPropsSetter=d.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(r(3)),o=n(r(87)),a=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.resource=e,this.hints=r,this.id=r.id||(0,i.default)(),this.serial=new o.default("number"==typeof r.serial?r.serial:1)}return t.prototype.isSynced=function(t){var e=this.serial.value;return e>0&&e===t.serial.value},t.prototype.needSync=function(t){return!this.isSynced(t)},t.prototype.sync=function(t,e){this.needSync(t)&&(e(this.resource),this.serial.value=t.serial.value)},t}();e.default=a},function(t,e,r){"use strict";e.__esModule=!0;var n=Object.freeze({float32:4,int16:2,int32:4,int8:1,uint16:2,uint32:4,uint8:1}),i=Object.freeze({float32:Float32Array,int16:Int16Array,int32:Int32Array,int8:Int8Array,uint16:Uint16Array,uint32:Uint32Array,uint8:Uint8Array}),o=Object.freeze({float32:function(t){return t.float32Array},int32:function(t){return t.int32Array},int16:function(t){return t.int16Array},int8:function(t){return t.int8Array},uint32:function(t){return t.uint32Array},uint16:function(t){return t.uint16Array},uint8:function(t){return t.uint8Array}}),a=Object.freeze({float32:"FLOAT",int16:"SHORT",int32:"INT",int8:"BYTE",uint16:"UNSIGNED_SHORT",uint32:"UNSIGNED_INT",uint8:"UNSIGNED_BYTE"});e.BYTES_PER_ELEMENT=n,e.TYPED_ARRAY_CONSTRUCTOR=i,e.TYPED_ARRAY_GETTER=o,e.GL_ITEM_TYPES=a},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.Viewport=e.VOPool=e.VODescriptor=e.VOAttrDescriptor=e.VOArray=e.TextureState=e.TextureLibrary=e.TextureAtlasSpec=e.TextureAtlas=e.Texture=e.SpriteGroup=e.ShaderVariableGroup=e.ShaderVariableBufferGroup=e.ShaderVariableAlias=e.ShaderVariable=e.ShaderUniformVariable=e.ShaderTextureGroup=e.ShaderTexture2dVariable=e.ShaderSource=e.ShaderProgram=e.ShaderContext=e.ShaderAttribVariable=e.ShaderAttribValue=e.ResourceLibrary=e.Projection=e.PowerOf2Image=e.ElementIndexArray=e.BlendMode=e.AABB2=void 0;var i=n(r(45)),o=n(r(46)),a=n(r(47)),u=n(r(101)),s=n(r(48)),f=n(r(28)),c=n(r(117)),l=n(r(55)),h=n(r(56)),d=n(r(57)),p=n(r(124)),y=n(r(58)),b=n(r(21)),v=n(r(29)),m=n(r(59)),g=n(r(54)),_=n(r(6)),x=n(r(60)),M=n(r(61)),w=n(r(14)),A=n(r(62)),E=n(r(19)),T=n(r(33)),R=n(r(67)),O=n(r(69)),S=n(r(70)),P=n(r(11)),C=n(r(12)),I=n(r(179));e.AABB2=a.default,e.BlendMode=u.default,e.ElementIndexArray=s.default,e.PowerOf2Image=f.default,e.Projection=c.default,e.ResourceLibrary=l.default,e.ShaderAttribValue=h.default,e.ShaderAttribVariable=d.default,e.ShaderContext=p.default,e.ShaderProgram=y.default,e.ShaderSource=b.default,e.ShaderTexture2dVariable=v.default,e.ShaderTextureGroup=m.default,e.ShaderUniformVariable=g.default,e.ShaderVariable=_.default,e.ShaderVariableAlias=x.default,e.ShaderVariableBufferGroup=M.default,e.ShaderVariableGroup=w.default,e.SpriteGroup=A.default,e.Texture=E.default,e.TextureAtlas=T.default,e.TextureAtlasSpec=R.default,e.TextureLibrary=O.default,e.TextureState=S.default,e.VOArray=P.default,e.VOAttrDescriptor=C.default,e.VODescriptor=i.default,e.VOPool=o.default,e.Viewport=I.default},function(t,e,r){"use strict";e.__esModule=!0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=function(t){return t&&t.__esModule?t:{default:t}}(r(8)),o=r(9),a=function(){function t(e,r,n){var a=this,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.USAGE.DYNAMIC,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.resourceRef=new i.default(this,{usage:u}),this.descriptor=e,this.capacity=r,n instanceof ArrayBuffer?this.float32Array=new Float32Array(n):n instanceof DataView?this.float32Array=new Float32Array(n.buffer,n.byteOffset,n.byteLength/4):n instanceof Float32Array?this.float32Array=n:this.float32Array=new Float32Array(new ArrayBuffer(r*e.bytesPerVO)),this.resourceRef.hints.typedArray=this.float32Array;var f=this.buffer,c=this.bufferByteOffset,l=this.bufferByteLength;e.typeList.filter(function(t){return"float32"!==t}).forEach(function(t){a[t+"Array"]=new o.TYPED_ARRAY_CONSTRUCTOR[t](f,c,l/o.BYTES_PER_ELEMENT[t])}),this.enableAutotouch="boolean"==typeof s?s:u===t.USAGE.DYNAMIC,Object.freeze(this)}return t.prototype.touch=function(){this.resourceRef.serial.touch()},t.prototype.copy=function(t,e){var r=0;void 0===e&&(r=e*(this.descriptor.bytesPerVO>>2)),this.float32Array.set(t.float32Array,r)},t.prototype.subarray=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new t(this.descriptor,r,new DataView(this.buffer,this.bufferByteOffset+e*this.descriptor.bytesPerVO,r*this.descriptor.bytesPerVO))},n(t,[{key:"buffer",get:function(){return this.float32Array.buffer}},{key:"bufferByteOffset",get:function(){return this.float32Array.byteOffset}},{key:"bufferByteLength",get:function(){return this.float32Array.byteLength}}]),t}();e.default=a,a.USAGE=Object.freeze({STATIC:"static",DYNAMIC:"dynamic"})},function(t,e,r){"use strict";function n(t,e,r){if(t.attrNames){var n=t.attrNames[r];if(void 0!==n)return n}return e+"_"+r}function i(t,e){return function(){return t(this.voArray)[e]}}function o(t,e,r,n,i){return function(){var o=t(this.voArray),a=void 0,u=void 0;for(a=0;a<r;++a)for(u=0;u<e;++u)o[a*n+i+u]=arguments[a*e+u]}}function a(t,e,r,n){return function(i){for(var o=t(this.voArray),a=0;a<e;++a)o[a*r+n]=i}}function u(t){return t[0].toUpperCase()+t.substr(1)}e.__esModule=!0;var s=r(9),f=function(){function t(e,r,n,i,o,a,u){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=e,this.type=r,this.size=n,this.uniform=a,this.attrNames=u,this.bytesPerElement=s.BYTES_PER_ELEMENT[this.type],this.bytesPerVertex=this.bytesPerElement*n,this.byteOffset="number"!=typeof o?i*this.bytesPerElement:o,this.offset="number"!=typeof i?o/this.bytesPerElement:i}return t.prototype.vertexAttrCount=function(t){return t.bytesPerVertex/this.bytesPerElement},t.defineProperties=function(t,e,r){var f=t.name,c=s.TYPED_ARRAY_GETTER[t.type],l=r.vertexCount,h=t.vertexAttrCount(r),d=t.byteOffset/t.bytesPerElement,p=void 0,y=void 0;if(1===t.size)if(t.uniform){var b=i(c,d),v=a(c,l,h,d);t.getValue=function(t){return b.call(t)},t.setValue=function(t,e){return v.call(t,e)},e[f]={get:b,set:v,enumerable:!0}}else{var m=o(c,1,l,h,d);t.setValue=function(t,e){return m.apply(t,e)},e["set"+u(f)]={value:m,enumerable:!0};var g=[];for(p=0;p<r.vertexCount;++p){var _=i(c,d+p*h);g.push(_),e[f+p]={get:_,set:o(c,1,1,0,d+p*h),enumerable:!0}}t.getValue=function(t,e){return g[e].call(t)}}else if(t.size>=2)if(t.uniform){var x=function(t,e){return function(r){return t(this.voArray)[e+r]}}(c,d),M=function(t,e,r,n,i){return function(){var o=t(this.voArray),a=void 0,u=void 0;for(a=0;a<r;++a)for(u=0;u<e;++u)o[a*n+i+u]=arguments[u]}}(c,t.size,l,h,d);for(t.getValue=function(t,e,r){return x.call(t,r)},t.setValue=function(t,e){return M.apply(t,e)},e["get"+u(f)]={value:x,enumerable:!0},e["set"+u(f)]={value:M,enumerable:!0},p=0;p<t.size;++p){e[n(t,f,p)]={get:i(c,d+p),set:a(c,l,h,d+p),enumerable:!0}}}else{var w=o(c,t.size,l,h,d);t.setValue=function(t,e){return w.apply(t,e)},e["set"+u(f)]={value:w,enumerable:!0};var A=[];for(p=0;p<r.vertexCount;++p){var E=[];for(y=0;y<t.size;++y){var T=n(t,f,y)+p,R=i(c,d+p*h+y);E.push(R),e[T]={get:R,set:o(c,1,1,0,d+p*h+y),enumerable:!0}}A.push(E)}t.getValue=function(t,e,r){return A[e][r].call(t)}}},t}();e.default=f},function(t,e,r){var n=r(24).Symbol;t.exports=n},function(t,e,r){"use strict";e.__esModule=!0;var n=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.shaderVars=e}return t.prototype.pushVar=function(t){this.shaderVars.forEach(t.pushVar.bind(t))},t.prototype.popVar=function(t){this.shaderVars.forEach(t.popVar.bind(t))},t}();e.default=n},function(t,e,r){var n=r(5),i=r(129),o=r(130),a=r(23);t.exports=function(t,e){return n(t)?t:i(t,e)?[t]:o(a(t))}},function(t,e,r){var n=r(30)(Object,"create");t.exports=n},function(t,e,r){var n=r(63);t.exports=function(t,e){for(var r=t.length;r--;)if(n(t[r][0],e))return r;return-1}},function(t,e,r){var n=r(155);t.exports=function(t,e){var r=t.__data__;return n(e)?r["string"==typeof e?"string":"hash"]:r.map}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=n(r(28)),u=n(r(8)),s=function(t,e,r){return null!=t&&void 0!==t[e]?t[e]:r},f=function(){function t(e,r,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e instanceof t)this.parent=e,this.image=null;else{if(!("object"===(void 0===e?"undefined":i(e))&&"width"in e&&"height"in e))throw new Error("new Texture() panic: unexpected source argument!");this.image=e,this.parent=null,this._resourceRef=new u.default(this,{flipY:s(f,"flipY",!1),repeatable:s(f,"repeatable",!1),premultiplyAlpha:s(f,"premultiplyAlpha",!0),nearest:s(f,"nearest",!1)}),"origWidth"in e&&"origHeight"in e&&(r=e.origWidth,n=e.origHeight)}this._width=r,this._height=n,this.x=o,this.y=a}return t.load=function(e,r){return new a.default(e).complete.then(function(e){return new t(e,void 0,void 0,0,0,r)})},o(t,[{key:"root",get:function(){return this.parent&&this.parent.root||this}},{key:"imgEl",get:function(){var t=this.root;return t.image.imgEl||t.image}},{key:"resourceRef",get:function(){return this._resourceRef||this.root.resourceRef}},{key:"width",get:function(){return"number"==typeof this._width?this._width:this.image?this.image.width:this.parent?this.root.width:0},set:function(t){this._width=t}},{key:"height",get:function(){return"number"==typeof this._height?this._height:this.image?this.image.height:this.parent?this.root.height:0},set:function(t){this._height=t}},{key:"minS",get:function(){for(var t=this.x,e=this;null!=(e=e.parent);)t+=e.x;return t/this.root.image.width}},{key:"minT",get:function(){for(var t=this.y,e=this;null!=(e=e.parent);)t+=e.y;return t/this.root.image.height}},{key:"maxS",get:function(){for(var t=this.x+this.width,e=this;null!=(e=e.parent);)t+=e.x;return t/this.root.image.width}},{key:"maxT",get:function(){for(var t=this.y+this.height,e=this;null!=(e=e.parent);)t+=e.y;return t/this.root.image.height}}]),t}();e.default=f},function(t,e,r){"use strict";e.__esModule=!0;var n=r(202);Object.defineProperty(e,"default",{enumerable:!0,get:function(){return function(t){return t&&t.__esModule?t:{default:t}}(n).default}})},function(t,e,r){"use strict";e.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(r(3)),i=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=(0,n.default)(),this.type=e,this.source=r instanceof HTMLElement?r.textContent:r};e.default=i,i.VERTEX_SHADER="VERTEX_SHADER",i.FRAGMENT_SHADER="FRAGMENT_SHADER"},function(t,e,r){"use strict";function n(t){function e(t,e){return t.prio!==e.prio?e.prio-t.prio:t.id-e.id}function r(t,e,r){function o(){var e,n,o;if(p)for(e=0;e<p;e++)"function"==typeof(o=(n=i.boundObjects[e])[t])?r(o,n):n[h]&&r(null,n)}if(!(s.silenced||s.off.indexOf(t)>=0)){var a,u,f,c=i.callbacks[t],l=i.callbacks[d],p=i.boundObjects.length,y=!1;if(c||l.length)for(u=(c=c?c.concat(l):l).length,a=0;a<u;a++)f=c[a],!y&&f&&f.prio<n.PRIO_DEFAULT&&(o(),y=!0),e(f);y||o()}}if(t[h])return t;var i={lastCallbackId:0,callbacks:{},boundObjects:[]};i.callbacks[d]=[];var s=a({},{silenced:!1,off:[]});return u(t,h,s),void 0===n.PRIO_DEFAULT&&a(n,{PRIO_MAX:Number.POSITIVE_INFINITY,PRIO_A:1e9,PRIO_B:1e7,PRIO_C:1e5,PRIO_DEFAULT:0,PRIO_LOW:-1e5,PRIO_MIN:Number.NEGATIVE_INFINITY}),t.on=function(t,r,u){var f=arguments.length;if(0!==f){var h;if(1===f){if("string"==typeof t)return void((h=s.off.indexOf(t))>=0&&s.off.splice(h,1));if("object"!=typeof t&&"function"!=typeof t)return void(c&&l(p,".on() called with insufficient arguments!",arguments));u=t,t=d,r=n.PRIO_DEFAULT}2===f&&(u=r,r=n.PRIO_DEFAULT);var y=i.callbacks,b=y[t]||(y[t]=[]),v=++i.lastCallbackId,m=a({},{id:v,fn:u,prio:"number"!=typeof r?n.PRIO_DEFAULT:r,isFunction:"function"==typeof u});return b.push(m),b.sort(e),v}s.silenced&&(o(s,"silenced",!1),s.off.length=0)},t.once=function(e,r,i){var o=arguments.length;if(o&&!(o>3)){1===o?(i=e,e=d,r=n.PRIO_DEFAULT):2===o&&(i=r,r=n.PRIO_DEFAULT);var a=t.on(e,r,function(){var e=i.apply(this,arguments);return t.off(a),e});return a}c&&l(p,".once() called with insufficient arguments!",arguments)},t.off=function(t){if(0!==arguments.length)if("string"!=typeof t){var e,r,n,a,u,f=i.callbacks,c="object"==typeof t;if("number"==typeof t||"function"==typeof t||c)for(u=Object.keys(f),n=0;n<u.length;n++)for(a=f[u[n]],r=0;r<a.length;r++)if(((e=a[r]).id===t||e.fn===t)&&(a.splice(r,1),!c))return;c&&(r=i.boundObjects.indexOf(t))>=0&&i.boundObjects.splice(r,1)}else-1===s.off.indexOf(t)&&s.off.push(t);else s.silenced||(o(s,"silenced",!0),s.off.length=0)},t.connect=function(t,e){var r=arguments.length;if(2===r)return function(t,e,r){var i,o,a,u;for(o in r)r.hasOwnProperty(o)&&"function"==typeof(a=e[o])&&(i=r[o],Array.isArray(i)?(u=i[0],i=i[1]):u=n.PRIO_DEFAULT,t.on(i,u,a));return t}(this,t,e);c&&l(p,".connect() called with insufficient arguments (need 2 args, but got "+r+")",arguments)},t.emit=function(){for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];var n=t[0],i=t.slice(1),o=this;r(n,function(e){if(e.isFunction)e.fn.apply(o,i);else{var r=e.fn[n];"function"==typeof r?r.apply(e.fn,i):e.fn.emit&&e.fn.emit.apply(e.fn,t)}},function(e,r){e?e.apply(r,i):r.emit&&r.emit.apply(r,t)})},t.emitReduce=function(){function t(t){void 0!==t&&(i=t)}for(var e=new Array(arguments.length),n=0;n<e.length;++n)e[n]=arguments[n];var i,o=e.shift();0===e.length?(i={},e.push(i)):t(e[0]);var a=this,u=[o].concat(e);return r(o,function(r){if(r.isFunction)e[0]=i,t(r.fn.apply(a,e));else{var n=r.fn[o];"function"==typeof n?(e[0]=i,t(n.apply(r.fn,e))):r.fn.emitReduce&&(u[1]=i,t(r.fn.emitReduce.apply(r.fn,u)))}},function(r,n){r&&(e[0]=i,t(r.apply(n,e)))}),i},t.from=function(t,e){var r=this;return new e(function(e){var n=r.on(t,function(t){e.next(t)});return function(){r.off(n)}})},t.subscribe=function(t,e,r,n){var i=this;return t.subscribe(function(t){i.emit(e,t)},r?function(t){i.emit(r,t)}:void 0,n?function(t){i.emit(n,t)}:void 0)},t}function i(t,e){var r=("string"==typeof t||"symbol"==typeof t)&&t||function(){var t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)});return f?Symbol(t):t}(),i=n({}),a=!(!e||!e.replace),s=function(t){o(i,y,t)},c=function(t){return function(e){t.apply(i,e)}}(i.emit);return u(i,"events",[]),o(i,"id",r),i.collect=function(){return i[y]!==v&&s(v),i},i.emit=function(){var t,e=new Array(arguments.length);for(t=0;t<e.length;++t)e[t]=arguments[t];if(i[y]===b)c(e);else{if(a){var r,n=e[0];for(t=0,r=i.events.length;t<r;t++)if(i.events[t][0]===n)return void(i.events[t]=e)}i.events.push(e)}},i.play=function(){return i[y]!==b&&(s(b),i.events.forEach(c),i.events.length=0),i},i.toggle=function(){return i[y]!==b?i.play():i.collect()},i.play()}function o(t,e,r){return Object.defineProperty(t,e,{value:r,configurable:!0,enumerable:!0}),t}function a(t,e){var r,n=Object.keys(e);for(r=n.length;r--;)o(t,n[r],e[n[r]]);return t}function u(t,e,r){return Object.defineProperty(t,e,{value:r,configurable:!0}),t}var s="undefined"!=typeof Map,f="undefined"!=typeof Symbol,c="undefined"!=typeof console,l=c?console[console.warn?"warn":"log"].bind(console):function(){},h=f?(Symbol.eventize||(Symbol.eventize=Symbol("eventize")),Symbol.eventize):"@@eventize",d="*",p="[eventize.js]";n.is=function(t){return!(!t||!t[h])},u(n,"EventizeNamespace",h),u(n,"queues",s?new Map:{}),n.queue=function(t){var e,r,o=arguments.length;return o>=1&&("object"==typeof t&&2!==o||(e=s?n.queues.get(t):n.queues[t]),2===o?r=arguments[1]:1===o&&"object"==typeof t&&(r=t)),e||(e=i(t,r),s?n.queues.set(e.id,e):n.queues[e.id]=e),e};var y="state",b="play",v="collect";t.exports=n},function(t,e,r){var n=r(108);t.exports=function(t){return null==t?"":n(t)}},function(t,e,r){var n=r(109),i="object"==typeof self&&self&&self.Object===Object&&self,o=n||i||Function("return this")();t.exports=o},function(t,e,r){var n=r(26),i=r(27),o="[object Symbol]";t.exports=function(t){return"symbol"==typeof t||i(t)&&n(t)==o}},function(t,e,r){var n=r(13),i=r(111),o=r(112),a="[object Null]",u="[object Undefined]",s=n?n.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?u:a:s&&s in Object(t)?i(t):o(t)}},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,e,r){"use strict";function n(t,e){t.imgEl=(0,o.isPowerOf2)(e.width)&&(0,o.isPowerOf2)(e.height)?e:function(t){var e=(0,o.findNextPowerOf2)(t.width),r=(0,o.findNextPowerOf2)(t.height),n=document.createElement("canvas");return n.width=e,n.height=r,n.getContext("2d").drawImage(t,0,0),n}(e),t.origWidth=e.width,t.origHeight=e.height}e.__esModule=!0;var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=r(49),a=function(){function t(e){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var i=void 0;"string"==typeof e?(i=new window.Image).src=e:i=e,!1===i.complete||0===i.width&&0===i.height?(this.imgEl=null,this.complete=new Promise(function(t){var e=i.onload;i.onload=function(){e&&e.call(i),n(r,i),t(r)}})):(n(this,i),this.complete=Promise.resolve(this))}return i(t,[{key:"isComplete",get:function(){return null!=this.imgEl}},{key:"width",get:function(){return this.imgEl&&this.imgEl.width||0}},{key:"height",get:function(){return this.imgEl&&this.imgEl.height||0}}]),t}();e.default=a},function(t,e,r){"use strict";e.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(r(6)),i=function(t){function e(r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r,n.default.TYPE.TEXTURE_2D,i));return o.texture=null,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.syncTextureAndValue=function(t){if(null!=this.texture){var e=t.syncTexture(this.texture);this.value=e.bind()}},e}(n.default);e.default=i},function(t,e,r){var n=r(137),i=r(142);t.exports=function(t,e){var r=i(t,e);return n(r)?r:void 0}},function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e,r){var n=r(25),i=1/0;t.exports=function(t){if("string"==typeof t||n(t))return t;var e=t+"";return"0"==e&&1/t==-i?"-0":e}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(r(19)),o=n(r(67)),a=n(r(68)),u=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.rootTexture=e,this.spec=r,this.frames=new Map}return t.prototype.addFrame=function(t,e,r,n,o){this.frames.set(t,new i.default(this.rootTexture,e,r,n,o))},t.prototype.getFrame=function(t){return this.frames.get(t)},t.prototype.getRandomFrame=function(){return(0,a.default)(Array.from(this.frames.values()))},t.prototype.getRandomFrameName=function(){return(0,a.default)(this.frameNames())},t.prototype.frameNames=function(){return Array.from(this.frames.keys())},t.load=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;return o.default.load(t,e||{}).then(function(t){return t.createTextureAtlas(r||t.imageUrl,n)})},t}();e.default=u},function(t,e,r){var n;!function(i){function o(t,e){if(t=t||"",e=e||{},t instanceof o)return t;if(!(this instanceof o))return new o(t,e);var r=function(t){var e={r:0,g:0,b:0},r=1,n=null,o=null,a=null,u=!1,s=!1;"string"==typeof t&&(t=function(t){t=t.replace(I,"").replace(L,"").toLowerCase();var e=!1;if(U[t])t=U[t],e=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};var r;if(r=D.rgb.exec(t))return{r:r[1],g:r[2],b:r[3]};if(r=D.rgba.exec(t))return{r:r[1],g:r[2],b:r[3],a:r[4]};if(r=D.hsl.exec(t))return{h:r[1],s:r[2],l:r[3]};if(r=D.hsla.exec(t))return{h:r[1],s:r[2],l:r[3],a:r[4]};if(r=D.hsv.exec(t))return{h:r[1],s:r[2],v:r[3]};if(r=D.hsva.exec(t))return{h:r[1],s:r[2],v:r[3],a:r[4]};if(r=D.hex8.exec(t))return{r:T(r[1]),g:T(r[2]),b:T(r[3]),a:P(r[4]),format:e?"name":"hex8"};if(r=D.hex6.exec(t))return{r:T(r[1]),g:T(r[2]),b:T(r[3]),format:e?"name":"hex"};if(r=D.hex4.exec(t))return{r:T(r[1]+""+r[1]),g:T(r[2]+""+r[2]),b:T(r[3]+""+r[3]),a:P(r[4]+""+r[4]),format:e?"name":"hex8"};if(r=D.hex3.exec(t))return{r:T(r[1]+""+r[1]),g:T(r[2]+""+r[2]),b:T(r[3]+""+r[3]),format:e?"name":"hex"};return!1}(t));"object"==typeof t&&(C(t.r)&&C(t.g)&&C(t.b)?(e=function(t,e,r){return{r:255*A(t,255),g:255*A(e,255),b:255*A(r,255)}}(t.r,t.g,t.b),u=!0,s="%"===String(t.r).substr(-1)?"prgb":"rgb"):C(t.h)&&C(t.s)&&C(t.v)?(n=O(t.s),o=O(t.v),e=function(t,e,r){t=6*A(t,360),e=A(e,100),r=A(r,100);var n=i.floor(t),o=t-n,a=r*(1-e),u=r*(1-o*e),s=r*(1-(1-o)*e),f=n%6;return{r:255*[r,u,a,a,s,r][f],g:255*[s,r,r,u,a,a][f],b:255*[a,a,s,r,r,u][f]}}(t.h,n,o),u=!0,s="hsv"):C(t.h)&&C(t.s)&&C(t.l)&&(n=O(t.s),a=O(t.l),e=function(t,e,r){function n(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t}var i,o,a;t=A(t,360),e=A(e,100),r=A(r,100);if(0===e)i=o=a=r;else{var u=r<.5?r*(1+e):r+e-r*e,s=2*r-u;i=n(s,u,t+1/3),o=n(s,u,t),a=n(s,u,t-1/3)}return{r:255*i,g:255*o,b:255*a}}(t.h,n,a),u=!0,s="hsl"),t.hasOwnProperty("a")&&(r=t.a));return r=w(r),{ok:u,format:t.format||s,r:k(255,F(e.r,0)),g:k(255,F(e.g,0)),b:k(255,F(e.b,0)),a:r}}(t);this._originalInput=t,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=j(100*this._a)/100,this._format=e.format||r.format,this._gradientType=e.gradientType,this._r<1&&(this._r=j(this._r)),this._g<1&&(this._g=j(this._g)),this._b<1&&(this._b=j(this._b)),this._ok=r.ok,this._tc_id=N++}function a(t,e,r){t=A(t,255),e=A(e,255),r=A(r,255);var n,i,o=F(t,e,r),a=k(t,e,r),u=(o+a)/2;if(o==a)n=i=0;else{var s=o-a;switch(i=u>.5?s/(2-o-a):s/(o+a),o){case t:n=(e-r)/s+(e<r?6:0);break;case e:n=(r-t)/s+2;break;case r:n=(t-e)/s+4}n/=6}return{h:n,s:i,l:u}}function u(t,e,r){t=A(t,255),e=A(e,255),r=A(r,255);var n,i,o=F(t,e,r),a=k(t,e,r),u=o-a;if(i=0===o?0:u/o,o==a)n=0;else{switch(o){case t:n=(e-r)/u+(e<r?6:0);break;case e:n=(r-t)/u+2;break;case r:n=(t-e)/u+4}n/=6}return{h:n,s:i,v:o}}function s(t,e,r,n){var i=[R(j(t).toString(16)),R(j(e).toString(16)),R(j(r).toString(16))];return n&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function f(t,e,r,n){return[R(S(n)),R(j(t).toString(16)),R(j(e).toString(16)),R(j(r).toString(16))].join("")}function c(t,e){e=0===e?0:e||10;var r=o(t).toHsl();return r.s-=e/100,r.s=E(r.s),o(r)}function l(t,e){e=0===e?0:e||10;var r=o(t).toHsl();return r.s+=e/100,r.s=E(r.s),o(r)}function h(t){return o(t).desaturate(100)}function d(t,e){e=0===e?0:e||10;var r=o(t).toHsl();return r.l+=e/100,r.l=E(r.l),o(r)}function p(t,e){e=0===e?0:e||10;var r=o(t).toRgb();return r.r=F(0,k(255,r.r-j(-e/100*255))),r.g=F(0,k(255,r.g-j(-e/100*255))),r.b=F(0,k(255,r.b-j(-e/100*255))),o(r)}function y(t,e){e=0===e?0:e||10;var r=o(t).toHsl();return r.l-=e/100,r.l=E(r.l),o(r)}function b(t,e){var r=o(t).toHsl(),n=(r.h+e)%360;return r.h=n<0?360+n:n,o(r)}function v(t){var e=o(t).toHsl();return e.h=(e.h+180)%360,o(e)}function m(t){var e=o(t).toHsl(),r=e.h;return[o(t),o({h:(r+120)%360,s:e.s,l:e.l}),o({h:(r+240)%360,s:e.s,l:e.l})]}function g(t){var e=o(t).toHsl(),r=e.h;return[o(t),o({h:(r+90)%360,s:e.s,l:e.l}),o({h:(r+180)%360,s:e.s,l:e.l}),o({h:(r+270)%360,s:e.s,l:e.l})]}function _(t){var e=o(t).toHsl(),r=e.h;return[o(t),o({h:(r+72)%360,s:e.s,l:e.l}),o({h:(r+216)%360,s:e.s,l:e.l})]}function x(t,e,r){e=e||6,r=r||30;var n=o(t).toHsl(),i=360/r,a=[o(t)];for(n.h=(n.h-(i*e>>1)+720)%360;--e;)n.h=(n.h+i)%360,a.push(o(n));return a}function M(t,e){e=e||6;for(var r=o(t).toHsv(),n=r.h,i=r.s,a=r.v,u=[],s=1/e;e--;)u.push(o({h:n,s:i,v:a})),a=(a+s)%1;return u}function w(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function A(t,e){(function(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)})(t)&&(t="100%");var r=function(t){return"string"==typeof t&&-1!=t.indexOf("%")}(t);return t=k(e,F(0,parseFloat(t))),r&&(t=parseInt(t*e,10)/100),i.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function E(t){return k(1,F(0,t))}function T(t){return parseInt(t,16)}function R(t){return 1==t.length?"0"+t:""+t}function O(t){return t<=1&&(t=100*t+"%"),t}function S(t){return i.round(255*parseFloat(t)).toString(16)}function P(t){return T(t)/255}function C(t){return!!D.CSS_UNIT.exec(t)}var I=/^\s+/,L=/\s+$/,N=0,j=i.round,k=i.min,F=i.max,V=i.random;o.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var t,e,r,n,o,a,u=this.toRgb();return t=u.r/255,e=u.g/255,r=u.b/255,n=t<=.03928?t/12.92:i.pow((t+.055)/1.055,2.4),o=e<=.03928?e/12.92:i.pow((e+.055)/1.055,2.4),a=r<=.03928?r/12.92:i.pow((r+.055)/1.055,2.4),.2126*n+.7152*o+.0722*a},setAlpha:function(t){return this._a=w(t),this._roundA=j(100*this._a)/100,this},toHsv:function(){var t=u(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=u(this._r,this._g,this._b),e=j(360*t.h),r=j(100*t.s),n=j(100*t.v);return 1==this._a?"hsv("+e+", "+r+"%, "+n+"%)":"hsva("+e+", "+r+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var t=a(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=a(this._r,this._g,this._b),e=j(360*t.h),r=j(100*t.s),n=j(100*t.l);return 1==this._a?"hsl("+e+", "+r+"%, "+n+"%)":"hsla("+e+", "+r+"%, "+n+"%, "+this._roundA+")"},toHex:function(t){return s(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return function(t,e,r,n,i){var o=[R(j(t).toString(16)),R(j(e).toString(16)),R(j(r).toString(16)),R(S(n))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:j(this._r),g:j(this._g),b:j(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+j(this._r)+", "+j(this._g)+", "+j(this._b)+")":"rgba("+j(this._r)+", "+j(this._g)+", "+j(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:j(100*A(this._r,255))+"%",g:j(100*A(this._g,255))+"%",b:j(100*A(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+j(100*A(this._r,255))+"%, "+j(100*A(this._g,255))+"%, "+j(100*A(this._b,255))+"%)":"rgba("+j(100*A(this._r,255))+"%, "+j(100*A(this._g,255))+"%, "+j(100*A(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(B[s(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+f(this._r,this._g,this._b,this._a),r=e,n=this._gradientType?"GradientType = 1, ":"";if(t){var i=o(t);r="#"+f(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+n+"startColorstr="+e+",endColorstr="+r+")"},toString:function(t){var e=!!t;t=t||this._format;var r=!1,n=this._a<1&&this._a>=0;return e||!n||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"hex4"!==t&&"hex8"!==t&&"name"!==t?("rgb"===t&&(r=this.toRgbString()),"prgb"===t&&(r=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(r=this.toHexString()),"hex3"===t&&(r=this.toHexString(!0)),"hex4"===t&&(r=this.toHex8String(!0)),"hex8"===t&&(r=this.toHex8String()),"name"===t&&(r=this.toName()),"hsl"===t&&(r=this.toHslString()),"hsv"===t&&(r=this.toHsvString()),r||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},clone:function(){return o(this.toString())},_applyModification:function(t,e){var r=t.apply(null,[this].concat([].slice.call(e)));return this._r=r._r,this._g=r._g,this._b=r._b,this.setAlpha(r._a),this},lighten:function(){return this._applyModification(d,arguments)},brighten:function(){return this._applyModification(p,arguments)},darken:function(){return this._applyModification(y,arguments)},desaturate:function(){return this._applyModification(c,arguments)},saturate:function(){return this._applyModification(l,arguments)},greyscale:function(){return this._applyModification(h,arguments)},spin:function(){return this._applyModification(b,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(x,arguments)},complement:function(){return this._applyCombination(v,arguments)},monochromatic:function(){return this._applyCombination(M,arguments)},splitcomplement:function(){return this._applyCombination(_,arguments)},triad:function(){return this._applyCombination(m,arguments)},tetrad:function(){return this._applyCombination(g,arguments)}},o.fromRatio=function(t,e){if("object"==typeof t){var r={};for(var n in t)t.hasOwnProperty(n)&&(r[n]="a"===n?t[n]:O(t[n]));t=r}return o(t,e)},o.equals=function(t,e){return!(!t||!e)&&o(t).toRgbString()==o(e).toRgbString()},o.random=function(){return o.fromRatio({r:V(),g:V(),b:V()})},o.mix=function(t,e,r){r=0===r?0:r||50;var n=o(t).toRgb(),i=o(e).toRgb(),a=r/100;return o({r:(i.r-n.r)*a+n.r,g:(i.g-n.g)*a+n.g,b:(i.b-n.b)*a+n.b,a:(i.a-n.a)*a+n.a})},o.readability=function(t,e){var r=o(t),n=o(e);return(i.max(r.getLuminance(),n.getLuminance())+.05)/(i.min(r.getLuminance(),n.getLuminance())+.05)},o.isReadable=function(t,e,r){var n,i,a=o.readability(t,e);switch(i=!1,(n=function(t){var e,r;return t=t||{level:"AA",size:"small"},e=(t.level||"AA").toUpperCase(),r=(t.size||"small").toLowerCase(),"AA"!==e&&"AAA"!==e&&(e="AA"),"small"!==r&&"large"!==r&&(r="small"),{level:e,size:r}}(r)).level+n.size){case"AAsmall":case"AAAlarge":i=a>=4.5;break;case"AAlarge":i=a>=3;break;case"AAAsmall":i=a>=7}return i},o.mostReadable=function(t,e,r){var n,i,a,u,s=null,f=0;i=(r=r||{}).includeFallbackColors,a=r.level,u=r.size;for(var c=0;c<e.length;c++)(n=o.readability(t,e[c]))>f&&(f=n,s=o(e[c]));return o.isReadable(t,s,{level:a,size:u})||!i?s:(r.includeFallbackColors=!1,o.mostReadable(t,["#fff","#000"],r))};var U=o.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},B=o.hexNames=function(t){var e={};for(var r in t)t.hasOwnProperty(r)&&(e[t[r]]=r);return e}(U),D=function(){var t="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",e="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?",r="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?";return{CSS_UNIT:new RegExp(t),rgb:new RegExp("rgb"+e),rgba:new RegExp("rgba"+r),hsl:new RegExp("hsl"+e),hsla:new RegExp("hsla"+r),hsv:new RegExp("hsv"+e),hsva:new RegExp("hsva"+r),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();void 0!==t&&t.exports?t.exports=o:void 0!==(n=function(){return o}.call(e,r,e,t))&&(t.exports=n)}(Math)},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(r(71)),o=n(r(72)),a=new i.default;(0,o.default)(a),e.default=a},function(t,e,r){"use strict";e.__esModule=!0;e.COMPONENT_PRIORITY_CLEAR=1e3,e.COMPONENT_PRIORITY_BLEND=900,e.COMPONENT_PRIORITY_PROJECTION=500,e.COMPONENT_PRIORITY_POST_BLEND=-100},function(t,e,r){"use strict";e.__esModule=!0;var n=new(function(t){return t&&t.__esModule?t:{default:t}}(r(75)).default);e.default=n},function(t,e,r){"use strict";e.__esModule=!0;var n=new(function(t){return t&&t.__esModule?t:{default:t}}(r(69)).default);e.default=n},function(t,e,r){"use strict";e.__esModule=!0;var n=r(40);Object.keys(n).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}})});var i=function(t){return t&&t.__esModule?t:{default:t}}(r(198));e.default=i.default},function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.textureLibrary=e.resourceLibrary=e.entityManager=e.componentRegistry=e.utils=e.ecs=e.core=e.App=void 0;var o=i(r(82)),a=n(r(10)),u=n(r(78)),s=n(r(7)),f=i(r(35)),c=i(r(37)),l=i(r(77)),h=i(r(38));e.App=o.default,e.core=a,e.ecs=u,e.utils=s,e.componentRegistry=f.default,e.entityManager=c.default,e.resourceLibrary=l.default,e.textureLibrary=h.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(r(83)),o=n(r(94)),a=n(r(0)),u=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Object.defineProperty(this,"gl",{value:e}),function(t){var e=t.gl;t.DEPTH_BITS=e.getParameter(e.DEPTH_BITS),t.STENCIL_BITS=e.getParameter(e.STENCIL_BITS),t.MAX_TEXTURE_IMAGE_UNITS=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}(this),this.resourceLibrary=new i.default(this),this.boundBuffers=new Map,this.currentProgram=0,this.enabledVertexAttribLocations=[],this.textureManager=new o.default(this),this.boundTextures=new Array(this.MAX_TEXTURE_IMAGE_UNITS);for(var r=0;r<this.boundTextures.length;r++)this.boundTextures[r]={TEXTURE_2D:null};this.readCurrentState(),this.activeTexture(0)}return t.prototype.destroy=function(){this.textureManager.destroy(),this.boundBuffers.clear(),this.resourceLibrary.destroy(),(0,a.default)(this)},t.prototype.blend=function(t){var e=this.gl;t.enable?(this.blendEnabled||(e.enable(e.BLEND),this.blendEnabled=!0),e.blendFunc(e[t.sfactor],e[t.dfactor])):this.blendEnabled&&(e.disable(e.BLEND),this.blendEnabled=!1)},t.prototype.activeTexture=function(t){var e=this.gl,r=e.TEXTURE0+t;this.activeTexUnit!==r&&(this.activeTexUnit=r,e.activeTexture(this.activeTexUnit))},t.prototype.bindTexture2d=function(t){var e=this.gl,r=this.boundTextures[this.activeTexUnit-e.TEXTURE0];r.TEXTURE_2D!==t&&(r.TEXTURE_2D=t,e.bindTexture(e.TEXTURE_2D,t))},t.prototype.readCurrentState=function(){var t=this.gl;this.boundBuffers.set(t.ARRAY_BUFFER,t.getParameter(t.ARRAY_BUFFER_BINDING)),this.boundBuffers.set(t.ELEMENT_ARRAY_BUFFER,t.getParameter(t.ELEMENT_ARRAY_BUFFER_BINDING)),this.currentProgram=t.getParameter(t.CURRENT_PROGRAM),this.blendEnabled=t.getParameter(t.BLEND)},t.prototype.bindBuffer=function(t,e){this.boundBuffers.get(t)!==e&&(this.gl.bindBuffer(t,e),this.boundBuffers.set(t,e))},t.prototype.useProgram=function(t){return this.currentProgram!==t&&(this.gl.useProgram(t),this.currentProgram=t,!0)},t.prototype.enableVertexAttribArrays=function(t){var e=this,r=this.gl;this.enabledVertexAttribLocations.filter(function(e){return-1===t.indexOf(e)}).forEach(function(n){r.disableVertexAttribArray(n),e.enabledVertexAttribLocations.splice(t.indexOf(n),1)}),t.forEach(function(t){-1===e.enabledVertexAttribLocations.indexOf(t)&&(r.enableVertexAttribArray(t),e.enabledVertexAttribLocations.push(t))})},t}();e.default=u},function(t,e){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){"use strict";e.__esModule=!0;var n=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.ARRAY_BUFFER,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.STATIC_DRAW;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.glx=e;var i=e.gl;this.target=i[r],this.usage=i[n],this.glBuffer=i.createBuffer()}return t.prototype.bindBuffer=function(){this.glx.bindBuffer(this.target,this.glBuffer)},t.prototype.bufferData=function(t){this.bindBuffer(),this.glx.gl.bufferData(this.target,t,this.usage)},t}();e.default=n,n.ARRAY_BUFFER="ARRAY_BUFFER",n.ELEMENT_ARRAY_BUFFER="ELEMENT_ARRAY_BUFFER",n.STATIC_DRAW="STATIC_DRAW",n.DYNAMIC_DRAW="DYNAMIC_DRAW"},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=r(10),o=n(r(180)),a=n(r(0)),u=function(t){var e=t.blendStack[t.blendStack.length-1]||t.initialBlendMode;e&&!e.isEqual(t.currentBlendMode)&&(t.glx.blend(e),t.currentBlendMode=e)},s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Object.defineProperty(this,"glx",{value:e}),this.shaderContext=new i.ShaderContext,this.autotouchResources=new Map,this.clearBuffer=new o.default(this.glx),this.blendStack=[],this.initialBlendMode=null,this.currentBlendMode=null,this.viewport=null}return t.prototype.destroy=function(){this.shaderContext.destroy(),this.autotouchResources.clear(),this.blendStack.length=0,(0,a.default)(this)},t.prototype.setViewport=function(t,e,r,n){var o=this.viewport;o||(this.viewport=new i.Viewport,o=this.viewport),o.x=t,o.y=e,o.width=r,o.height=n},t.prototype.setInitialBlendMode=function(t){this.initialBlendMode=t},t.prototype.renderFrame=function(t){this.beginRenderFrame(),t(),this.endRenderFrame()},t.prototype.beginRenderFrame=function(){this.shaderContext.clear(),this.clearBuffer.reset(),this.setGlViewport(this.viewport)},t.prototype.endRenderFrame=function(){this.autotouchResources.clear()},t.prototype.setGlViewport=function(t){var e=this.glx.gl;t?e.viewport(t.x,t.y,t.width,t.height):e.viewport(0,0)},t.prototype.pushBlendMode=function(t){this.blendStack.push(t)},t.prototype.popBlendMode=function(){this.blendStack.pop()},t.prototype.useShaderProgram=function(t){var e=this.glx.resourceLibrary.loadProgram(t),r=this.shaderContext;e.use(r),e.loadUniforms(r,this),e.loadAttributes(r,this)},t.prototype.drawArrays=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;u(this);var n=this.glx.gl;n.drawArrays(n[t],r,e)},t.prototype.drawIndexed=function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;u(this),this.syncBuffer(e).bindBuffer();var i=this.glx.gl;i.drawElements(i[t],r||e.length,i.UNSIGNED_SHORT,n*e.array.BYTES_PER_ELEMENT)},t.prototype.syncBuffer=function(t){var e=t.resourceRef;!function(t,e){var r=e.resource;r.enableAutotouch&&(t.autotouchResources.has(e.id)||(t.autotouchResources.set(e.id,!0),r.touch()))}(this,e);var r=this.glx.resourceLibrary.loadBuffer(e);return r.sync(e,function(t){return t.bufferData(e.hints.typedArray)}),r.resource},t.prototype.syncTexture=function(t){var e=t.resourceRef,r=this.glx.resourceLibrary.loadTexture(e);return r.sync(e,function(t){return t.uploadImageData()}),r.resource},t}();e.default=s},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=r(95),a=n(r(11)),u=n(r(96)),s=n(r(97)),f=n(r(98)),c=n(r(99)),l=function(){function t(e){var r=this,n=e.vertexCount,i=e.attributes,o=e.aliases,a=e.proto;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.vertexCount=parseInt(n,10),(0,f.default)(this,i),(0,c.default)(this,o),(0,u.default)(this,a),(0,s.default)(this),Object.keys(this.attr).forEach(function(t){return Object.freeze(r.attr[t])}),Object.freeze(this.attr),Object.freeze(this)}return t.prototype.createVOArray=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return new a.default(this,t,null,e)},t.prototype.createVO=function(t){return(0,o.createVO)(Object.create(this.voPrototype),this,t)},t.prototype.hasAttribute=function(t,e){var r=this.attr[t];return r&&r.size===e},i(t,[{key:"maxIndexedVOPoolSize",get:function(){return Math.floor(65536/this.vertexCount)}}]),t}();e.default=l},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=n(r(100)),a=n(r(3)),u=n(r(11)),s=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=(0,a.default)(),this.descriptor=e,this.capacity=r&&r.capacity||this.descriptor.maxIndexedVOPoolSize,this.maxAllocVOSize=r&&r.maxAllocVOSize||0,this.usage=r&&r.usage||t.USAGE.DYNAMIC;var n=r&&r.voArray;if(n){if(n.usage!==this.usage)throw new Error("VOPool usage(="+this.usage+") mismatch with given voArray(usage="+n.usage+")")}else n=e.createVOArray(this.capacity,this.usage);this.voArray=n,this.voZero=r&&r.voZero||e.createVO(),this.voNew=r&&r.voNew||e.createVO(),this.availableVOs=[],this.usedVOs=[],(0,o.default)(this,this.maxAllocVOSize)}return t.prototype.alloc=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(t>1){for(var e=[],r=0;r<t;++r){var n=this.alloc(1);if(void 0===n)break;e.push(n)}return e}var i=this.availableVOs.shift();return void 0===i?this.capacity-this.allocatedCount>0?((0,o.default)(this,this.maxAllocVOSize),this.alloc()):void 0:(this.usedVOs.push(i),i.voArray.copy(this.voNew.voArray),i)},t.prototype.free=function(t){if(Array.isArray(t))t.forEach(function(t){return t.free()});else{var e=this.usedVOs.indexOf(t);if(-1!==e){var r=this.usedVOs.length-1;if(e!==r){var n=this.usedVOs[r];t.voArray.copy(n.voArray);var i=n.voArray;n.voArray=t.voArray,t.voArray=i,this.usedVOs.splice(e,1,n)}this.usedVOs.pop(),this.availableVOs.unshift(t),t.voArray.copy(this.voZero.voArray)}}},i(t,[{key:"usedCount",get:function(){return this.usedVOs.length}},{key:"availableCount",get:function(){return this.capacity-this.usedVOs.length}},{key:"allocatedCount",get:function(){return this.availableVOs.length+this.usedVOs.length}}]),t}();e.default=s,s.USAGE=u.default.USAGE},function(t,e,r){"use strict";e.__esModule=!0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=function(t){return t<0?0:t},o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e<r?(this.minX=e,this.maxX=r):(this.minX=r,this.maxX=e),n<i?(this.minY=n,this.maxY=i):(this.minY=i,this.maxY=n)}return t.prototype.addPoint=function(t,e){t<this.minX?this.minX=t:t>this.maxX&&(this.maxX=t),e<this.minY?this.minY=e:e>this.maxY&&(this.maxY=e)},t.prototype.isInside=function(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY},t.prototype.isIntersection=function(t){return!(t.maxX<this.minX||t.minX>this.maxX||t.maxY<this.minY||t.minY>this.maxY)},n(t,[{key:"width",get:function(){return i(this.maxX-this.minX+1)}},{key:"height",get:function(){return i(this.maxY-this.minY+1)}},{key:"centerX",get:function(){return i((this.maxX-this.minX)/2)}},{key:"centerY",get:function(){return i((this.maxY-this.minY)/2)}}]),t}();e.default=o},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(r(8)),o=n(r(43)),a=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.resourceRef=new i.default(this,{target:o.default.ELEMENT_ARRAY_BUFFER,usage:"static"}),this.objectCount=e,this.itemCount=r,this.length=e*r,this.array=new Uint16Array(this.length),this.resourceRef.hints.typedArray=this.array}return t.Generate=function(e,r){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=new t(e,r.length),a=0;a<e;++a)for(var u=0;u<r.length;++u)o.array[a*o.itemCount+u]=r[u]+(a+i)*n;return o},t}();e.default=a},function(t,e,r){"use strict";e.__esModule=!0;e.maxOf=function(t,e){return t>e?t:e},e.findNextPowerOf2=function(t){for(var e=1;t>e;)e<<=1;return e},e.isPowerOf2=function(t){return 0!==t&&0==(t&t-1)}},function(t,e,r){"use strict";e.__esModule=!0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=r(118).mat4,o=Math.PI/180,a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.mat4=i.create(),Object.freeze(this)}return t.prototype.identity=function(){i.identity(this.mat4)},t.prototype.ortho=function(t,e){var r=t>>1,n=e>>1,o=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:Math.pow(2,16))>>1;i.ortho(this.mat4,-r,r,-n,n,-o,o)},t.prototype.perspective=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,n=t/e,o=e/2,a=2*Math.atan(o/r);i.perspective(this.mat4,a,n,0,2e3),i.translate(this.mat4,this.mat4,[0,0,-r])},t.prototype.translate=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;i.translate(this.mat4,this.mat4,[t,e,r])},t.prototype.scale=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;i.scale(this.mat4,this.mat4,[t,e,r])},t.prototype.rotateX=function(t){i.rotateX(this.mat4,this.mat4,t*o)},t.prototype.rotateY=function(t){i.rotateY(this.mat4,this.mat4,t*o)},t.prototype.rotateZ=function(t){i.rotateZ(this.mat4,this.mat4,t*o)},t.prototype.multiply=function(t,e){i.multiply(this.mat4,t.mat4,e.mat4)},t.prototype.copy=function(t){i.copy(this.mat4,t.mat4)},t.prototype.clone=function(){var e=new t;return e.copy(this),e},n(t,[{key:"x",get:function(){return this.mat4[12]},set:function(t){this.mat4[12]=t}},{key:"y",get:function(){return this.mat4[13]},set:function(t){this.mat4[13]=t}},{key:"z",get:function(){return this.mat4[14]},set:function(t){this.mat4[14]=t}},{key:"sx",get:function(){return this.mat4[0]},set:function(t){this.mat4[0]=t}},{key:"sy",get:function(){return this.mat4[5]},set:function(t){this.mat4[5]=t}},{key:"sz",get:function(){return this.mat4[10]},set:function(t){this.mat4[10]=t}}]),t}();e.default=a},function(t,e,r){"use strict";function n(t,e,r){let n=e[0],i=e[1],o=e[2],a=e[3],u=e[4],s=e[5],f=e[6],c=e[7],l=e[8],h=r[0],d=r[1],p=r[2],y=r[3],b=r[4],v=r[5],m=r[6],g=r[7],_=r[8];return t[0]=h*n+d*a+p*f,t[1]=h*i+d*u+p*c,t[2]=h*o+d*s+p*l,t[3]=y*n+b*a+v*f,t[4]=y*i+b*u+v*c,t[5]=y*o+b*s+v*l,t[6]=m*n+g*a+_*f,t[7]=m*i+g*u+_*c,t[8]=m*o+g*s+_*l,t}function i(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t}Object.defineProperty(e,"__esModule",{value:!0}),e.create=function(){let t=new o.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},e.clone=function(t){let e=new o.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},e.fromValues=function(t,e,r,n,i,a,u,s,f){let c=new o.ARRAY_TYPE(9);return c[0]=t,c[1]=e,c[2]=r,c[3]=n,c[4]=i,c[5]=a,c[6]=u,c[7]=s,c[8]=f,c},e.set=function(t,e,r,n,i,o,a,u,s,f){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=o,t[5]=a,t[6]=u,t[7]=s,t[8]=f,t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.transpose=function(t,e){if(t===e){let r=e[1],n=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=r,t[5]=e[7],t[6]=n,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},e.invert=function(t,e){let r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],u=e[5],s=e[6],f=e[7],c=e[8],l=c*a-u*f,h=-c*o+u*s,d=f*o-a*s,p=r*l+n*h+i*d;return p?(p=1/p,t[0]=l*p,t[1]=(-c*n+i*f)*p,t[2]=(u*n-i*a)*p,t[3]=h*p,t[4]=(c*r-i*s)*p,t[5]=(-u*r+i*o)*p,t[6]=d*p,t[7]=(-f*r+n*s)*p,t[8]=(a*r-n*o)*p,t):null},e.adjoint=function(t,e){let r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],u=e[5],s=e[6],f=e[7],c=e[8];return t[0]=a*c-u*f,t[1]=i*f-n*c,t[2]=n*u-i*a,t[3]=u*s-o*c,t[4]=r*c-i*s,t[5]=i*o-r*u,t[6]=o*f-a*s,t[7]=n*s-r*f,t[8]=r*a-n*o,t},e.determinant=function(t){let e=t[0],r=t[1],n=t[2],i=t[3],o=t[4],a=t[5],u=t[6],s=t[7],f=t[8];return e*(f*o-a*s)+r*(-f*i+a*u)+n*(s*i-o*u)},e.multiply=n,e.translate=function(t,e,r){let n=e[0],i=e[1],o=e[2],a=e[3],u=e[4],s=e[5],f=e[6],c=e[7],l=e[8],h=r[0],d=r[1];return t[0]=n,t[1]=i,t[2]=o,t[3]=a,t[4]=u,t[5]=s,t[6]=h*n+d*a+f,t[7]=h*i+d*u+c,t[8]=h*o+d*s+l,t},e.rotate=function(t,e,r){let n=e[0],i=e[1],o=e[2],a=e[3],u=e[4],s=e[5],f=e[6],c=e[7],l=e[8],h=Math.sin(r),d=Math.cos(r);return t[0]=d*n+h*a,t[1]=d*i+h*u,t[2]=d*o+h*s,t[3]=d*a-h*n,t[4]=d*u-h*i,t[5]=d*s-h*o,t[6]=f,t[7]=c,t[8]=l,t},e.scale=function(t,e,r){let n=r[0],i=r[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},e.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},e.fromRotation=function(t,e){let r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=-r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},e.fromQuat=function(t,e){let r=e[0],n=e[1],i=e[2],o=e[3],a=r+r,u=n+n,s=i+i,f=r*a,c=n*a,l=n*u,h=i*a,d=i*u,p=i*s,y=o*a,b=o*u,v=o*s;return t[0]=1-l-p,t[3]=c-v,t[6]=h+b,t[1]=c+v,t[4]=1-f-p,t[7]=d-y,t[2]=h-b,t[5]=d+y,t[8]=1-f-l,t},e.normalFromMat4=function(t,e){let r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],u=e[5],s=e[6],f=e[7],c=e[8],l=e[9],h=e[10],d=e[11],p=e[12],y=e[13],b=e[14],v=e[15],m=r*u-n*a,g=r*s-i*a,_=r*f-o*a,x=n*s-i*u,M=n*f-o*u,w=i*f-o*s,A=c*y-l*p,E=c*b-h*p,T=c*v-d*p,R=l*b-h*y,O=l*v-d*y,S=h*v-d*b,P=m*S-g*O+_*R+x*T-M*E+w*A;return P?(P=1/P,t[0]=(u*S-s*O+f*R)*P,t[1]=(s*T-a*S-f*E)*P,t[2]=(a*O-u*T+f*A)*P,t[3]=(i*O-n*S-o*R)*P,t[4]=(r*S-i*T+o*E)*P,t[5]=(n*T-r*O-o*A)*P,t[6]=(y*w-b*M+v*x)*P,t[7]=(b*_-p*w-v*g)*P,t[8]=(p*M-y*_+v*m)*P,t):null},e.projection=function(t,e,r){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/r,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},e.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},e.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t},e.subtract=i,e.multiplyScalar=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t},e.multiplyScalarAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},e.equals=function(t,e){let r=t[0],n=t[1],i=t[2],a=t[3],u=t[4],s=t[5],f=t[6],c=t[7],l=t[8],h=e[0],d=e[1],p=e[2],y=e[3],b=e[4],v=e[5],m=e[6],g=e[7],_=e[8];return Math.abs(r-h)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(n-d)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(i-p)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(a-y)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(y))&&Math.abs(u-b)<=o.EPSILON*Math.max(1,Math.abs(u),Math.abs(b))&&Math.abs(s-v)<=o.EPSILON*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(f-m)<=o.EPSILON*Math.max(1,Math.abs(f),Math.abs(m))&&Math.abs(c-g)<=o.EPSILON*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(l-_)<=o.EPSILON*Math.max(1,Math.abs(l),Math.abs(_))};var o=r(1);const a=n;e.mul=a;const u=i;e.sub=u},function(t,e,r){"use strict";function n(){let t=new p.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t}function i(t){let e=t[0],r=t[1],n=t[2];return Math.sqrt(e*e+r*r+n*n)}function o(t,e,r){let n=new p.ARRAY_TYPE(3);return n[0]=t,n[1]=e,n[2]=r,n}function a(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}function u(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t}function s(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t}function f(t,e){let r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return Math.sqrt(r*r+n*n+i*i)}function c(t,e){let r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return r*r+n*n+i*i}function l(t){let e=t[0],r=t[1],n=t[2];return e*e+r*r+n*n}function h(t,e){let r=e[0],n=e[1],i=e[2],o=r*r+n*n+i*i;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t}function d(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}Object.defineProperty(e,"__esModule",{value:!0}),e.create=n,e.clone=function(t){var e=new p.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},e.length=i,e.fromValues=o,e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},e.set=function(t,e,r,n){return t[0]=e,t[1]=r,t[2]=n,t},e.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t},e.subtract=a,e.multiply=u,e.divide=s,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},e.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t},e.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},e.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t},e.scaleAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t},e.distance=f,e.squaredDistance=c,e.squaredLength=l,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},e.normalize=h,e.dot=d,e.cross=function(t,e,r){let n=e[0],i=e[1],o=e[2],a=r[0],u=r[1],s=r[2];return t[0]=i*s-o*u,t[1]=o*a-n*s,t[2]=n*u-i*a,t},e.lerp=function(t,e,r,n){let i=e[0],o=e[1],a=e[2];return t[0]=i+n*(r[0]-i),t[1]=o+n*(r[1]-o),t[2]=a+n*(r[2]-a),t},e.hermite=function(t,e,r,n,i,o){let a=o*o,u=a*(2*o-3)+1,s=a*(o-2)+o,f=a*(o-1),c=a*(3-2*o);return t[0]=e[0]*u+r[0]*s+n[0]*f+i[0]*c,t[1]=e[1]*u+r[1]*s+n[1]*f+i[1]*c,t[2]=e[2]*u+r[2]*s+n[2]*f+i[2]*c,t},e.bezier=function(t,e,r,n,i,o){let a=1-o,u=a*a,s=o*o,f=u*a,c=3*o*u,l=3*s*a,h=s*o;return t[0]=e[0]*f+r[0]*c+n[0]*l+i[0]*h,t[1]=e[1]*f+r[1]*c+n[1]*l+i[1]*h,t[2]=e[2]*f+r[2]*c+n[2]*l+i[2]*h,t},e.random=function(t,e){e=e||1;let r=2*p.RANDOM()*Math.PI,n=2*p.RANDOM()-1,i=Math.sqrt(1-n*n)*e;return t[0]=Math.cos(r)*i,t[1]=Math.sin(r)*i,t[2]=n*e,t},e.transformMat4=function(t,e,r){let n=e[0],i=e[1],o=e[2],a=r[3]*n+r[7]*i+r[11]*o+r[15];return a=a||1,t[0]=(r[0]*n+r[4]*i+r[8]*o+r[12])/a,t[1]=(r[1]*n+r[5]*i+r[9]*o+r[13])/a,t[2]=(r[2]*n+r[6]*i+r[10]*o+r[14])/a,t},e.transformMat3=function(t,e,r){let n=e[0],i=e[1],o=e[2];return t[0]=n*r[0]+i*r[3]+o*r[6],t[1]=n*r[1]+i*r[4]+o*r[7],t[2]=n*r[2]+i*r[5]+o*r[8],t},e.transformQuat=function(t,e,r){let n=e[0],i=e[1],o=e[2],a=r[0],u=r[1],s=r[2],f=r[3],c=f*n+u*o-s*i,l=f*i+s*n-a*o,h=f*o+a*i-u*n,d=-a*n-u*i-s*o;return t[0]=c*f+d*-a+l*-s-h*-u,t[1]=l*f+d*-u+h*-a-c*-s,t[2]=h*f+d*-s+c*-u-l*-a,t},e.rotateX=function(t,e,r,n){let i=[],o=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],o[0]=i[0],o[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),o[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t},e.rotateY=function(t,e,r,n){let i=[],o=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],o[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),o[1]=i[1],o[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t},e.rotateZ=function(t,e,r,n){let i=[],o=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],o[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),o[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),o[2]=i[2],t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t},e.angle=function(t,e){let r=o(t[0],t[1],t[2]),n=o(e[0],e[1],e[2]);h(r,r),h(n,n);let i=d(r,n);return i>1?0:i<-1?Math.PI:Math.acos(i)},e.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},e.equals=function(t,e){let r=t[0],n=t[1],i=t[2],o=e[0],a=e[1],u=e[2];return Math.abs(r-o)<=p.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-a)<=p.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(i-u)<=p.EPSILON*Math.max(1,Math.abs(i),Math.abs(u))};var p=r(1);const y=a;e.sub=y;const b=u;e.mul=b;const v=s;e.div=v;const m=f;e.dist=m;const g=c;e.sqrDist=g;const _=i;e.len=_;const x=l;e.sqrLen=x;const M=function(){let t=n();return function(e,r,n,i,o,a){let u,s;for(r||(r=3),n||(n=0),s=i?Math.min(i*r+n,e.length):e.length,u=n;u<s;u+=r)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],o(t,t,a),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2];return e}}();e.forEach=M},function(t,e,r){"use strict";function n(){let t=new d.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function i(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}function o(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t[3]=e[3]*r[3],t}function a(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t[3]=e[3]/r[3],t}function u(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function s(t,e){let r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return Math.sqrt(r*r+n*n+i*i+o*o)}function f(t,e){let r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return r*r+n*n+i*i+o*o}function c(t){let e=t[0],r=t[1],n=t[2],i=t[3];return Math.sqrt(e*e+r*r+n*n+i*i)}function l(t){let e=t[0],r=t[1],n=t[2],i=t[3];return e*e+r*r+n*n+i*i}function h(t,e){let r=e[0],n=e[1],i=e[2],o=e[3],a=r*r+n*n+i*i+o*o;return a>0&&(a=1/Math.sqrt(a),t[0]=r*a,t[1]=n*a,t[2]=i*a,t[3]=o*a),t}Object.defineProperty(e,"__esModule",{value:!0}),e.create=n,e.clone=function(t){let e=new d.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},e.fromValues=function(t,e,r,n){let i=new d.ARRAY_TYPE(4);return i[0]=t,i[1]=e,i[2]=r,i[3]=n,i},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},e.set=function(t,e,r,n,i){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t},e.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t},e.subtract=i,e.multiply=o,e.divide=a,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t},e.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t[3]=Math.min(e[3],r[3]),t},e.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t[3]=Math.max(e[3],r[3]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t},e.scale=u,e.scaleAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t},e.distance=s,e.squaredDistance=f,e.length=c,e.squaredLength=l,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},e.normalize=h,e.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},e.lerp=function(t,e,r,n){let i=e[0],o=e[1],a=e[2],u=e[3];return t[0]=i+n*(r[0]-i),t[1]=o+n*(r[1]-o),t[2]=a+n*(r[2]-a),t[3]=u+n*(r[3]-u),t},e.random=function(t,e){return e=e||1,t[0]=d.RANDOM(),t[1]=d.RANDOM(),t[2]=d.RANDOM(),t[3]=d.RANDOM(),h(t,t),u(t,t,e),t},e.transformMat4=function(t,e,r){let n=e[0],i=e[1],o=e[2],a=e[3];return t[0]=r[0]*n+r[4]*i+r[8]*o+r[12]*a,t[1]=r[1]*n+r[5]*i+r[9]*o+r[13]*a,t[2]=r[2]*n+r[6]*i+r[10]*o+r[14]*a,t[3]=r[3]*n+r[7]*i+r[11]*o+r[15]*a,t},e.transformQuat=function(t,e,r){let n=e[0],i=e[1],o=e[2],a=r[0],u=r[1],s=r[2],f=r[3],c=f*n+u*o-s*i,l=f*i+s*n-a*o,h=f*o+a*i-u*n,d=-a*n-u*i-s*o;return t[0]=c*f+d*-a+l*-s-h*-u,t[1]=l*f+d*-u+h*-a-c*-s,t[2]=h*f+d*-s+c*-u-l*-a,t[3]=e[3],t},e.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},e.equals=function(t,e){let r=t[0],n=t[1],i=t[2],o=t[3],a=e[0],u=e[1],s=e[2],f=e[3];return Math.abs(r-a)<=d.EPSILON*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-u)<=d.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(i-s)<=d.EPSILON*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(o-f)<=d.EPSILON*Math.max(1,Math.abs(o),Math.abs(f))};var d=r(1);const p=i;e.sub=p;const y=o;e.mul=y;const b=a;e.div=b;const v=s;e.dist=v;const m=f;e.sqrDist=m;const g=c;e.len=g;const _=l;e.sqrLen=_;const x=function(){let t=n();return function(e,r,n,i,o,a){let u,s;for(r||(r=4),n||(n=0),s=i?Math.min(i*r+n,e.length):e.length,u=n;u<s;u+=r)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],t[3]=e[u+3],o(t,t,a),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2],e[u+3]=t[3];return e}}();e.forEach=x},function(t,e,r){"use strict";e.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(r(6)),i=function(t){function e(r,i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r,n.default.TYPE.UNIFORM,i))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(n.default);e.default=i},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(r(45)),o=n(r(21)),a=n(r(0)),u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.descriptors=new Map,this.vertexShaders=new Map,this.fragmentShaders=new Map}return t.prototype.destroy=function(){this.descriptors.clear(),this.vertexShaders.clear(),this.fragmentShaders.clear(),(0,a.default)(this)},t.prototype.addDescriptor=function(t,e){return this.descriptors.set(t,new i.default(e)),this},t.prototype.addVertexShader=function(t,e){return this.vertexShaders.set(t,new o.default(o.default.VERTEX_SHADER,e)),this},t.prototype.addFragmentShader=function(t,e){return this.fragmentShaders.set(t,new o.default(o.default.FRAGMENT_SHADER,e)),this},t.prototype.findDescriptor=function(t){return this.descriptors.get(t)},t.prototype.findVertexShader=function(t){return this.vertexShaders.get(t)},t.prototype.findFragmentShader=function(t){return this.fragmentShaders.get(t)},t}();e.default=u},function(t,e,r){"use strict";e.__esModule=!0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=function(t){return t&&t.__esModule?t:{default:t}}(r(11)),o=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=e,this.descriptor=r,this.bufferSource=n}return n(t,[{key:"attrDescriptor",get:function(){return this.descriptor.attr[this.name]}},{key:"resourceRef",get:function(){var t=this.bufferSource;return t instanceof i.default?t.resourceRef:t.voArray.resourceRef}}]),t}();e.default=o},function(t,e,r){"use strict";e.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(r(6)),i=function(t){function e(r,i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,r,n.default.TYPE.ATTRIB,i))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(n.default);e.default=i},function(t,e,r){"use strict";e.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(r(3));e.default=function t(e,r){!function(e,r){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.id=(0,n.default)(),this.vertexShader=e,this.fragmentShader=r}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=n(r(14)),a=n(r(29)),u=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.shaderLibrary=e,this.waitFor=Object.keys(r).map(function(t){return{shaderVarKey:t,textureId:r[t],isLoaded:!1}}),this.shaderVarGroup=new o.default([]),this.shaderVarStore=new Map}return t.prototype.whenLoaded=function(t){var e=this;this.isLoaded?t(this.shaderVarGroup):(this.waitFor.forEach(function(t){if(!t.isLoaded){var r=e.shaderLibrary.states.get(t.textureId);if(void 0===r||!r.isReady)return;var n=new a.default(t.shaderVarKey);n.texture=r.texture,e.shaderVarGroup.shaderVars.push(n),t.isLoaded=!0}}),this.waitFor=this.waitFor.filter(function(t){return!1===t.isLoaded}),this.isLoaded&&t(this.shaderVarGroup))},i(t,[{key:"isLoaded",get:function(){return 0===this.waitFor.length&&this.shaderVarGroup.shaderVars.length>0}}]),t}();e.default=u},function(t,e,r){"use strict";e.__esModule=!0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=e,this.shaderVar=r}return n(t,[{key:"type",get:function(){return this.shaderVar.type}},{key:"value",get:function(){return this.shaderVar.value}},{key:"serial",get:function(){return this.shaderVar.serial}}]),t}();e.default=i},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=n(r(14)),a=n(r(57)),u=n(r(56)),s=n(r(60)),f=function(t){function e(r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,[])),i=r.descriptor,o=void 0;return Object.keys(i.attr).forEach(function(t){o?n.shaderVars.push(new s.default(t,o)):(o=new a.default(t,new u.default(t,i,r)),n.shaderVars.push(o))}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.touch=function(){return this.shaderVars[0].touch()},i(e,[{key:"bufferSource",get:function(){return this.shaderVars[0].value.bufferSource}},{key:"serial",get:function(){return this.shaderVars[0].serial}}]),e}(o.default);e.default=f},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=n(r(48)),a=n(r(58)),u=n(r(59)),s=n(r(61)),f=n(r(46)),c=r(125),l=function(t,e){if("function"==typeof e){var r=t.createVO();return e(r),r}return e},h=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.resourceLibrary=e,this.textureLibrary=r,this.descriptor=e.findDescriptor(n.descriptor),this.voPool=new f.default(this.descriptor,Object.assign(c(n,["capacity","usage","maxAllocVOSize","voArray"]),{voNew:l(this.descriptor,n.voNew),voZero:l(this.descriptor,n.voZero)})),this.voPoolShaderAttribs=new s.default(this.voPool),this.indices=n.indices||o.default.Generate(this.voPool.capacity,[0,1,2,0,2,3],4),this.shaderProgram=new a.default(e.findVertexShader(n.vertexShader),e.findFragmentShader(n.fragmentShader)),this.primitive=n.primitive,this.textures=Object.assign({},n.textures),this.shaderTextureGroup=null}return t.prototype.setTexture=function(t,e){this.textures[t]!==e&&(this.textures[t]=e,this.shaderTextureGroup=null)},t.prototype.loadTextureAtlas=function(t,e){return this.textures[t]=e,this.shaderTextureGroup=null,this.textureLibrary.loadTextureAtlas(e)},t.prototype.getTextureAtlas=function(t){return this.textureLibrary.getTextureAtlas(this.textures[t])},t.prototype.createSprite=function(t,e,r){var n=this.voPool.alloc(1);if(null!=t){var i=e||t.width,o=r||t.height;n.setSize(i,o),n.setTexCoordsByTexture(t)}return n},t.prototype.renderFrame=function(t){var e=this;null==this.shaderTextureGroup&&(this.shaderTextureGroup=new u.default(this.textureLibrary,this.textures)),this.shaderTextureGroup.whenLoaded(function(r){var n=t.shaderContext;n.pushVar(r),n.pushVar(e.voPoolShaderAttribs),t.useShaderProgram(e.shaderProgram),t.drawIndexed(e.primitive,e.indices)})},i(t,[{key:"capacity",get:function(){return this.voPool.capacity}},{key:"usedCount",get:function(){return this.voPool.usedCount}},{key:"availableCount",get:function(){return this.voPool.availableCount}}]),t}();e.default=h},function(t,e){t.exports=function(t,e){return t===e||t!=t&&e!=e}},function(t,e,r){var n=r(30),i=function(){try{var t=n(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=i},function(t,e){var r=9007199254740991,n=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){return!!(e=null==e?r:e)&&("number"==typeof t||n.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e,r){var n=r(165),i=r(27),o=Object.prototype,a=o.hasOwnProperty,u=o.propertyIsEnumerable,s=n(function(){return arguments}())?n:function(t){return i(t)&&a.call(t,"callee")&&!u.call(t,"callee")};t.exports=s},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=n(r(19)),a=n(r(33)),u=n(r(28)),s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.jsonDef=e,this.frameNames=Object.keys(e.frames)}return t.prototype.createTextureAtlas=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return Promise.resolve(e).then(function(e){if("function"==typeof e)return Promise.resolve(e(t)).then(function(t){return"string"==typeof t?new u.default(t).complete:t});if("string"==typeof e)return new u.default(e).complete;if(e)return e;throw new Error("TextureAtlasSpec.createTextureAtlas(): no image found!")}).then(function(e){for(var n=new o.default(e,void 0,void 0,0,0,r),i=new a.default(n,t),u=Object.keys(t.frames),s=Array.isArray(u),f=0,u=s?u:u[Symbol.iterator]();;){var c;if(s){if(f>=u.length)break;c=u[f++]}else{if((f=u.next()).done)break;c=f.value}var l=c,h=t.frames[l].frame;i.addFrame(l,h.w,h.h,h.x,h.y)}return i})},t.load=function(e,r){return window.fetch(e,r).then(function(t){return t.json()}).then(function(e){return new t(e)})},i(t,[{key:"frames",get:function(){return this.jsonDef.frames}},{key:"meta",get:function(){return this.jsonDef.meta}},{key:"imageUrl",get:function(){return this.meta.image}}]),t}();e.default=s},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t){return t[Math.random()*t.length|0]}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(r(19)),o=n(r(70)),a=n(r(33)),u=n(r(29)),s=n(r(0)),f=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.states=new Map,this.shaderVars=new Map}return t.prototype.destroy=function(){this.states.clear(),this.shaderVars.clear(),(0,s.default)(this)},t.prototype.loadTexture=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=new o.default(i.default.load(e,r));return this.states.set(t,n),n.promise},t.prototype.loadTextureAtlas=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=a.default.load(e,null,null,r),i=new o.default(n.then(function(t){return i.atlas=t,t.rootTexture}));return this.states.set(t,i),n},t.prototype.getTextureAtlas=function(t){return this.states.get(t).atlas},t.prototype.whenLoaded=function(t,e,r){var n=this.states.get(t);if(void 0!==n&&n.isReady){var i=this.shaderVars.get(e);void 0===i&&(i=new u.default(e),this.shaderVars.set(e,i)),i.texture=n.texture,r(i)}},t}();e.default=f},function(t,e,r){"use strict";e.__esModule=!0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=function(){function t(e,r){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.texture=null,this.atlas=null,this.promise=Promise.resolve(e).then(function(t){return n.texture=t,t}).catch(function(t){console.error("TextureState error:",t)}),Promise.resolve(r).then(function(t){n.atlas=t})}return n(t,[{key:"isReady",get:function(){return null!=this.texture}}]),t}();e.default=i},function(t,e,r){"use strict";e.__esModule=!0;var n=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.registry=new Map,this.parentComponentRegistry=e}return t.prototype.registerComponent=function(t,e){return this.registry.set(t,e),this},t.prototype.createComponent=function(t,e,r){var n=this.registry.get(e);if(!n)return this.parentComponentRegistry&&this.parentComponentRegistry.createComponent(t,e,r),this;var i=n.create(t,r);return t.setComponent(e,i,this),this},t.prototype.updateComponent=function(t,e,r){var n=this.registry.get(e);if(!n)return this.parentComponentRegistry&&this.parentComponentRegistry.updateComponent(t,e,r),this;var i=t[e];return n.update(i,r),this},t.prototype.createOrUpdateComponent=function(t,e,r){var n=t.getComponentRegistry(e);return n?n.updateComponent(t,e,r):this.createComponent(t,e,r),this},t.prototype.destroyComponent=function(t,e){var r=this.registry.get(e);if(!r)return this.parentComponentRegistry&&this.parentComponentRegistry.destroyComponent(t,e),this;var n=t[e];return r.destroy(n),this},t}();e.default=n},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.default=function(t){t.registerComponent("clear",i.default.createCssStyledPropsComponent(o.default)),t.registerComponent("blend",i.default.createCssStyledPropsComponent(a.default)),t.registerComponent("projection",i.default.createCssStyledPropsComponent(u.default))};var i=n(r(73)),o=n(r(186)),a=n(r(187)),u=n(r(188))},function(t,e,r){"use strict";e.__esModule=!0;var n=r(7),i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.createCssStyledPropsComponent=function(t){return{create:function(e,r){return new t(e,(0,n.parseCssStyledProperties)(r))},update:function(t,e){t.update((0,n.parseCssStyledProperties)(e))},destroy:function(){}}},t.createComponent=function(t){return{create:function(e,r){return new t(e,r)},update:function(t,e){t.update(e)},destroy:function(){}}},t}();e.default=i},function(t,e,r){"use strict";function n(t){var e=t.length;if(e>=2&&t.startsWith('"')&&t.endsWith('"'))return t.substr(1,t.length-2);if(e>=2&&t.startsWith("{")&&t.endsWith("}"))return JSON.parse(t);if(e>=2&&t.startsWith("[")&&t.endsWith("]"))return JSON.parse(t);if(e>=2&&t.startsWith("'")&&t.endsWith("'"))return t.substr(1,t.length-2);if(e>0&&s.exec(t))return parseFloat(t);var r=f.exec(t);if(r)return new URL(r[1].trim());if(r=c.exec(t))return new Float32Array(r.slice(1,3).map(parseFloat));if(r=l.exec(t))return new Float32Array(r.slice(1,4).map(parseFloat));if(r=h.exec(t))return new Float32Array(r.slice(1,5).map(parseFloat));switch(t){case"null":return null;case"undefined":return;case"true":return!0;case"false":return!1;default:return t}}function i(t,e){var r=t.length,n=e;if(n>=r)return r;do{if(" "!==t[n]&&"\t"!==t[n])return n;++n}while(n<r);return r}function o(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:";",n=t.length,i=e,o=null;do{if(null===o)switch(t[i]){case r:return i;case"'":o="'",++i;break;case'"':o='"',++i;break;case"(":o=")",++i;break;case"{":o="}",++i;break;case"\\":i+=2;break;default:++i}else t[i]===o?(o=null,++i):"\\"===t[i]?i+=2:++i}while(i<n);return n}function a(t){if("string"==typeof t&&t){var e=[],r=t.length,n=i(t,0);do{var a=o(t,n,";");a>n&&e.push(t.slice(n,a)),n=i(t,a+1)}while(n<r);return e}}function u(t){var e=a(t);if(e)return e.map(function(t){if(d.exec(t))return{value:t.trim()};var e=t.indexOf(":");if(-1===e)return{value:t.trim()};return{key:t.slice(0,e).trim(),value:t.substr(e+1).trim()}}).filter(function(t){return!(""===t.key&&""===t.value)})}e.__esModule=!0;var s=/^[-+]?(\d+\.|\.)?\d+(e\d+|e[-+]\d+)?$/,f=/^url\(\s*([^)]+)\)$/,c=/^vec2\(\s*([-+\d.e]+)\s*,\s*([-+\d.e]+)\s*\)$/,l=/^vec3\(\s*([-+\d.e]+)\s*,\s*([-+\d.e]+)\s*,\s*([-+\d.e]+)\s*\)$/,h=/^vec4\(\s*([-+\d.e]+)\s*,\s*([-+\d.e]+)\s*,\s*([-+\d.e]+)\s*,\s*([-+\d.e]+)\s*\)$/,d=/^\s*[a-zA-Z]+\(\s*[^)]+\)\s*$/;e.default=function(t){if("string"!=typeof t)return t;var e=t.trim();if(e.startsWith("{")&&e.endsWith("}"))return JSON.parse(e);var r=u(e);if(r&&0!==r.length){if("key"in r[0]){var i={};return r.forEach(function(t){var e=t.key,r=t.value;i[e]=n(r)}),i}var o=r.map(function(t){return n(t.value)});return 1===o.length?o[0]:o}},e.splitIntoPropTokens=a,e.splitIntoProps=u,e.indexOfNextNonWhitespace=i,e.indexOfNextSeperator=o,e.parseValue=n},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(r(76)),o=n(r(0)),a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.entities=new Map}return t.prototype.createEntity=function(){var t=new i.default;return this.entities.set(t.id,t),t},t.prototype.getEntity=function(t){return this.entities.get(t)},t.prototype.destroyEntity=function(t){var e=this.entities.get(t);return!!e&&(e.destroy(),this.entities.delete(t),!0)},t.prototype.destroyAllEntities=function(){for(var t=this.entities.keys(),e=Array.isArray(t),r=0,t=e?t:t[Symbol.iterator]();;){var n;if(e){if(r>=t.length)break;n=t[r++]}else{if((r=t.next()).done)break;n=r.value}var i=n;this.destroyEntity(i)}},t.prototype.destroy=function(){this.destroyAllEntities(),this.entities.clear(),(0,o.default)(this)},t}();e.default=a},function(t,e,r){"use strict";e.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(r(3)),i=r(22),o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.registries=new Map,this.id=(0,n.default)(),i(this)}return t.prototype.hasComponent=function(t){return this.registries.has(t)},t.prototype.getComponentRegistry=function(t){return this.registries.get(t)},t.prototype.setComponent=function(t,e,r){if(this[t])throw new Error('Component name "'+t+'" is already assigned!');return this.registries.set(t,r),this[t]=e,e.connectedEntity&&e.connectedEntity(this),this},t.prototype.queryComponent=function(t,e){var r=this[t];return r&&e?e(r):r},t.prototype.destroyComponent=function(t){if(this.registries.has(t)){var e=this.registries.get(t);this.registries.delete(t),e&&e.destroyComponent(this,t);var r=this[t];delete this[t],r.disconnectedEntity&&r.disconnectedEntity(this)}return this},t.prototype.destroy=function(){this.emit("destroy",this),function(t){for(var e=t.registries.keys(),r=Array.isArray(e),n=0,e=r?e:e[Symbol.iterator]();;){var i;if(r){if(n>=e.length)break;i=e[n++]}else{if((n=e.next()).done)break;i=n.value}var o=i;t.destroyComponent(o)}}(this)},t}();e.default=o},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(r(55)),o=n(r(189)),a=new i.default;(0,o.default)(a),e.default=a},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.EntityManager=e.Entity=e.ComponentRegistry=e.ComponentFactory=void 0;var i=n(r(73)),o=n(r(71)),a=n(r(76)),u=n(r(75));e.ComponentFactory=i.default,e.ComponentRegistry=o.default,e.Entity=a.default,e.EntityManager=u.default},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t,e,r){if(!t.hasAttribute(e))return r;switch(t.getAttribute(e).toLowerCase()){case"true":case"yes":case"on":case"":case e:return!0}return!1}},function(t,e,r){r(81),t.exports=r(39)},function(t,e){!function(t){"use strict";function e(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function r(t){return"string"!=typeof t&&(t=String(t)),t}function n(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return d.iterable&&(e[Symbol.iterator]=function(){return e}),e}function i(t){this.map={},t instanceof i?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function o(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function a(t){return new Promise(function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}})}function u(t){var e=new FileReader,r=a(e);return e.readAsArrayBuffer(t),r}function s(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function f(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t)if("string"==typeof t)this._bodyText=t;else if(d.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(d.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(d.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(d.arrayBuffer&&d.blob&&y(t))this._bodyArrayBuffer=s(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!d.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t)&&!b(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=s(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):d.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},d.blob&&(this.blob=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(u)}),this.text=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return function(t){var e=new FileReader,r=a(e);return e.readAsText(t),r}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),r=new Array(e.length),n=0;n<e.length;n++)r[n]=String.fromCharCode(e[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},d.formData&&(this.formData=function(){return this.text().then(l)}),this.json=function(){return this.text().then(JSON.parse)},this}function c(t,e){var r=(e=e||{}).body;if(t instanceof c){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new i(t.headers)),this.method=t.method,this.mode=t.mode,r||null==t._bodyInit||(r=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new i(e.headers)),this.method=function(t){var e=t.toUpperCase();return v.indexOf(e)>-1?e:t}(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function l(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var r=t.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(i))}}),e}function h(t,e){e||(e={}),this.type="default",this.status="status"in e?e.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new i(e.headers),this.url=e.url||"",this._initBody(t)}if(!t.fetch){var d={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(d.arrayBuffer)var p=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],y=function(t){return t&&DataView.prototype.isPrototypeOf(t)},b=ArrayBuffer.isView||function(t){return t&&p.indexOf(Object.prototype.toString.call(t))>-1};i.prototype.append=function(t,n){t=e(t),n=r(n);var i=this.map[t];this.map[t]=i?i+","+n:n},i.prototype.delete=function(t){delete this.map[e(t)]},i.prototype.get=function(t){return t=e(t),this.has(t)?this.map[t]:null},i.prototype.has=function(t){return this.map.hasOwnProperty(e(t))},i.prototype.set=function(t,n){this.map[e(t)]=r(n)},i.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},i.prototype.keys=function(){var t=[];return this.forEach(function(e,r){t.push(r)}),n(t)},i.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),n(t)},i.prototype.entries=function(){var t=[];return this.forEach(function(e,r){t.push([r,e])}),n(t)},d.iterable&&(i.prototype[Symbol.iterator]=i.prototype.entries);var v=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];c.prototype.clone=function(){return new c(this,{body:this._bodyInit})},f.call(c.prototype),f.call(h.prototype),h.prototype.clone=function(){return new h(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})},h.error=function(){var t=new h(null,{status:0,statusText:""});return t.type="error",t};var m=[301,302,303,307,308];h.redirect=function(t,e){if(-1===m.indexOf(e))throw new RangeError("Invalid status code");return new h(null,{status:e,headers:{location:t}})},t.Headers=i,t.Request=c,t.Response=h,t.fetch=function(t,e){return new Promise(function(r,n){var o=new c(t,e),a=new XMLHttpRequest;a.onload=function(){var t={status:a.status,statusText:a.statusText,headers:function(t){var e=new i;return t.split(/\r?\n/).forEach(function(t){var r=t.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();e.append(n,i)}}),e}(a.getAllResponseHeaders()||"")};t.url="responseURL"in a?a.responseURL:t.headers.get("X-Request-URL");var e="response"in a?a.response:a.responseText;r(new h(e,t))},a.onerror=function(){n(new TypeError("Network request failed"))},a.ontimeout=function(){n(new TypeError("Network request failed"))},a.open(o.method,o.url,!0),"include"===o.credentials&&(a.withCredentials=!0),"responseType"in a&&d.blob&&(a.responseType="blob"),o.headers.forEach(function(t,e){a.setRequestHeader(e,t)}),a.send(void 0===o._bodyInit?null:o._bodyInit)})},t.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=n(r(41)),a=n(r(44)),u=n(r(35)),s=n(r(37)),f=n(r(77)),c=n(r(38)),l=n(r(72)),h=n(r(0)),d=r(2),p=r(22),y=r(34),b=function(){return window.performance.now()/1e3},v=function(t,e,r){return t&&e in t?t[e]:"function"==typeof r?r():r},m=function(){function t(e){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),p(this);var n=v.bind(null,e);this.componentRegistry=u.default,this.entityManager=s.default,this.resourceLibrary=f.default,this.textureLibrary=c.default,this.canvas=n("canvas",function(){return document.createElement("canvas")}),this.contextAttributes={alpha:n("alpha",!1),depth:n("depth",!1),stencil:n("stencil",!1),antialias:n("antialias",!1),premultipliedAlpha:n("premultipliedAlpha",!1),preserveDrawingBuffer:n("preserveDrawingBuffer",!1)},this.time=n("time",0),this.lastFrameTime=0,this.timeFrameOffset=0,this.frameNo=n("frameNo",0),this.clearColor=n("clearColor"),this.createGlContext=n("createGlContext",function(){return function(){return function(t,e){var r=void 0;try{r=t.getContext("webgl",e)}catch(t){(0,d.error)(t)}if(!r)try{r=t.getContext("experimental-webgl",e)}catch(t){(0,d.error)(t)}if(!r)throw new Error("cannot create webgl1 context");return r}(r.canvas,r.contextAttributes)}}),(0,l.default)(this.componentRegistry),this.entity=this.entityManager.createEntity(),this.entity.setComponent("blitpunk",this),this.entity.setComponent("resourceLibrary",this.resourceLibrary),this.entity.setComponent("textureLibrary",this.textureLibrary),this.componentRegistry.createComponent(this.entity,"children"),this.el=null,this.started=!1,this.stopped=!1,this.destroyed=!1}return t.prototype.start=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;if(this.canStart){if(this.stopped)return this.stopped=!1,this.resize(),void this.requestAnimate();this.el=t,this.started=!0,this.glx=new o.default(this.createGlContext()),this.renderer=new a.default(this.glx),this._clearColor&&this.renderer.setClearColor(this._clearColor),this.startTime=b(),this.el.appendChild(this.canvas),this.resize(),this.requestAnimate()}},t.prototype.requestAnimate=function(){var t=this;this.rafSubscription=window.requestAnimationFrame(function(){return t.animate()})},t.prototype.cancelAnimate=function(){window.cancelAnimationFrame(this.rafSubscription)},t.prototype.stop=function(){this.canStop&&(this.stopped=!0,this.cancelAnimate())},t.prototype.destroy=function(){if(!this.destroyed){this.cancelAnimate();try{this.glx.destroy()}catch(t){(0,d.error)("blitpunk->destroy(WebGlContext) panic!",t)}try{this.renderer.destroy()}catch(t){(0,d.error)("blitpunk->destroy(WebGlRenderer) panic!",t)}this.el.removeChild(this.canvas),(0,h.default)(this)}},t.prototype.animate=function(){this.canAnimate&&(this.renderFrame(),this.requestAnimate())},t.prototype.renderFrame=function(){++this.frameNo,this.time=b()-this.startTime,this.lastFrameTime&&(this.timeFrameOffset=this.time-this.lastFrameTime),this.lastFrameTime=this.time,this.resize(),this.renderer.renderFrame(this.entity,this)},t.prototype.resize=function(){var t="inline"===window.getComputedStyle(this.el,null).display?this.el.parentNode:this.el,e=this.canvas,r=window.devicePixelRatio||1,n=t.clientWidth,i=t.clientHeight;e.style.width=n+"px",e.style.height=i+"px";var o=Math.round(n*r),a=Math.round(i*r);o===e.width&&a===e.height||(e.width=o,e.height=a),o===this.width&&a===this.height||(this.width=o,this.height=a,this.glx.gl.viewport(0,0,o,a))},i(t,[{key:"clearColor",get:function(){return this.renderer?this.renderer.clearColor:this._clearColor},set:function(t){this._clearColor=null==t?t:y(t),this.renderer&&this.renderer.setClearColor(this._clearColor)}},{key:"canStart",get:function(){return(!this.started||this.started&&this.stopped)&&!this.destroyed}},{key:"canStop",get:function(){return this.started&&!this.stopped&&!this.destroyed}},{key:"canAnimate",get:function(){return this.started&&!this.stopped&&!this.destroyed}}]),t}();e.default=m},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(r(8)),o=n(r(88)),a=n(r(90)),u=n(r(43)),s=n(r(93)),f=n(r(0)),c=Object.freeze({static:u.default.STATIC_DRAW,dynamic:u.default.DYNAMIC_DRAW}),l=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Object.defineProperty(this,"glx",{value:e}),this.vertexShader=new Map,this.fragmentShader=new Map,this.shaderProgram=new Map,this.buffer=new Map,this.texture=new Map}return t.prototype.destroy=function(){this.texture.clear(),this.buffer.clear(),this.shaderProgram.clear(),this.fragmentShader.clear(),this.vertexShader.clear(),(0,f.default)(this)},t.prototype.loadVertexShader=function(t){var e=this.vertexShader.get(t.id);return e||(e=new o.default(this.glx,t),this.vertexShader.set(t.id,e)),e},t.prototype.loadFragementShader=function(t){var e=this.fragmentShader.get(t.id);return e||(e=new o.default(this.glx,t),this.vertexShader.set(t.id,e)),e},t.prototype.loadProgram=function(t){var e=this.shaderProgram.get(t.id);return e||(e=new a.default(this.glx,t),this.shaderProgram.set(t.id,e)),e},t.prototype.loadBuffer=function(t){var e=this.buffer.get(t.id);if(!e){var r=t.hints.target||u.default.ARRAY_BUFFER,n=new u.default(this.glx,r,c[t.hints.usage]);e=new i.default(n,{id:t.id,serial:0}),this.buffer.set(t.id,e)}return e},t.prototype.findBuffer=function(t){return this.buffer.get(t.id)},t.prototype.loadTexture=function(t){var e=this.texture.get(t.id);if(!e){var r=new s.default(this.glx,t.resource.imgEl,t.hints.flipY,t.hints.repeatable,t.hints.premultiplyAlpha,t.hints.nearest);e=new i.default(r,{id:t.id,serial:0}),this.texture.set(t.id,e)}return e},t}();e.default=l},function(t,e,r){var n=r(85),i=r(86);t.exports=function(t,e,r){var o=e&&r||0;"string"==typeof t&&(e="binary"==t?new Array(16):null,t=null);var a=(t=t||{}).random||(t.rng||n)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,e)for(var u=0;u<16;++u)e[o+u]=a[u];return e||i(a)}},function(t,e,r){(function(e){var r,n=e.crypto||e.msCrypto;if(n&&n.getRandomValues){var i=new Uint8Array(16);r=function(){return n.getRandomValues(i),i}}if(!r){var o=new Array(16);r=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),o[e]=t>>>((3&e)<<3)&255;return o}}t.exports=r}).call(e,r(42))},function(t,e){for(var r=[],n=0;n<256;++n)r[n]=(n+256).toString(16).substr(1);t.exports=function(t,e){var n=e||0,i=r;return i[t[n++]]+i[t[n++]]+i[t[n++]]+i[t[n++]]+"-"+i[t[n++]]+i[t[n++]]+"-"+i[t[n++]]+i[t[n++]]+"-"+i[t[n++]]+i[t[n++]]+"-"+i[t[n++]]+i[t[n++]]+i[t[n++]]+i[t[n++]]+i[t[n++]]+i[t[n++]]}},function(t,e,r){"use strict";e.__esModule=!0;var n=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.value=e}return t.prototype.touch=function(){++this.value},t}();e.default=n},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(r(21)),o=n(r(89));e.default=function t(e,r){if(function(e,r){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.glx=e,!(r instanceof i.default))throw new Error("WebGlShader panic! source must be an instance of ShaderSource!");this.source=r;var n=e.gl;this.shaderType=n[r.type],this.glShader=n.createShader(this.shaderType),function(t){var e=t.glx.gl,r=t.glShader,n=t.source,i=(0,o.default)({glx:t.glx},n.source);if(e.shaderSource(r,i),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS)){var a=e.getShaderInfoLog(r);console.error(a),console.group("shader-info"),console.debug("shaderSource",t),console.log(n),console.groupEnd();var u=new Error("WebGlShader compile panic!");throw u.webGlShader=t,u.shaderInfoLog=a,u}}(this),Object.freeze(this)}},function(t,e,r){"use strict";function n(t,e){return"string"==typeof e?e:"function"==typeof e?n(t,e(t)):Array.isArray(e)?e.map(n.bind(null,t)).join("\n"):e+""}e.__esModule=!0,e.default=n},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(r(91)),o=n(r(92)),a=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.glx=e,this.vertexShader=e.resourceLibrary.loadVertexShader(r.vertexShader),this.fragmentShader=e.resourceLibrary.loadFragementShader(r.fragmentShader);var n=e.gl;this.glProgram=n.createProgram(),function(t,e,r){var n=t.glx.gl,i=t.glProgram;if(n.attachShader(i,e),n.attachShader(i,r),n.linkProgram(i),!n.getProgramParameter(i,n.LINK_STATUS)){var o=new Error("WebGlProgram link panic!");throw o.webGlProgram=t,o}}(this,this.vertexShader.glShader,this.fragmentShader.glShader),function(t){var e=t.glx.gl,r=e.getProgramParameter(t.glProgram,e.ACTIVE_UNIFORMS);t.uniforms={},t.uniformNames=[];for(var n=0;n<r;++n){var o=new i.default(t,n);t.uniforms[o.name]=o,t.uniformNames.push(o.name)}Object.freeze(t.uniforms)}(this),function(t){var e=t.glx.gl,r=e.getProgramParameter(t.glProgram,e.ACTIVE_ATTRIBUTES);t.attributes={},t.attributeNames=[],t.attributeLocations=[];for(var n=0;n<r;++n){var i=new o.default(t,n);t.attributes[i.name]=i,t.attributeNames.push(i.name),t.attributeLocations.push(i.location)}Object.freeze(t.attributes)}(this),Object.freeze(this)}return t.prototype.use=function(){var t=this.glx;return!!t.useProgram(this.glProgram)&&(t.enableVertexAttribArrays(this.attributeLocations),!0)},t.prototype.loadUniforms=function(t,e){var r=this;this.uniformNames.forEach(function(n){var i=t.curUniform(n);null==i&&(null==(i=t.curTex2d(n))&&console.error("[WebGlProgram] could not load uniform:",n),i.syncTextureAndValue(e)),r.uniforms[n].setValue(i.value)})},t.prototype.loadAttributes=function(t,e){var r=this;this.attributeNames.forEach(function(n){var i=t.curAttrib(n).value;e.syncBuffer(i).bindBuffer(),r.attributes[n].vertexAttribPointer(i.descriptor)})},t}();e.default=a},function(t,e,r){"use strict";e.__esModule=!0;e.default=function t(e,r){!function(e,r){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.program=e,this.glx=e.glx;var n=e.glx.gl,i=e.glProgram,o=n.getActiveUniform(i,r),a=o.name,u=o.size,s=o.type;this.name=a,this.size=u,this.type=s,this.location=n.getUniformLocation(i,a),this.setValue=function(t){var e=t.type,r=t.location,n=t.glx.gl;switch(e){case n.FLOAT:return function(t){return n.uniform1f(r,t)};case n.FLOAT_VEC2:return function(t){return n.uniform2f(r,t[0],t[1])};case n.FLOAT_VEC3:return function(t){return n.uniform3f(r,t[0],t[1],t[2])};case n.FLOAT_VEC4:return function(t){return n.uniform4f(r,t[0],t[1],t[2],t[3])};case n.FLOAT_MAT4:return function(t){return n.uniformMatrix4fv(r,n.FALSE,t.mat4)};case n.SAMPLER_2D:return function(t){return n.uniform1i(r,t)}}var i=new Error("WebGlUniform unknown uniform type:"+e);throw i.webGlUniform=t,i}(this),Object.freeze(this)}},function(t,e,r){"use strict";e.__esModule=!0;var n=r(9),i=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.program=e,this.glx=e.glx;var n=e.glx.gl,i=e.glProgram,o=n.getActiveAttrib(i,r),a=o.name,u=o.size,s=o.type;this.name=a,this.size=u,this.type=s,this.location=n.getAttribLocation(i,a),Object.freeze(this)}return t.prototype.vertexAttribPointer=function(t){var e=this.glx.gl,r=t.attr[this.name],i=function(t,e){return t[n.GL_ITEM_TYPES[e]]}(e,r.type);e.vertexAttribPointer(this.location,r.size,i,!1,t.bytesPerVertex,r.byteOffset)},t}();e.default=i},function(t,e,r){"use strict";e.__esModule=!0;var n=function(){function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.glx=e,this.imgEl=r,this.flipY=n,this.repeatable=i,this.premultiplyAlpha=o,this.nearest=a,this.isInitialized=!1,this.glTexObj=e.gl.createTexture(),this.texUnit=-1}return t.prototype.bind=function(){return this.glx.textureManager.bindWebGlTexture(this)},t.prototype.uploadImageData=function(){if(null!=this.imgEl){this.isInitialized||(!function(t){t.bind();var e=t.glx.gl;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha);var r=t.repeatable?e.REPEAT:e.CLAMP_TO_EDGE;e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,r);var n=t.nearest?e.NEAREST:e.LINEAR;e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,n),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t.imgEl.width,t.imgEl.height,0,e.RGBA,e.UNSIGNED_BYTE,null)}(this),this.isInitialized=!0),this.bind();var t=this.glx.gl;t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this.imgEl)}},t}();e.default=n},function(t,e,r){"use strict";e.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(r(0)),i=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Object.defineProperty(this,"glx",{value:e}),this.boundTextures=new Array(e.MAX_TEXTURE_IMAGE_UNITS);for(var r=0;r<this.boundTextures.length;++r)this.boundTextures[r]=null;this.lastBoundTexUnit=0}return t.prototype.destroy=function(){this.boundTextures.length=0,(0,n.default)(this)},t.prototype.bindWebGlTexture=function(t){var e=this.boundTextures.indexOf(t);if(e<0){for(var r=0;r<this.boundTextures.length;++r)if(!this.boundTextures[r]){e=r,this.boundTextures[r]=t;break}if(e<0){e=this.lastBoundTexUnit;var n=this.boundTextures[e];n&&(n.texUnit=-1),this.lastBoundTexUnit=(this.lastBoundTexUnit+1)%this.glx.MAX_TEXTURE_IMAGE_UNITS}this.glx.activeTexture(e),this.glx.bindTexture2d(t.glTexObj),t.texUnit=e}return e},t}();e.default=i},function(t,e,r){"use strict";e.__esModule=!0,e.createVO=function(t,e,r){if(t.descriptor=e||(r?r.descriptor:null),!t.descriptor)throw new Error("could not detect VODescriptor!");if(t.voArray=r||t.descriptor.createVOArray(),t.descriptor!==t.voArray.descriptor&&(t.descriptor.vertexCount!==t.voArray.descriptor.vertexCount||t.descriptor.vertexAttrCount!==t.voArray.descriptor.vertexAttrCount))throw new Error("Incompatible vertex object descriptors!");return t}},function(t,e,r){"use strict";e.__esModule=!0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.default=function(t,e){var r={toArray:{value:function(e){for(var r=[],n=Array.isArray(e)?e.map(function(e){return t.attr[e]}):t.attrList,i=n.length,o=0;o<t.vertexCount;++o)for(var a=0;a<i;++a)for(var u=n[a],s=0;s<u.size;++s)r.push(u.getValue(this,o,s));return r}}};Object.keys(t.attr).forEach(function(e){var n=t.attr[e];i.default.defineProperties(n,r,t)}),t.voPrototype=Object.create("object"===(void 0===e?"undefined":n(e))?e:{},r)};var i=function(t){return t&&t.__esModule?t:{default:t}}(r(12))},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t){t.typedArrays={float32:!1,int16:!1,int32:!1,int8:!1,uint16:!1,uint32:!1,uint8:!1},Object.keys(t.attr).forEach(function(e){t.typedArrays[t.attr[e].type]=!0}),Object.freeze(t.typedArrays),t.typeList=Object.keys(t.typedArrays).filter(function(e){return t.typedArrays[e]}).sort()}},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t,e){if(t.attr={},t.attrNames=[],Array.isArray(e)){for(var r=0,o=0,a=0;a<e.length;++a){var u=e[a];if(void 0===u.size)throw new Error("vertex object attribute descriptor has no size!");var s=u.type||"float32";void 0!==u.name&&(t.attrNames.push(u.name),t.attr[u.name]=new i.default(u.name,s,u.size,r,o,!!u.uniform,u.attrNames)),r+=u.size,o+=n.BYTES_PER_ELEMENT[s]*u.size}t.rightPadBytesPerVertex=o%4>0?4-o%4:0,t.bytesPerVertex=o+t.rightPadBytesPerVertex,t.bytesPerVO=t.bytesPerVertex*t.vertexCount,t.vertexAttrCount=r}t.attrList=t.attrNames.map(function(e){return t.attr[e]})};var n=r(9),i=function(t){return t&&t.__esModule?t:{default:t}}(r(12))},function(t,e,r){"use strict";e.__esModule=!0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.default=function(t,e){"object"===(void 0===e?"undefined":n(e))&&Object.keys(e).forEach(function(r){var n=e[r];"string"==typeof n?void 0!==(n=t.attr[n])&&(t.attr[r]=n):t.attr[r]=new i.default(r,n.type,n.size,n.offset,n.byteOffset,!!n.uniform,n.attrNames)})};var i=function(t){return t&&t.__esModule?t:{default:t}}(r(12))},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=t.capacity-t.usedCount-t.allocatedCount,n=t.allocatedCount+(e>0&&e<r?e:r),i=t.allocatedCount;i<n;i++){var o=t.voArray.subarray(i),a=t.descriptor.createVO(o);a.free=t.free.bind(t,a),t.availableVOs.push(a)}}},function(t,e,r){"use strict";e.__esModule=!0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=r(102),o=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.enable=e,this.sfactor=r,this.dfactor=n}return t.prototype.isEqual=function(t){return t&&this.enable===t.enable&&this._sfactor===t._sfactor&&this._dfactor===t._dfactor},n(t,[{key:"sfactor",set:function(t){this._sfactor="string"==typeof t?i(t).toUpperCase():void 0},get:function(){return this._sfactor}},{key:"dfactor",set:function(t){this._dfactor="string"==typeof t?i(t).toUpperCase():void 0},get:function(){return this._dfactor}}]),t}();e.default=o},function(t,e,r){var n=r(103)(function(t,e,r){return t+(r?"_":"")+e.toLowerCase()});t.exports=n},function(t,e,r){var n=r(104),i=r(105),o=r(113),a=RegExp("[']","g");t.exports=function(t){return function(e){return n(o(i(e).replace(a,"")),t,"")}}},function(t,e){t.exports=function(t,e,r,n){var i=-1,o=null==t?0:t.length;for(n&&o&&(r=t[++i]);++i<o;)r=e(r,t[i],i,t);return r}},function(t,e,r){var n=r(106),i=r(23),o=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,a=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");t.exports=function(t){return(t=i(t))&&t.replace(o,n).replace(a,"")}},function(t,e,r){var n=r(107)({"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"});t.exports=n},function(t,e){t.exports=function(t){return function(e){return null==t?void 0:t[e]}}},function(t,e,r){function n(t){if("string"==typeof t)return t;if(a(t))return o(t,n)+"";if(u(t))return c?c.call(t):"";var e=t+"";return"0"==e&&1/t==-s?"-0":e}var i=r(13),o=r(110),a=r(5),u=r(25),s=1/0,f=i?i.prototype:void 0,c=f?f.toString:void 0;t.exports=n},function(t,e,r){(function(e){var r="object"==typeof e&&e&&e.Object===Object&&e;t.exports=r}).call(e,r(42))},function(t,e){t.exports=function(t,e){for(var r=-1,n=null==t?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}},function(t,e,r){var n=r(13),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,u=n?n.toStringTag:void 0;t.exports=function(t){var e=o.call(t,u),r=t[u];try{t[u]=void 0;var n=!0}catch(t){}var i=a.call(t);return n&&(e?t[u]=r:delete t[u]),i}},function(t,e){var r=Object.prototype.toString;t.exports=function(t){return r.call(t)}},function(t,e,r){var n=r(114),i=r(115),o=r(23),a=r(116);t.exports=function(t,e,r){return t=o(t),void 0===(e=r?void 0:e)?i(t)?a(t):n(t):t.match(e)||[]}},function(t,e){var r=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;t.exports=function(t){return t.match(r)||[]}},function(t,e){var r=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;t.exports=function(t){return r.test(t)}},function(t,e){var r="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",n="["+r+"]",i="\\d+",o="[\\u2700-\\u27bf]",a="[a-z\\xdf-\\xf6\\xf8-\\xff]",u="[^\\ud800-\\udfff"+r+i+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",s="(?:\\ud83c[\\udde6-\\uddff]){2}",f="[\\ud800-\\udbff][\\udc00-\\udfff]",c="[A-Z\\xc0-\\xd6\\xd8-\\xde]",l="(?:"+a+"|"+u+")",h="(?:"+c+"|"+u+")",d="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",p="[\\ufe0e\\ufe0f]?"+d+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",s,f].join("|")+")[\\ufe0e\\ufe0f]?"+d+")*"),y="(?:"+[o,s,f].join("|")+")"+p,b=RegExp([c+"?"+a+"+(?:['](?:d|ll|m|re|s|t|ve))?(?="+[n,c,"$"].join("|")+")",h+"+(?:['](?:D|LL|M|RE|S|T|VE))?(?="+[n,c+l,"$"].join("|")+")",c+"?"+l+"+(?:['](?:d|ll|m|re|s|t|ve))?",c+"+(?:['](?:D|LL|M|RE|S|T|VE))?","\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)","\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)",i,y].join("|"),"g");t.exports=function(t){return t.match(b)||[]}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=n(r(50)),a=n(r(54)),u=function(){function t(e){var r=e.desiredWidth,n=e.desiredHeight,i=e.pixelRatio,o=e.sizeFit,a=e.uniformName,u=e.perspective;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.desiredWidth=r,this.desiredHeight=n,this.pixelRatio=i,this.sizeFit=o,this.uniformName=a,this.perspective=u,this.width=0,this.height=0}return t.prototype.updateOrtho=function(t,e){t===this.width&&e===this.height||(this.width=t,this.height=e,this.perspective>0?this.uniform.value.perspective(t,e,this.perspective):this.uniform.value.ortho(t,e),this.uniform.touch())},t.prototype.update=function(t,e){if("fill"===this.sizeFit&&this.desiredWidth>0&&this.desiredHeight>0)this.updateOrtho(this.desiredWidth,this.desiredHeight);else if(("cover"===this.sizeFit||"contain"===this.sizeFit)&&this.desiredWidth>=0&&this.desiredHeight>=0){var r=e/t,n=this.desiredHeight/this.desiredWidth,i="cover"===this.sizeFit,o=this.desiredWidth,a=this.desiredHeight;if(0===this.desiredWidth&&this.desiredHeight||r<n){if(o=this.desiredHeight/e*t,i){var u=this.desiredWidth/o;o*=u,a*=u}}else if((this.desiredWidth&&0===this.desiredHeight||r>n)&&(a=this.desiredWidth/t*e,i)){var s=this.desiredHeight/a;o*=s,a*=s}this.updateOrtho(o,a)}},i(t,[{key:"uniformName",set:function(t){var e=t||"viewMatrix";this.uniform&&this.uniform.name===e||(this.uniform=new a.default(e,new o.default))},get:function(){return this.uniform&&this.uniform.name||"viewMatrix"}},{key:"perspective",set:function(t){this._perspective="number"==typeof t?Math.abs(t):0},get:function(){return this._perspective}}]),t}();e.default=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),i=r(119),o=r(120),a=r(51),u=r(121),s=r(122),f=r(123),c=r(52),l=r(53);r.d(e,"glMatrix",function(){return n}),r.d(e,"mat2",function(){return i}),r.d(e,"mat2d",function(){return o}),r.d(e,"mat3",function(){return a}),r.d(e,"mat4",function(){return u}),r.d(e,"quat",function(){return s}),r.d(e,"vec2",function(){return f}),r.d(e,"vec3",function(){return c}),r.d(e,"vec4",function(){return l})},function(t,e,r){"use strict";function n(t,e,r){let n=e[0],i=e[1],o=e[2],a=e[3],u=r[0],s=r[1],f=r[2],c=r[3];return t[0]=n*u+o*s,t[1]=i*u+a*s,t[2]=n*f+o*c,t[3]=i*f+a*c,t}function i(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}Object.defineProperty(e,"__esModule",{value:!0}),e.create=function(){let t=new o.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},e.clone=function(t){let e=new o.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},e.fromValues=function(t,e,r,n){let i=new o.ARRAY_TYPE(4);return i[0]=t,i[1]=e,i[2]=r,i[3]=n,i},e.set=function(t,e,r,n,i){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t},e.transpose=function(t,e){if(t===e){let r=e[1];t[1]=e[2],t[2]=r}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},e.invert=function(t,e){let r=e[0],n=e[1],i=e[2],o=e[3],a=r*o-i*n;return a?(a=1/a,t[0]=o*a,t[1]=-n*a,t[2]=-i*a,t[3]=r*a,t):null},e.adjoint=function(t,e){let r=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=r,t},e.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},e.multiply=n,e.rotate=function(t,e,r){let n=e[0],i=e[1],o=e[2],a=e[3],u=Math.sin(r),s=Math.cos(r);return t[0]=n*s+o*u,t[1]=i*s+a*u,t[2]=n*-u+o*s,t[3]=i*-u+a*s,t},e.scale=function(t,e,r){let n=e[0],i=e[1],o=e[2],a=e[3],u=r[0],s=r[1];return t[0]=n*u,t[1]=i*u,t[2]=o*s,t[3]=a*s,t},e.fromRotation=function(t,e){let r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t},e.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},e.LDU=function(t,e,r,n){return t[2]=n[2]/n[0],r[0]=n[0],r[1]=n[1],r[3]=n[3]-t[2]*r[1],[t,e,r]},e.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t},e.subtract=i,e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},e.equals=function(t,e){let r=t[0],n=t[1],i=t[2],a=t[3],u=e[0],s=e[1],f=e[2],c=e[3];return Math.abs(r-u)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(n-s)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-f)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(a-c)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))},e.multiplyScalar=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t},e.multiplyScalarAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t};var o=r(1);const a=n;e.mul=a;const u=i;e.sub=u},function(t,e,r){"use strict";function n(t,e,r){let n=e[0],i=e[1],o=e[2],a=e[3],u=e[4],s=e[5],f=r[0],c=r[1],l=r[2],h=r[3],d=r[4],p=r[5];return t[0]=n*f+o*c,t[1]=i*f+a*c,t[2]=n*l+o*h,t[3]=i*l+a*h,t[4]=n*d+o*p+u,t[5]=i*d+a*p+s,t}function i(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t}Object.defineProperty(e,"__esModule",{value:!0}),e.create=function(){let t=new o.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},e.clone=function(t){let e=new o.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},e.fromValues=function(t,e,r,n,i,a){let u=new o.ARRAY_TYPE(6);return u[0]=t,u[1]=e,u[2]=r,u[3]=n,u[4]=i,u[5]=a,u},e.set=function(t,e,r,n,i,o,a){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=o,t[5]=a,t},e.invert=function(t,e){let r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],u=e[5],s=r*o-n*i;return s?(s=1/s,t[0]=o*s,t[1]=-n*s,t[2]=-i*s,t[3]=r*s,t[4]=(i*u-o*a)*s,t[5]=(n*a-r*u)*s,t):null},e.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},e.multiply=n,e.rotate=function(t,e,r){let n=e[0],i=e[1],o=e[2],a=e[3],u=e[4],s=e[5],f=Math.sin(r),c=Math.cos(r);return t[0]=n*c+o*f,t[1]=i*c+a*f,t[2]=n*-f+o*c,t[3]=i*-f+a*c,t[4]=u,t[5]=s,t},e.scale=function(t,e,r){let n=e[0],i=e[1],o=e[2],a=e[3],u=e[4],s=e[5],f=r[0],c=r[1];return t[0]=n*f,t[1]=i*f,t[2]=o*c,t[3]=a*c,t[4]=u,t[5]=s,t},e.translate=function(t,e,r){let n=e[0],i=e[1],o=e[2],a=e[3],u=e[4],s=e[5],f=r[0],c=r[1];return t[0]=n,t[1]=i,t[2]=o,t[3]=a,t[4]=n*f+o*c+u,t[5]=i*f+a*c+s,t},e.fromRotation=function(t,e){let r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t[4]=0,t[5]=0,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t},e.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t},e.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},e.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t},e.subtract=i,e.multiplyScalar=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t},e.multiplyScalarAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]},e.equals=function(t,e){let r=t[0],n=t[1],i=t[2],a=t[3],u=t[4],s=t[5],f=e[0],c=e[1],l=e[2],h=e[3],d=e[4],p=e[5];return Math.abs(r-f)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(n-c)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(i-l)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(a-h)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(u-d)<=o.EPSILON*Math.max(1,Math.abs(u),Math.abs(d))&&Math.abs(s-p)<=o.EPSILON*Math.max(1,Math.abs(s),Math.abs(p))};var o=r(1);const a=n;e.mul=a;const u=i;e.sub=u},function(t,e,r){"use strict";function n(t,e,r){let n=e[0],i=e[1],o=e[2],a=e[3],u=e[4],s=e[5],f=e[6],c=e[7],l=e[8],h=e[9],d=e[10],p=e[11],y=e[12],b=e[13],v=e[14],m=e[15],g=r[0],_=r[1],x=r[2],M=r[3];return t[0]=g*n+_*u+x*l+M*y,t[1]=g*i+_*s+x*h+M*b,t[2]=g*o+_*f+x*d+M*v,t[3]=g*a+_*c+x*p+M*m,g=r[4],_=r[5],x=r[6],M=r[7],t[4]=g*n+_*u+x*l+M*y,t[5]=g*i+_*s+x*h+M*b,t[6]=g*o+_*f+x*d+M*v,t[7]=g*a+_*c+x*p+M*m,g=r[8],_=r[9],x=r[10],M=r[11],t[8]=g*n+_*u+x*l+M*y,t[9]=g*i+_*s+x*h+M*b,t[10]=g*o+_*f+x*d+M*v,t[11]=g*a+_*c+x*p+M*m,g=r[12],_=r[13],x=r[14],M=r[15],t[12]=g*n+_*u+x*l+M*y,t[13]=g*i+_*s+x*h+M*b,t[14]=g*o+_*f+x*d+M*v,t[15]=g*a+_*c+x*p+M*m,t}function i(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t[9]=e[9]-r[9],t[10]=e[10]-r[10],t[11]=e[11]-r[11],t[12]=e[12]-r[12],t[13]=e[13]-r[13],t[14]=e[14]-r[14],t[15]=e[15]-r[15],t}Object.defineProperty(e,"__esModule",{value:!0}),e.create=function(){let t=new o.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.clone=function(t){let e=new o.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.fromValues=function(t,e,r,n,i,a,u,s,f,c,l,h,d,p,y,b){let v=new o.ARRAY_TYPE(16);return v[0]=t,v[1]=e,v[2]=r,v[3]=n,v[4]=i,v[5]=a,v[6]=u,v[7]=s,v[8]=f,v[9]=c,v[10]=l,v[11]=h,v[12]=d,v[13]=p,v[14]=y,v[15]=b,v},e.set=function(t,e,r,n,i,o,a,u,s,f,c,l,h,d,p,y,b){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=o,t[5]=a,t[6]=u,t[7]=s,t[8]=f,t[9]=c,t[10]=l,t[11]=h,t[12]=d,t[13]=p,t[14]=y,t[15]=b,t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.transpose=function(t,e){if(t===e){let r=e[1],n=e[2],i=e[3],o=e[6],a=e[7],u=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=o,t[11]=e[14],t[12]=i,t[13]=a,t[14]=u}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},e.invert=function(t,e){let r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],u=e[5],s=e[6],f=e[7],c=e[8],l=e[9],h=e[10],d=e[11],p=e[12],y=e[13],b=e[14],v=e[15],m=r*u-n*a,g=r*s-i*a,_=r*f-o*a,x=n*s-i*u,M=n*f-o*u,w=i*f-o*s,A=c*y-l*p,E=c*b-h*p,T=c*v-d*p,R=l*b-h*y,O=l*v-d*y,S=h*v-d*b,P=m*S-g*O+_*R+x*T-M*E+w*A;return P?(P=1/P,t[0]=(u*S-s*O+f*R)*P,t[1]=(i*O-n*S-o*R)*P,t[2]=(y*w-b*M+v*x)*P,t[3]=(h*M-l*w-d*x)*P,t[4]=(s*T-a*S-f*E)*P,t[5]=(r*S-i*T+o*E)*P,t[6]=(b*_-p*w-v*g)*P,t[7]=(c*w-h*_+d*g)*P,t[8]=(a*O-u*T+f*A)*P,t[9]=(n*T-r*O-o*A)*P,t[10]=(p*M-y*_+v*m)*P,t[11]=(l*_-c*M-d*m)*P,t[12]=(u*E-a*R-s*A)*P,t[13]=(r*R-n*E+i*A)*P,t[14]=(y*g-p*x-b*m)*P,t[15]=(c*x-l*g+h*m)*P,t):null},e.adjoint=function(t,e){let r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],u=e[5],s=e[6],f=e[7],c=e[8],l=e[9],h=e[10],d=e[11],p=e[12],y=e[13],b=e[14],v=e[15];return t[0]=u*(h*v-d*b)-l*(s*v-f*b)+y*(s*d-f*h),t[1]=-(n*(h*v-d*b)-l*(i*v-o*b)+y*(i*d-o*h)),t[2]=n*(s*v-f*b)-u*(i*v-o*b)+y*(i*f-o*s),t[3]=-(n*(s*d-f*h)-u*(i*d-o*h)+l*(i*f-o*s)),t[4]=-(a*(h*v-d*b)-c*(s*v-f*b)+p*(s*d-f*h)),t[5]=r*(h*v-d*b)-c*(i*v-o*b)+p*(i*d-o*h),t[6]=-(r*(s*v-f*b)-a*(i*v-o*b)+p*(i*f-o*s)),t[7]=r*(s*d-f*h)-a*(i*d-o*h)+c*(i*f-o*s),t[8]=a*(l*v-d*y)-c*(u*v-f*y)+p*(u*d-f*l),t[9]=-(r*(l*v-d*y)-c*(n*v-o*y)+p*(n*d-o*l)),t[10]=r*(u*v-f*y)-a*(n*v-o*y)+p*(n*f-o*u),t[11]=-(r*(u*d-f*l)-a*(n*d-o*l)+c*(n*f-o*u)),t[12]=-(a*(l*b-h*y)-c*(u*b-s*y)+p*(u*h-s*l)),t[13]=r*(l*b-h*y)-c*(n*b-i*y)+p*(n*h-i*l),t[14]=-(r*(u*b-s*y)-a*(n*b-i*y)+p*(n*s-i*u)),t[15]=r*(u*h-s*l)-a*(n*h-i*l)+c*(n*s-i*u),t},e.determinant=function(t){let e=t[0],r=t[1],n=t[2],i=t[3],o=t[4],a=t[5],u=t[6],s=t[7],f=t[8],c=t[9],l=t[10],h=t[11],d=t[12],p=t[13],y=t[14],b=t[15];return(e*a-r*o)*(l*b-h*y)-(e*u-n*o)*(c*b-h*p)+(e*s-i*o)*(c*y-l*p)+(r*u-n*a)*(f*b-h*d)-(r*s-i*a)*(f*y-l*d)+(n*s-i*u)*(f*p-c*d)},e.multiply=n,e.translate=function(t,e,r){let n,i,o,a,u,s,f,c,l,h,d,p,y=r[0],b=r[1],v=r[2];return e===t?(t[12]=e[0]*y+e[4]*b+e[8]*v+e[12],t[13]=e[1]*y+e[5]*b+e[9]*v+e[13],t[14]=e[2]*y+e[6]*b+e[10]*v+e[14],t[15]=e[3]*y+e[7]*b+e[11]*v+e[15]):(n=e[0],i=e[1],o=e[2],a=e[3],u=e[4],s=e[5],f=e[6],c=e[7],l=e[8],h=e[9],d=e[10],p=e[11],t[0]=n,t[1]=i,t[2]=o,t[3]=a,t[4]=u,t[5]=s,t[6]=f,t[7]=c,t[8]=l,t[9]=h,t[10]=d,t[11]=p,t[12]=n*y+u*b+l*v+e[12],t[13]=i*y+s*b+h*v+e[13],t[14]=o*y+f*b+d*v+e[14],t[15]=a*y+c*b+p*v+e[15]),t},e.scale=function(t,e,r){let n=r[0],i=r[1],o=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.rotate=function(t,e,r,n){let i,a,u,s,f,c,l,h,d,p,y,b,v,m,g,_,x,M,w,A,E,T,R,O,S=n[0],P=n[1],C=n[2],I=Math.sqrt(S*S+P*P+C*C);return Math.abs(I)<o.EPSILON?null:(I=1/I,S*=I,P*=I,C*=I,i=Math.sin(r),a=Math.cos(r),u=1-a,s=e[0],f=e[1],c=e[2],l=e[3],h=e[4],d=e[5],p=e[6],y=e[7],b=e[8],v=e[9],m=e[10],g=e[11],_=S*S*u+a,x=P*S*u+C*i,M=C*S*u-P*i,w=S*P*u-C*i,A=P*P*u+a,E=C*P*u+S*i,T=S*C*u+P*i,R=P*C*u-S*i,O=C*C*u+a,t[0]=s*_+h*x+b*M,t[1]=f*_+d*x+v*M,t[2]=c*_+p*x+m*M,t[3]=l*_+y*x+g*M,t[4]=s*w+h*A+b*E,t[5]=f*w+d*A+v*E,t[6]=c*w+p*A+m*E,t[7]=l*w+y*A+g*E,t[8]=s*T+h*R+b*O,t[9]=f*T+d*R+v*O,t[10]=c*T+p*R+m*O,t[11]=l*T+y*R+g*O,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},e.rotateX=function(t,e,r){let n=Math.sin(r),i=Math.cos(r),o=e[4],a=e[5],u=e[6],s=e[7],f=e[8],c=e[9],l=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+f*n,t[5]=a*i+c*n,t[6]=u*i+l*n,t[7]=s*i+h*n,t[8]=f*i-o*n,t[9]=c*i-a*n,t[10]=l*i-u*n,t[11]=h*i-s*n,t},e.rotateY=function(t,e,r){let n=Math.sin(r),i=Math.cos(r),o=e[0],a=e[1],u=e[2],s=e[3],f=e[8],c=e[9],l=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-f*n,t[1]=a*i-c*n,t[2]=u*i-l*n,t[3]=s*i-h*n,t[8]=o*n+f*i,t[9]=a*n+c*i,t[10]=u*n+l*i,t[11]=s*n+h*i,t},e.rotateZ=function(t,e,r){let n=Math.sin(r),i=Math.cos(r),o=e[0],a=e[1],u=e[2],s=e[3],f=e[4],c=e[5],l=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+f*n,t[1]=a*i+c*n,t[2]=u*i+l*n,t[3]=s*i+h*n,t[4]=f*i-o*n,t[5]=c*i-a*n,t[6]=l*i-u*n,t[7]=h*i-s*n,t},e.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromRotation=function(t,e,r){let n,i,a,u=r[0],s=r[1],f=r[2],c=Math.sqrt(u*u+s*s+f*f);return Math.abs(c)<o.EPSILON?null:(c=1/c,u*=c,s*=c,f*=c,n=Math.sin(e),i=Math.cos(e),a=1-i,t[0]=u*u*a+i,t[1]=s*u*a+f*n,t[2]=f*u*a-s*n,t[3]=0,t[4]=u*s*a-f*n,t[5]=s*s*a+i,t[6]=f*s*a+u*n,t[7]=0,t[8]=u*f*a+s*n,t[9]=s*f*a-u*n,t[10]=f*f*a+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},e.fromXRotation=function(t,e){let r=Math.sin(e),n=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromYRotation=function(t,e){let r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromZRotation=function(t,e){let r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromRotationTranslation=function(t,e,r){let n=e[0],i=e[1],o=e[2],a=e[3],u=n+n,s=i+i,f=o+o,c=n*u,l=n*s,h=n*f,d=i*s,p=i*f,y=o*f,b=a*u,v=a*s,m=a*f;return t[0]=1-(d+y),t[1]=l+m,t[2]=h-v,t[3]=0,t[4]=l-m,t[5]=1-(c+y),t[6]=p+b,t[7]=0,t[8]=h+v,t[9]=p-b,t[10]=1-(c+d),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},e.getTranslation=function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},e.getScaling=function(t,e){let r=e[0],n=e[1],i=e[2],o=e[4],a=e[5],u=e[6],s=e[8],f=e[9],c=e[10];return t[0]=Math.sqrt(r*r+n*n+i*i),t[1]=Math.sqrt(o*o+a*a+u*u),t[2]=Math.sqrt(s*s+f*f+c*c),t},e.getRotation=function(t,e){let r=e[0]+e[5]+e[10],n=0;return r>0?(n=2*Math.sqrt(r+1),t[3]=.25*n,t[0]=(e[6]-e[9])/n,t[1]=(e[8]-e[2])/n,t[2]=(e[1]-e[4])/n):e[0]>e[5]&e[0]>e[10]?(n=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/n,t[0]=.25*n,t[1]=(e[1]+e[4])/n,t[2]=(e[8]+e[2])/n):e[5]>e[10]?(n=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/n,t[0]=(e[1]+e[4])/n,t[1]=.25*n,t[2]=(e[6]+e[9])/n):(n=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/n,t[0]=(e[8]+e[2])/n,t[1]=(e[6]+e[9])/n,t[2]=.25*n),t},e.fromRotationTranslationScale=function(t,e,r,n){let i=e[0],o=e[1],a=e[2],u=e[3],s=i+i,f=o+o,c=a+a,l=i*s,h=i*f,d=i*c,p=o*f,y=o*c,b=a*c,v=u*s,m=u*f,g=u*c,_=n[0],x=n[1],M=n[2];return t[0]=(1-(p+b))*_,t[1]=(h+g)*_,t[2]=(d-m)*_,t[3]=0,t[4]=(h-g)*x,t[5]=(1-(l+b))*x,t[6]=(y+v)*x,t[7]=0,t[8]=(d+m)*M,t[9]=(y-v)*M,t[10]=(1-(l+p))*M,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},e.fromRotationTranslationScaleOrigin=function(t,e,r,n,i){let o=e[0],a=e[1],u=e[2],s=e[3],f=o+o,c=a+a,l=u+u,h=o*f,d=o*c,p=o*l,y=a*c,b=a*l,v=u*l,m=s*f,g=s*c,_=s*l,x=n[0],M=n[1],w=n[2],A=i[0],E=i[1],T=i[2];return t[0]=(1-(y+v))*x,t[1]=(d+_)*x,t[2]=(p-g)*x,t[3]=0,t[4]=(d-_)*M,t[5]=(1-(h+v))*M,t[6]=(b+m)*M,t[7]=0,t[8]=(p+g)*w,t[9]=(b-m)*w,t[10]=(1-(h+y))*w,t[11]=0,t[12]=r[0]+A-(t[0]*A+t[4]*E+t[8]*T),t[13]=r[1]+E-(t[1]*A+t[5]*E+t[9]*T),t[14]=r[2]+T-(t[2]*A+t[6]*E+t[10]*T),t[15]=1,t},e.fromQuat=function(t,e){let r=e[0],n=e[1],i=e[2],o=e[3],a=r+r,u=n+n,s=i+i,f=r*a,c=n*a,l=n*u,h=i*a,d=i*u,p=i*s,y=o*a,b=o*u,v=o*s;return t[0]=1-l-p,t[1]=c+v,t[2]=h-b,t[3]=0,t[4]=c-v,t[5]=1-f-p,t[6]=d+y,t[7]=0,t[8]=h+b,t[9]=d-y,t[10]=1-f-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.frustum=function(t,e,r,n,i,o,a){let u=1/(r-e),s=1/(i-n),f=1/(o-a);return t[0]=2*o*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*s,t[6]=0,t[7]=0,t[8]=(r+e)*u,t[9]=(i+n)*s,t[10]=(a+o)*f,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*f,t[15]=0,t},e.perspective=function(t,e,r,n,i){let o=1/Math.tan(e/2),a=1/(n-i);return t[0]=o/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+n)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*n*a,t[15]=0,t},e.perspectiveFromFieldOfView=function(t,e,r,n){let i=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),u=Math.tan(e.rightDegrees*Math.PI/180),s=2/(a+u),f=2/(i+o);return t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=f,t[6]=0,t[7]=0,t[8]=-(a-u)*s*.5,t[9]=(i-o)*f*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t},e.ortho=function(t,e,r,n,i,o,a){let u=1/(e-r),s=1/(n-i),f=1/(o-a);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*f,t[11]=0,t[12]=(e+r)*u,t[13]=(i+n)*s,t[14]=(a+o)*f,t[15]=1,t},e.lookAt=function(t,e,r,n){let i,a,u,s,f,c,l,h,d,p,y=e[0],b=e[1],v=e[2],m=n[0],g=n[1],_=n[2],x=r[0],M=r[1],w=r[2];return Math.abs(y-x)<o.EPSILON&&Math.abs(b-M)<o.EPSILON&&Math.abs(v-w)<o.EPSILON?mat4.identity(t):(l=y-x,h=b-M,d=v-w,p=1/Math.sqrt(l*l+h*h+d*d),l*=p,h*=p,d*=p,i=g*d-_*h,a=_*l-m*d,u=m*h-g*l,(p=Math.sqrt(i*i+a*a+u*u))?(i*=p=1/p,a*=p,u*=p):(i=0,a=0,u=0),s=h*u-d*a,f=d*i-l*u,c=l*a-h*i,(p=Math.sqrt(s*s+f*f+c*c))?(s*=p=1/p,f*=p,c*=p):(s=0,f=0,c=0),t[0]=i,t[1]=s,t[2]=l,t[3]=0,t[4]=a,t[5]=f,t[6]=h,t[7]=0,t[8]=u,t[9]=c,t[10]=d,t[11]=0,t[12]=-(i*y+a*b+u*v),t[13]=-(s*y+f*b+c*v),t[14]=-(l*y+h*b+d*v),t[15]=1,t)},e.targetTo=function(t,e,r,n){let i=e[0],o=e[1],a=e[2],u=n[0],s=n[1],f=n[2],c=i-r[0],l=o-r[1],h=a-r[2],d=c*c+l*l+h*h;d>0&&(c*=d=1/Math.sqrt(d),l*=d,h*=d);let p=s*h-f*l,y=f*c-u*h,b=u*l-s*c;return t[0]=p,t[1]=y,t[2]=b,t[3]=0,t[4]=l*b-h*y,t[5]=h*p-c*b,t[6]=c*y-l*p,t[7]=0,t[8]=c,t[9]=l,t[10]=h,t[11]=0,t[12]=i,t[13]=o,t[14]=a,t[15]=1,t},e.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},e.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t[9]=e[9]+r[9],t[10]=e[10]+r[10],t[11]=e[11]+r[11],t[12]=e[12]+r[12],t[13]=e[13]+r[13],t[14]=e[14]+r[14],t[15]=e[15]+r[15],t},e.subtract=i,e.multiplyScalar=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12]*r,t[13]=e[13]*r,t[14]=e[14]*r,t[15]=e[15]*r,t},e.multiplyScalarAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t[9]=e[9]+r[9]*n,t[10]=e[10]+r[10]*n,t[11]=e[11]+r[11]*n,t[12]=e[12]+r[12]*n,t[13]=e[13]+r[13]*n,t[14]=e[14]+r[14]*n,t[15]=e[15]+r[15]*n,t},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},e.equals=function(t,e){let r=t[0],n=t[1],i=t[2],a=t[3],u=t[4],s=t[5],f=t[6],c=t[7],l=t[8],h=t[9],d=t[10],p=t[11],y=t[12],b=t[13],v=t[14],m=t[15],g=e[0],_=e[1],x=e[2],M=e[3],w=e[4],A=e[5],E=e[6],T=e[7],R=e[8],O=e[9],S=e[10],P=e[11],C=e[12],I=e[13],L=e[14],N=e[15];return Math.abs(r-g)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(g))&&Math.abs(n-_)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(_))&&Math.abs(i-x)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(a-M)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(u-w)<=o.EPSILON*Math.max(1,Math.abs(u),Math.abs(w))&&Math.abs(s-A)<=o.EPSILON*Math.max(1,Math.abs(s),Math.abs(A))&&Math.abs(f-E)<=o.EPSILON*Math.max(1,Math.abs(f),Math.abs(E))&&Math.abs(c-T)<=o.EPSILON*Math.max(1,Math.abs(c),Math.abs(T))&&Math.abs(l-R)<=o.EPSILON*Math.max(1,Math.abs(l),Math.abs(R))&&Math.abs(h-O)<=o.EPSILON*Math.max(1,Math.abs(h),Math.abs(O))&&Math.abs(d-S)<=o.EPSILON*Math.max(1,Math.abs(d),Math.abs(S))&&Math.abs(p-P)<=o.EPSILON*Math.max(1,Math.abs(p),Math.abs(P))&&Math.abs(y-C)<=o.EPSILON*Math.max(1,Math.abs(y),Math.abs(C))&&Math.abs(b-I)<=o.EPSILON*Math.max(1,Math.abs(b),Math.abs(I))&&Math.abs(v-L)<=o.EPSILON*Math.max(1,Math.abs(v),Math.abs(L))&&Math.abs(m-N)<=o.EPSILON*Math.max(1,Math.abs(m),Math.abs(N))};var o=r(1);const a=n;e.mul=a;const u=i;e.sub=u},function(t,e,r){"use strict";function n(){let t=new s.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function i(t,e,r){r*=.5;let n=Math.sin(r);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(r),t}function o(t,e,r){let n=e[0],i=e[1],o=e[2],a=e[3],u=r[0],s=r[1],f=r[2],c=r[3];return t[0]=n*c+a*u+i*f-o*s,t[1]=i*c+a*s+o*u-n*f,t[2]=o*c+a*f+n*s-i*u,t[3]=a*c-n*u-i*s-o*f,t}function a(t,e,r,n){let i,o,a,u,s,f=e[0],c=e[1],l=e[2],h=e[3],d=r[0],p=r[1],y=r[2],b=r[3];return(o=f*d+c*p+l*y+h*b)<0&&(o=-o,d=-d,p=-p,y=-y,b=-b),1-o>1e-6?(i=Math.acos(o),a=Math.sin(i),u=Math.sin((1-n)*i)/a,s=Math.sin(n*i)/a):(u=1-n,s=n),t[0]=u*f+s*d,t[1]=u*c+s*p,t[2]=u*l+s*y,t[3]=u*h+s*b,t}function u(t,e){let r,n=e[0]+e[4]+e[8];if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{let n=0;e[4]>e[0]&&(n=1),e[8]>e[3*n+n]&&(n=2);let i=(n+1)%3,o=(n+2)%3;r=Math.sqrt(e[3*n+n]-e[3*i+i]-e[3*o+o]+1),t[n]=.5*r,r=.5/r,t[3]=(e[3*i+o]-e[3*o+i])*r,t[i]=(e[3*i+n]+e[3*n+i])*r,t[o]=(e[3*o+n]+e[3*n+o])*r}return t}Object.defineProperty(e,"__esModule",{value:!0}),e.create=n,e.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},e.setAxisAngle=i,e.getAxisAngle=function(t,e){let r=2*Math.acos(e[3]),n=Math.sin(r/2);return 0!=n?(t[0]=e[0]/n,t[1]=e[1]/n,t[2]=e[2]/n):(t[0]=1,t[1]=0,t[2]=0),r},e.multiply=o,e.rotateX=function(t,e,r){r*=.5;let n=e[0],i=e[1],o=e[2],a=e[3],u=Math.sin(r),s=Math.cos(r);return t[0]=n*s+a*u,t[1]=i*s+o*u,t[2]=o*s-i*u,t[3]=a*s-n*u,t},e.rotateY=function(t,e,r){r*=.5;let n=e[0],i=e[1],o=e[2],a=e[3],u=Math.sin(r),s=Math.cos(r);return t[0]=n*s-o*u,t[1]=i*s+a*u,t[2]=o*s+n*u,t[3]=a*s-i*u,t},e.rotateZ=function(t,e,r){r*=.5;let n=e[0],i=e[1],o=e[2],a=e[3],u=Math.sin(r),s=Math.cos(r);return t[0]=n*s+i*u,t[1]=i*s-n*u,t[2]=o*s+a*u,t[3]=a*s-o*u,t},e.calculateW=function(t,e){let r=e[0],n=e[1],i=e[2];return t[0]=r,t[1]=n,t[2]=i,t[3]=Math.sqrt(Math.abs(1-r*r-n*n-i*i)),t},e.slerp=a,e.invert=function(t,e){let r=e[0],n=e[1],i=e[2],o=e[3],a=r*r+n*n+i*i+o*o,u=a?1/a:0;return t[0]=-r*u,t[1]=-n*u,t[2]=-i*u,t[3]=o*u,t},e.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},e.fromMat3=u,e.fromEuler=function(t,e,r,n){let i=.5*Math.PI/180;e*=i,r*=i,n*=i;let o=Math.sin(e),a=Math.cos(e),u=Math.sin(r),s=Math.cos(r),f=Math.sin(n),c=Math.cos(n);return t[0]=o*s*c-a*u*f,t[1]=a*u*c+o*s*f,t[2]=a*s*f-o*u*c,t[3]=a*s*c+o*u*f,t},e.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"};var s=r(1),f=r(51),c=r(52),l=r(53);const h=l.clone;e.clone=h;const d=l.fromValues;e.fromValues=d;const p=l.copy;e.copy=p;const y=l.set;e.set=y;const b=l.add;e.add=b;const v=o;e.mul=v;const m=l.scale;e.scale=m;const g=l.dot;e.dot=g;const _=l.lerp;e.lerp=_;const x=l.length;e.length=x;const M=x;e.len=M;const w=l.squaredLength;e.squaredLength=w;const A=w;e.sqrLen=A;const E=l.normalize;e.normalize=E;const T=l.exactEquals;e.exactEquals=T;const R=l.equals;e.equals=R;const O=function(){let t=c.create(),e=c.fromValues(1,0,0),r=c.fromValues(0,1,0);return function(n,o,a){let u=c.dot(o,a);return u<-.999999?(c.cross(t,e,o),c.len(t)<1e-6&&c.cross(t,r,o),c.normalize(t,t),i(n,t,Math.PI),n):u>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(c.cross(t,o,a),n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=1+u,E(n,n))}}();e.rotationTo=O;const S=function(){let t=n(),e=n();return function(r,n,i,o,u,s){return a(t,n,u,s),a(e,i,o,s),a(r,t,e,2*s*(1-s)),r}}();e.sqlerp=S;const P=function(){let t=f.create();return function(e,r,n,i){return t[0]=n[0],t[3]=n[1],t[6]=n[2],t[1]=i[0],t[4]=i[1],t[7]=i[2],t[2]=-r[0],t[5]=-r[1],t[8]=-r[2],E(e,u(e,t))}}();e.setAxes=P},function(t,e,r){"use strict";function n(){let t=new l.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t}function i(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t}function o(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t}function a(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t}function u(t,e){var r=e[0]-t[0],n=e[1]-t[1];return Math.sqrt(r*r+n*n)}function s(t,e){var r=e[0]-t[0],n=e[1]-t[1];return r*r+n*n}function f(t){var e=t[0],r=t[1];return Math.sqrt(e*e+r*r)}function c(t){var e=t[0],r=t[1];return e*e+r*r}Object.defineProperty(e,"__esModule",{value:!0}),e.create=n,e.clone=function(t){let e=new l.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},e.fromValues=function(t,e){let r=new l.ARRAY_TYPE(2);return r[0]=t,r[1]=e,r},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},e.set=function(t,e,r){return t[0]=e,t[1]=r,t},e.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t},e.subtract=i,e.multiply=o,e.divide=a,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},e.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t},e.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},e.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t},e.scaleAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t},e.distance=u,e.squaredDistance=s,e.length=f,e.squaredLength=c,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},e.normalize=function(t,e){var r=e[0],n=e[1],i=r*r+n*n;return i>0&&(i=1/Math.sqrt(i),t[0]=e[0]*i,t[1]=e[1]*i),t},e.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},e.cross=function(t,e,r){var n=e[0]*r[1]-e[1]*r[0];return t[0]=t[1]=0,t[2]=n,t},e.lerp=function(t,e,r,n){var i=e[0],o=e[1];return t[0]=i+n*(r[0]-i),t[1]=o+n*(r[1]-o),t},e.random=function(t,e){e=e||1;var r=2*l.RANDOM()*Math.PI;return t[0]=Math.cos(r)*e,t[1]=Math.sin(r)*e,t},e.transformMat2=function(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i,t[1]=r[1]*n+r[3]*i,t},e.transformMat2d=function(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i+r[4],t[1]=r[1]*n+r[3]*i+r[5],t},e.transformMat3=function(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[3]*i+r[6],t[1]=r[1]*n+r[4]*i+r[7],t},e.transformMat4=function(t,e,r){let n=e[0],i=e[1];return t[0]=r[0]*n+r[4]*i+r[12],t[1]=r[1]*n+r[5]*i+r[13],t},e.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]},e.equals=function(t,e){let r=t[0],n=t[1],i=e[0],o=e[1];return Math.abs(r-i)<=l.EPSILON*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(n-o)<=l.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))};var l=r(1);const h=f;e.len=h;const d=i;e.sub=d;const p=o;e.mul=p;const y=a;e.div=y;const b=u;e.dist=b;const v=s;e.sqrDist=v;const m=c;e.sqrLen=m;const g=function(){let t=n();return function(e,r,n,i,o,a){let u,s;for(r||(r=2),n||(n=0),s=i?Math.min(i*r+n,e.length):e.length,u=n;u<s;u+=r)t[0]=e[u],t[1]=e[u+1],o(t,t,a),e[u]=t[0],e[u+1]=t[1];return e}}();e.forEach=g},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){switch(e){case a.default.TYPE.UNIFORM:return t.uniform;case a.default.TYPE.ATTRIB:return t.attrib;case a.default.TYPE.TEXTURE_2D:return t.tex2d}}function o(t,e,r){var n=i(t,e),o=n.get(r);return o||(o=[],n.set(r,o)),o}e.__esModule=!0;var a=n(r(6)),u=n(r(14)),s=n(r(0)),f=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.uniform=new Map,this.attrib=new Map,this.tex2d=new Map}return t.prototype.clear=function(){this.uniform.clear(),this.attrib.clear(),this.tex2d.clear()},t.prototype.destroy=function(){this.clear(),(0,s.default)(this)},t.prototype.pushVar=function(t){if(t instanceof u.default)t.pushVar(this);else{o(this,t.type,t.name).push(t)}},t.prototype.popVar=function(t){if(t instanceof u.default)t.popVar(this);else for(var e=o(this,t.type,t.name),r=e.length,n=0;n<r;++n)if(e[n]===t)return void(e.length=n)},t.prototype.curVar=function(t){var e=i(this,t.type).get(t.name);return e&&e.length?e[e.length-1]:null},t.prototype.curUniform=function(t){var e=this.uniform.get(t);return e&&e.length?e[e.length-1]:null},t.prototype.curAttrib=function(t){var e=this.attrib.get(t);return e&&e.length?e[e.length-1]:null},t.prototype.curTex2d=function(t){var e=this.tex2d.get(t);return e&&e.length?e[e.length-1]:null},t}();e.default=f},function(t,e,r){var n=r(126),i=r(167)(function(t,e){return null==t?{}:n(t,e)});t.exports=i},function(t,e,r){var n=r(127),i=r(162);t.exports=function(t,e){return n(t,e,function(e,r){return i(t,r)})}},function(t,e,r){var n=r(128),i=r(159),o=r(15);t.exports=function(t,e,r){for(var a=-1,u=e.length,s={};++a<u;){var f=e[a],c=n(t,f);r(c,f)&&i(s,o(f,t),c)}return s}},function(t,e,r){var n=r(15),i=r(32);t.exports=function(t,e){for(var r=0,o=(e=n(e,t)).length;null!=t&&r<o;)t=t[i(e[r++])];return r&&r==o?t:void 0}},function(t,e,r){var n=r(5),i=r(25),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;t.exports=function(t,e){if(n(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!i(t))||a.test(t)||!o.test(t)||null!=e&&t in Object(e)}},function(t,e,r){var n=/^\./,i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,a=r(131)(function(t){var e=[];return n.test(t)&&e.push(""),t.replace(i,function(t,r,n,i){e.push(n?i.replace(o,"$1"):r||t)}),e});t.exports=a},function(t,e,r){var n=r(132),i=500;t.exports=function(t){var e=n(t,function(t){return r.size===i&&r.clear(),t}),r=e.cache;return e}},function(t,e,r){function n(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(o);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var a=t.apply(this,n);return r.cache=o.set(i,a)||o,a};return r.cache=new(n.Cache||i),r}var i=r(133),o="Expected a function";n.Cache=i,t.exports=n},function(t,e,r){function n(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}var i=r(134),o=r(154),a=r(156),u=r(157),s=r(158);n.prototype.clear=i,n.prototype.delete=o,n.prototype.get=a,n.prototype.has=u,n.prototype.set=s,t.exports=n},function(t,e,r){var n=r(135),i=r(147),o=r(153);t.exports=function(){this.size=0,this.__data__={hash:new n,map:new(o||i),string:new n}}},function(t,e,r){function n(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}var i=r(136),o=r(143),a=r(144),u=r(145),s=r(146);n.prototype.clear=i,n.prototype.delete=o,n.prototype.get=a,n.prototype.has=u,n.prototype.set=s,t.exports=n},function(t,e,r){var n=r(16);t.exports=function(){this.__data__=n?n(null):{},this.size=0}},function(t,e,r){var n=r(138),i=r(139),o=r(31),a=r(141),u=/^\[object .+?Constructor\]$/,s=Function.prototype,f=Object.prototype,c=s.toString,l=f.hasOwnProperty,h=RegExp("^"+c.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!o(t)||i(t))&&(n(t)?h:u).test(a(t))}},function(t,e,r){var n=r(26),i=r(31),o="[object AsyncFunction]",a="[object Function]",u="[object GeneratorFunction]",s="[object Proxy]";t.exports=function(t){if(!i(t))return!1;var e=n(t);return e==a||e==u||e==o||e==s}},function(t,e,r){var n=r(140),i=function(){var t=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();t.exports=function(t){return!!i&&i in t}},function(t,e,r){var n=r(24)["__core-js_shared__"];t.exports=n},function(t,e){var r=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return r.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},function(t,e,r){var n=r(16),i="__lodash_hash_undefined__",o=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(n){var r=e[t];return r===i?void 0:r}return o.call(e,t)?e[t]:void 0}},function(t,e,r){var n=r(16),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return n?void 0!==e[t]:i.call(e,t)}},function(t,e,r){var n=r(16),i="__lodash_hash_undefined__";t.exports=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=n&&void 0===e?i:e,this}},function(t,e,r){function n(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}var i=r(148),o=r(149),a=r(150),u=r(151),s=r(152);n.prototype.clear=i,n.prototype.delete=o,n.prototype.get=a,n.prototype.has=u,n.prototype.set=s,t.exports=n},function(t,e){t.exports=function(){this.__data__=[],this.size=0}},function(t,e,r){var n=r(17),i=Array.prototype.splice;t.exports=function(t){var e=this.__data__,r=n(e,t);return!(r<0||(r==e.length-1?e.pop():i.call(e,r,1),--this.size,0))}},function(t,e,r){var n=r(17);t.exports=function(t){var e=this.__data__,r=n(e,t);return r<0?void 0:e[r][1]}},function(t,e,r){var n=r(17);t.exports=function(t){return n(this.__data__,t)>-1}},function(t,e,r){var n=r(17);t.exports=function(t,e){var r=this.__data__,i=n(r,t);return i<0?(++this.size,r.push([t,e])):r[i][1]=e,this}},function(t,e,r){var n=r(30)(r(24),"Map");t.exports=n},function(t,e,r){var n=r(18);t.exports=function(t){var e=n(this,t).delete(t);return this.size-=e?1:0,e}},function(t,e){t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},function(t,e,r){var n=r(18);t.exports=function(t){return n(this,t).get(t)}},function(t,e,r){var n=r(18);t.exports=function(t){return n(this,t).has(t)}},function(t,e,r){var n=r(18);t.exports=function(t,e){var r=n(this,t),i=r.size;return r.set(t,e),this.size+=r.size==i?0:1,this}},function(t,e,r){var n=r(160),i=r(15),o=r(65),a=r(31),u=r(32);t.exports=function(t,e,r,s){if(!a(t))return t;for(var f=-1,c=(e=i(e,t)).length,l=c-1,h=t;null!=h&&++f<c;){var d=u(e[f]),p=r;if(f!=l){var y=h[d];void 0===(p=s?s(y,d,h):void 0)&&(p=a(y)?y:o(e[f+1])?[]:{})}n(h,d,p),h=h[d]}return t}},function(t,e,r){var n=r(161),i=r(63),o=Object.prototype.hasOwnProperty;t.exports=function(t,e,r){var a=t[e];o.call(t,e)&&i(a,r)&&(void 0!==r||e in t)||n(t,e,r)}},function(t,e,r){var n=r(64);t.exports=function(t,e,r){"__proto__"==e&&n?n(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}},function(t,e,r){var n=r(163),i=r(164);t.exports=function(t,e){return null!=t&&i(t,e,n)}},function(t,e){t.exports=function(t,e){return null!=t&&e in Object(t)}},function(t,e,r){var n=r(15),i=r(66),o=r(5),a=r(65),u=r(166),s=r(32);t.exports=function(t,e,r){for(var f=-1,c=(e=n(e,t)).length,l=!1;++f<c;){var h=s(e[f]);if(!(l=null!=t&&r(t,h)))break;t=t[h]}return l||++f!=c?l:!!(c=null==t?0:t.length)&&u(c)&&a(h,c)&&(o(t)||i(t))}},function(t,e,r){var n=r(26),i=r(27),o="[object Arguments]";t.exports=function(t){return i(t)&&n(t)==o}},function(t,e){var r=9007199254740991;t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=r}},function(t,e,r){var n=r(168),i=r(172),o=r(174);t.exports=function(t){return o(i(t,void 0,n),t+"")}},function(t,e,r){var n=r(169);t.exports=function(t){return(null==t?0:t.length)?n(t,1):[]}},function(t,e,r){function n(t,e,r,a,u){var s=-1,f=t.length;for(r||(r=o),u||(u=[]);++s<f;){var c=t[s];e>0&&r(c)?e>1?n(c,e-1,r,a,u):i(u,c):a||(u[u.length]=c)}return u}var i=r(170),o=r(171);t.exports=n},function(t,e){t.exports=function(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}},function(t,e,r){var n=r(13),i=r(66),o=r(5),a=n?n.isConcatSpreadable:void 0;t.exports=function(t){return o(t)||i(t)||!!(a&&t&&t[a])}},function(t,e,r){var n=r(173),i=Math.max;t.exports=function(t,e,r){return e=i(void 0===e?t.length-1:e,0),function(){for(var o=arguments,a=-1,u=i(o.length-e,0),s=Array(u);++a<u;)s[a]=o[e+a];a=-1;for(var f=Array(e+1);++a<e;)f[a]=o[a];return f[e]=r(s),n(t,this,f)}}},function(t,e){t.exports=function(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}},function(t,e,r){var n=r(175),i=r(178)(n);t.exports=i},function(t,e,r){var n=r(176),i=r(64),o=r(177),a=i?function(t,e){return i(t,"toString",{configurable:!0,enumerable:!1,value:n(e),writable:!0})}:o;t.exports=a},function(t,e){t.exports=function(t){return function(){return t}}},function(t,e){t.exports=function(t){return t}},function(t,e){var r=800,n=16,i=Date.now;t.exports=function(t){var e=0,o=0;return function(){var a=i(),u=n-(a-o);if(o=a,u>0){if(++e>=r)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}},function(t,e,r){"use strict";e.__esModule=!0;var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=function(t){return t<0?0:t},o=function(t){function e(r,n,o,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var u=parseInt(r,10),s=parseInt(n,10);return function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,u,i(u+parseInt(o,10)-1),s,i(s+parseInt(a,10)-1)))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),n(e,[{key:"x",get:function(){return this.minX},set:function(t){var e=this.width;this.minX=t,this.maxX=i(t+e-1)}},{key:"y",get:function(){return this.minY},set:function(t){var e=this.height;this.minY=t,this.maxY=i(t+e-1)}},{key:"width",get:function(){return i(this.maxX-this.minX+1)},set:function(t){this.maxX=i(this.minX+t-1)}},{key:"height",get:function(){return i(this.maxY-this.minY+1)},set:function(t){this.maxY=i(this.minY+t-1)}}]),e}(function(t){return t&&t.__esModule?t:{default:t}}(r(47)).default);e.default=o},function(t,e,r){"use strict";e.__esModule=!0;var n=r(34),i=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],t.glx.gl),i=e?n.COLOR_BUFFER_BIT:0;return r&&t.hasDepthBits&&(i|=n.DEPTH_BUFFER_BIT),r&&t.hasStencilBits&&(i|=n.STENCIL_BUFFER_BIT),i},o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.glx=e,this.hasDepthBits=e.DEPTH_BUFFER_BIT>0,this.hasStencilBits=e.STENCIL_BUFFER_BIT>0,this.reset()}return t.prototype.reset=function(){this.clearColor=null,this.clearDepth=1,this.clearStencil=0,this.clearMask=0},t.prototype.setClearColor=function(t){this.clearColor=t?"string"==typeof t?n(t):t:null},t.prototype.setClearMask=function(t,e,r){this.clearMask=i(this,t,e,r)},t.prototype.clear=function(){var t=this.glx.gl,e=this.clearColor;if(e){var r=e.toRgb();t.clearColor(r.r/255,r.g/255,r.b/255,r.a)}else t.clearColor(0,0,0,0);this.hasDepthBits&&t.clearDepth(this.clearDepth),this.hasStencilBits&&t.clearStencil(this.clearStencil);var n=this.clearMask||i(this,!0,!0,!0);t.clear(n)},t}();e.default=o},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t,e){var r=t.indexOf(e);r>-1&&t.splice(r,1)}},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t,e,r){return t&&e in t?t[e]:"function"==typeof r?r():r}},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t){return"string"==typeof t&&t.length>0}},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t){return"number"==typeof t&&t>0}},function(t,e,r){"use strict";e.__esModule=!0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.default=function(t){if(t){var e=(0,i.default)(t);if(e&&"object"===(void 0===e?"undefined":n(e))){var r=Object.keys(e);return function(t){r.forEach(function(r){var n=t.descriptor.attr[r];n?n.setValue(t,e[r]):"function"==typeof t[r]?t[r](e[r]):t[r]=e[r]})}}}};var i=function(t){return t&&t.__esModule?t:{default:t}}(r(74))},function(t,e,r){"use strict";e.__esModule=!0;var n=r(7),i=r(2),o=r(36),a=r(34),u=function(t){return t?a(t):null},s=function(t){return{color:t.indexOf("COLOR")>-1,depth:t.indexOf("DEPTH")>-1,stencil:t.indexOf("STENCIL")>-1}},f=function(t){if(!t||"string"==typeof t)return{clearColor:u(t||"rgba(0,0,0,0)"),clearDepth:1,clearStencil:0,mask:s("COLOR,DEPTH,STENCIL")};var e=n.getDefaultOption.bind(null,t);return{clearColor:u(e("color","rgba(0,0,0,0)")),clearDepth:e("depth",1),clearStencil:e("stencil",0),mask:s(e("mask","COLOR,DEPTH,STENCIL"))}},c=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Object.assign(this,f(r)),(0,i.debug)("[clear] create",this)}return t.prototype.update=function(t){Object.assign(this,f(t)),(0,i.debug)("[clear] update",this)},t.prototype.connectedEntity=function(t){this._renderFrameId=t.on("renderFrame",o.COMPONENT_PRIORITY_CLEAR,this.renderFrame.bind(this))},t.prototype.disconnectedEntity=function(t){this._renderFrameId&&t.off(this._renderFrameId)},t.prototype.renderFrame=function(t){var e=t.clearBuffer;e.clearDepth=this.clearDepth,e.clearStencil=this.clearStencil,e.setClearColor(this.clearColor);var r=this.mask,n=r.color,i=r.depth,o=r.stencil;e.setClearMask(n,i,o),e.clear()},t}();e.default=c},function(t,e,r){"use strict";e.__esModule=!0;var n=r(10),i=r(2),o=r(36),a=function(t){return"string"==typeof t?t:void 0},u=function(t){return{enable:void 0===t.enable||Boolean(t.enable),sfactor:a(t.sfactor),dfactor:a(t.dfactor)}},s=function(t){var e=t.enable,r=t.sfactor,i=t.dfactor;return new n.BlendMode(e,r,i)},f=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.blendMode=s(u(r)),(0,i.debug)("[blend] create",this)}return t.prototype.update=function(t){Object.assign(this.blendMode,u(t)),(0,i.debug)("[blend] update",this)},t.prototype.connectedEntity=function(t){this._renderFrameId=t.on("renderFrame",o.COMPONENT_PRIORITY_BLEND,this.renderFrame.bind(this)),this._postRenderFrameId=t.on("postRenderFrame",o.COMPONENT_PRIORITY_POST_BLEND,this.postRenderFrame.bind(this))},t.prototype.disconnectedEntity=function(t){this._renderFrameId&&t.off(this._renderFrameId),this._postRenderFrameId&&t.off(this._postRenderFrameId)},t.prototype.renderFrame=function(t){t.pushBlendMode(this.blendMode)},t.prototype.postRenderFrame=function(t){t.popBlendMode()},t}();e.default=f},function(t,e,r){"use strict";e.__esModule=!0;var n=r(10),i=r(2),o=r(36),a=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.projection=new n.Projection(r),(0,i.debug)("[projection] create",this)}return t.prototype.update=function(t){var e=this;t&&Object.entries(t).forEach(function(t){var r=t[0],n=t[1];e.projection[r]=n}),(0,i.debug)("[projection] udpate",this)},t.prototype.connectedEntity=function(t){this._renderFrameId=t.on("renderFrame",o.COMPONENT_PRIORITY_PROJECTION,this.renderFrame.bind(this))},t.prototype.disconnectedEntity=function(t){this._renderFrameId&&t.off(this._renderFrameId)},t.prototype.renderFrame=function(t,e){this.projection.update(e.width,e.height),t.shaderContext.pushVar(this.projection.uniform)},t}();e.default=a},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t){t.addDescriptor(i,n.description).addVertexShader(i,n.vertexShader).addFragmentShader(i,n.fragmentShader)};var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(190)),i="simple"},function(t,e,r){"use strict";e.__esModule=!0,e.description=e.fragmentShader=e.vertexShader=void 0;var n=function(t){return t&&t.__esModule?t:{default:t}}(r(191));e.vertexShader=["\n\n  attribute vec2 pos2d;\n  attribute float posZ;\n  attribute vec2 uv;\n  attribute vec2 translate;\n  attribute float rotate;\n  attribute float scale;\n  attribute float opacity;\n\n  uniform mat4 viewMatrix;\n\n  varying vec4 vTextureCoordScaleOpacity;\n\n  ",(0,n.default)("rotateZ",0,0,1),"\n\n  void main(void)\n  {\n    mat4 rotationMatrix = rotateZ(rotate);\n    gl_Position = viewMatrix * ((rotationMatrix * (vec4(scale, scale, scale, 1.0) * vec4(pos2d.xy, posZ, 1.0))) + vec4(translate.xy, 0.0, 0.0));\n    vTextureCoordScaleOpacity = vec4(uv.xy, opacity, 0.0);\n  }\n"],e.fragmentShader="\n\n  precision mediump float;\n\n  varying vec4 vTextureCoordScaleOpacity;\n  uniform sampler2D tex;\n\n  void main(void) {\n    gl_FragColor = vTextureCoordScaleOpacity.z * texture2D(tex, vec2(vTextureCoordScaleOpacity.s, vTextureCoordScaleOpacity.t));\n  }\n\n",e.description={vertexCount:4,attributes:[{name:"position",type:"float32",size:3,attrNames:["x","y","z"]},{name:"rotate",type:"float32",size:1,uniform:!0},{name:"texCoords",type:"float32",size:2,attrNames:["s","t"]},{name:"translate",type:"float32",size:2,attrNames:["tx","ty"],uniform:!0},{name:"scale",type:"float32",size:1,uniform:!0},{name:"opacity",type:"float32",size:1,uniform:!0}],aliases:{pos2d:{size:2,type:"float32",offset:0},posZ:{size:1,type:"float32",offset:2,uniform:!0},uv:"texCoords"},proto:{setTexCoordsByViewport:function(t,e,r,n){var i=0===t.x?0:t.x/e,o=(t.x+t.width)/e,a=1-(t.y+t.height)/r,u=0===t.y?1:1-t.y/r;void 0!==n&&(i*=n,o*=n,a*=n,u*=n),this.setTexCoords(i,a,o,a,o,u,i,u)},setTexCoordsByTexture:function(t){var e=t.minS,r=t.minT,n=t.maxS,i=t.maxT;this.setTexCoords(e,r,n,r,n,i,e,i)},setSize:function(t,e){var r=.5*t,n=.5*(null==e?t:e);this.setPos2d(-r,n,r,n,r,-n,-r,-n)},get width(){return this.x1-this.x3},get height(){return this.y0-this.y2},get rotateDegree(){return 180*this.rotate/Math.PI},set rotateDegree(t){this.rotate=t*(Math.PI/180)},get z(){return this.z0},set z(t){this.z0=t,this.z1=t,this.z2=t,this.z3=t}}}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"rotate",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return["mat4 "+t+"(float angle) {","float s = sin(angle);","float c = cos(angle);","float oc = 1.0 - c;",(0,i.default)((0,o.default)((0,s.default)((0,a.default)("oc",e*e),"c"),(0,u.default)((0,a.default)("oc",e*r),(0,a.default)(n,"s")),(0,s.default)((0,a.default)("oc",n*e),(0,a.default)(r,"s")),0,(0,s.default)((0,a.default)("oc",e*r),(0,a.default)(n,"s")),(0,s.default)((0,a.default)("oc",r*r),"c"),(0,u.default)((0,a.default)("oc",r*n),(0,a.default)(e,"s")),0,(0,u.default)((0,a.default)("oc",n*e),(0,a.default)(r,"s")),(0,s.default)((0,a.default)("oc",r*n),(0,a.default)(e,"s")),(0,s.default)((0,a.default)("oc",n*n),"c"))),"}"]};var i=n(r(192)),o=n(r(193)),a=n(r(195)),u=n(r(196)),s=n(r(197))},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t){return"return "+t+";"}},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,f=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,l=arguments.length>10&&void 0!==arguments[10]?arguments[10]:0,h=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,d=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,p=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,y=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,b=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1,v=(arguments.length>16&&void 0!==arguments[16]?arguments[16]:n.default)||function(t){return t+""};return"mat4("+v(t)+", "+v(e)+", "+v(r)+", "+v(i)+", "+v(o)+", "+v(a)+", "+v(u)+", "+v(s)+", "+v(f)+", "+v(c)+", "+v(l)+", "+v(h)+", "+v(d)+", "+v(p)+", "+v(y)+", "+v(b)+")"};var n=function(t){return t&&t.__esModule?t:{default:t}}(r(194))},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t){var e=(t+"").trim();return e.match(/^[0-9]+$/)?e+".0":e}},function(t,e,r){"use strict";function n(t){return"number"==typeof t}e.__esModule=!0,e.default=function(t,e){if(n(e)&&n(t))return t*e;if(n(t))switch(t){case 0:return 0;case 1:return e;default:return t+" * "+e}else{if(!n(e))return t+" * "+e;switch(e){case 0:return 0;case 1:return t;default:return t+" * "+e}}}},function(t,e,r){"use strict";function n(t){return"number"==typeof t}e.__esModule=!0,e.default=function(t,e){if(n(t)&&n(e))return t-e;if(n(t))switch(t){case 0:return"-"+e;default:return t+" - "+e}else{if(!n(e))return t+" - "+e;switch(e){case 0:return t;default:return t+" - "+e}}}},function(t,e,r){"use strict";function n(t){return"number"==typeof t}e.__esModule=!0,e.default=function(t,e){if(n(t)&&n(e))return t+e;if(n(t))switch(t){case 0:return e;default:return t+" + "+e}else{if(!n(e))return t+" + "+e;switch(e){case 0:return t;default:return t+" + "+e}}}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(r(2)),o=n(r(199)),a=r(4),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(40));e.default=function(){return customElements.get(a.HTML_ELEMENT_ENTITY)?(0,i.default)("<blitpunk> custom elements have already been defined"):((0,i.default)("<blitpunk> custom elements are now defined"),(0,o.default)()),customElements.whenDefined(a.HTML_ELEMENT_ENTITY).then(function(){return u})}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.default=function(){[[s.HTML_ELEMENT_CANVAS,i.default],[s.HTML_ELEMENT_ENTITY,o.default],[s.HTML_ELEMENT_TEXTURE_ATLAS,a.default],[s.HTML_ELEMENT_SPRITE_GROUP,u.default]].forEach(function(t){var e=t[0],r=t[1];return window.customElements.define(e,r)})};var i=n(r(200)),o=n(r(20)),a=n(r(205)),u=n(r(209)),s=r(4);r(211)},function(t,e,r){"use strict";e.__esModule=!0;var n=r(201);Object.defineProperty(e,"default",{enumerable:!0,get:function(){return function(t){return t&&t.__esModule?t:{default:t}}(n).default}})},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}e.__esModule=!0;var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=n(r(20)),u=n(r(203)),s=n(r(204)),f=function(t){function e(r){var n,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=n=i(this,t.call(this,r));return a.now=0,a.frameNo=0,a.animationFrameRequestId=0,a.animationFrameRequestIsStopped=!1,Object.defineProperties(a,{_webGlRenderer:{value:null,writable:!0},_clearColor:{value:void 0,writable:!0},_lastFrameTime:{value:0,writable:!0}}),a.canvas=document.createElement("canvas"),a.firstTimeConnected=!0,(0,s.default)(a),o=a,i(n,o)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.startAnimation=function(){var t=this;this.animationFrameRequestId||(this.animationFrameRequestIsStopped=!1,this.animationFrameRequestId=window.requestAnimationFrame(function(e){if(t.animationFrameRequestId=0,!t.animationFrameRequestIsStopped){t.startAnimation(),++t.frameNo,t.now=e/1e3,t.timeFrameOffset=t.now-t._lastFrameTime,t._lastFrameTime=t.now,(0,s.default)(t);var r=t.webGlRenderer;r.setViewport(0,0,t.width,t.height),r.renderFrame(function(){t.renderFrame(t,r)})}}))},e.prototype.stopAnimation=function(){this.animationFrameRequestIsStopped=!0,0!==this.animationFrameRequestId&&(window.cancelAnimationFrame(this.animationFrameRequestId),this.animationFrameRequestId=0)},e.prototype.connectedCallback=function(){this.firstTimeConnected&&(this.firstTimeConnected=!1,this.appendChild(this.canvas)),(0,s.default)(this),this.startAnimation()},e.prototype.disconnectedCallback=function(){this.stopAnimation()},o(e,[{key:"webGlRenderer",get:function(){var t=this._webGlRenderer;if(t)return t;var e=(0,u.default)(this),r=e.webGlRenderer,n=e.canvasContextAttributes;return this.canvasContextAttributes=n,this._webGlRenderer=r,r}}]),e}(a.default);e.default=f},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}e.__esModule=!0;var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=r(7),u=r(78),s=n(r(37)),f=n(r(35)),c=r(2),l=function(t){function e(r){var n,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=n=i(this,t.call(this,r));return Object.defineProperties(a,{attributeValuesCache:{value:new Map},attributeNamesCache:{value:[]},_componentRegistry:{value:null,writable:!0},_entityManager:{value:null,writable:!0},_entity:{value:null,writable:!0}}),o=a,i(n,o)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.updateEntity=function(){var t=this,e=this.getAttributeNames(),r=this.attributeNamesCache.slice(0);this.attributeNamesCache.length=0,e.forEach(function(e){(0,a.removeItem)(r,e),t.attributeNamesCache.push(e);var n=t.attributeValuesCache,i=n.get(e),o=t.getAttribute(e);i!==o&&(n.set(e,o),t.componentRegistry.createOrUpdateComponent(t.entity,e,o))}),r.forEach(function(e){t.entity.destroyComponent(e),t.attributeValuesCache.delete(e)})},e.prototype.renderFrame=function(t,e){this.updateEntity(),this.entity.emit("renderFrame",e,t);for(var r=this.children,n=0;n<r.length;n++){var i=r[n];i.renderFrame&&i.renderFrame(t,e)}this.entity.emit("postRenderFrame",e,t)},e.prototype.connectedCallback=function(){(0,c.debug)("[entity] connectedCallback()",this)},e.prototype.disconnectedCallback=function(){(0,c.debug)("[entity] disconnectedCallback()",this)},o(e,[{key:"componentRegistry",get:function(){return this._componentRegistry||(this._componentRegistry=new u.ComponentRegistry(f.default)),this._componentRegistry},set:function(t){this._componentRegistry=t}},{key:"entityManager",get:function(){return this._entityManager||s.default},set:function(t){this._entityManager=t}},{key:"entity",get:function(){var t=this._entity;return t||(this._entity=this.entityManager.createEntity(),this._entity)}}]),e}(HTMLElement);e.default=l},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(r(41)),o=n(r(44)),a=r(2),u=n(r(79)),s=r(4);e.default=function(t){var e=Object.freeze(function(t){return{alpha:(0,u.default)(t,s.ATTR_ALPHA,!1),antialias:(0,u.default)(t,s.ATTR_ANTIALIAS,!1),depth:(0,u.default)(t,s.ATTR_DEPTH,!0),premultipliedAlpha:(0,u.default)(t,s.ATTR_PREMULTIPLIED_ALPHA,!1),preserveDrawingBuffer:(0,u.default)(t,s.ATTR_PRESERVE_DRAW,!1),stencil:(0,u.default)(t,s.ATTR_STENCIL,!1)}}(t)),r=new i.default(function(t,e){var r=void 0;try{r=t.getContext("webgl",e)}catch(t){(0,a.error)(t)}if(!r)try{r=t.getContext("experimental-webgl",e)}catch(t){(0,a.error)(t)}if(!r)throw new Error("Could not create WebGL context, attributes="+JSON.stringify(e));return r}(t.canvas,e));return{canvasContextAttributes:e,webGlRenderer:new o.default(r)}}},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t){var e="inline"===window.getComputedStyle(t,null).display?t.parentNode:t,r=e.clientWidth,n=e.clientHeight,i=t.canvas,o=window.devicePixelRatio||1;i.style.width=r+"px",i.style.height=n+"px";var a=Math.round(r*o),u=Math.round(n*o);a===i.width&&u===i.height||(i.width=a,i.height=u),a===t.width&&u===t.height||(t.width=a,t.height=u)}},function(t,e,r){"use strict";e.__esModule=!0;var n=r(206);Object.defineProperty(e,"default",{enumerable:!0,get:function(){return function(t){return t&&t.__esModule?t:{default:t}}(n).default}})},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}e.__esModule=!0;var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=n(r(38)),u=n(r(20)),s=r(4),f=n(r(207)),c=function(t){function e(r){var n,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=n=i(this,t.call(this,r));return Object.defineProperties(a,{previousSrc:{value:void 0,writable:!0}}),a.textureHints=void 0,a.textureAtlasPromise=new Promise(function(t){Object.defineProperty(a,"resolveTextureAtlasPromise",{value:t,writable:!0})}),o=a,i(n,o)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.loadTextureAtlas=function(){var t=this.getAttribute(s.ATTR_SRC);return t&&(0,f.default)(this,t),this.textureAtlasPromise},e.prototype.loadTexture=function(){this.textureAtlas||this.loadTextureAtlas()},o(e,[{key:"textureId",get:function(){return this.entity.id}},{key:"textureLibrary",get:function(){return a.default}}]),e}(u.default);e.default=c},function(t,e,r){"use strict";e.__esModule=!0;var n=r(2),i=function(t){return t&&t.__esModule?t:{default:t}}(r(208));e.default=function(t,e){if(t.previousSrc===e)return t.textureAtlasPromise;t.previousSrc=e;var r=(0,i.default)(t);return t.textureAtlasPromise=t.textureLibrary.loadTextureAtlas(t.textureId,e,r).then(function(e){return t.textureAtlas=e,t.textureHints=r,(0,n.debug)("[texture-atlas] textureAtlas loaded",e),t.resolveTextureAtlasPromise&&(t.resolveTextureAtlasPromise(e),t.resolveTextureAtlasPromise=null),e}),t.textureAtlasPromise}},function(t,e,r){"use strict";e.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(r(79)),i=r(4);e.default=function(t){return{flipY:(0,n.default)(t,i.ATTR_FLIP_Y,!1),repeatable:(0,n.default)(t,i.ATTR_REPEATABLE,!1),premultiplyAlpha:(0,n.default)(t,i.ATTR_PREMULTIPLY_ALPHA,!0),nearest:(0,n.default)(t,i.ATTR_NEAREST,!1)}}},function(t,e,r){"use strict";e.__esModule=!0;var n=r(210);Object.defineProperty(e,"default",{enumerable:!0,get:function(){return function(t){return t&&t.__esModule?t:{default:t}}(n).default}})},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}e.__esModule=!0;var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u=r(39),s=n(r(62)),f=r(7),c=r(2),l=n(r(20)),h=r(4),d=function(t){return function(t){var e=t.descriptor,r=t.capacity,n=t.vertexShader,i=t.fragmentShader,o=t.primitive,a=t.voNew,u=t.voZero;return{descriptor:e,vertexShader:n,fragmentShader:i,primitive:o,capacity:parseInt(r,10),voNew:(0,f.createVoPropsSetter)(a),voZero:(0,f.createVoPropsSetter)(u)}}({descriptor:t.getAttribute(h.ATTR_DESCRIPTOR),vertexShader:t.getAttribute(h.ATTR_VERTEX_SHADER),fragmentShader:t.getAttribute(h.ATTR_FRAGMENT_SHADER),primitive:t.getAttribute(h.ATTR_PRIMITIVE),capacity:t.getAttribute(h.ATTR_CAPACITY),voNew:t.getAttribute(h.ATTR_VO_NEW),voZero:t.getAttribute(h.ATTR_VO_ZERO)})},p=function(t){var e=d(t);if(function(t){return(0,f.isNonEmptyString)(t.descriptor)&&(0,f.isNonEmptyString)(t.vertexShader)&&(0,f.isNonEmptyString)(t.fragmentShader)&&(0,f.isNonEmptyString)(t.primitive)&&(0,f.isNumberGreaterThanZero)(t.capacity)}(e))return t.spriteGroup=new s.default(t.resourceLibrary,t.textureLibrary,e),t.resolveSpriteGroupPromise(t.spriteGroup),t.resolveSpriteGroupPromise=null,t.spriteGroup},y=function(t,e){var r=t.spriteGroup;if(r||(r=p(t),(0,c.debug)("[sprite-group] spriteGroup created",t.spriteGroup)),r){var n=t.getAttribute(h.ATTR_TEXTURE_MAP);n&&t.previousTextureMap!==n&&(t.previousTextureMap=n,function(t,e){var r=t.spriteGroup,n=(0,f.parseCssStyledProperties)(e);if(n&&"object"===(void 0===n?"undefined":a(n))){t.textureMap={};var i=[];Object.keys(n).forEach(function(e){var o=n[e],a=document.querySelector(o);-1===i.indexOf(a)&&i.push(a),t.textureMap[e]=a.textureId,r.setTexture(e,a.textureId)}),(0,c.debug)("[sprite-group] use textures from",i),i.forEach(function(t){return t.loadTexture()})}}(t,n),(0,c.debug)("[sprite-group] textureMap synced",t.textureMap))}},b=function(t,e){var r=t.spriteGroup;r&&r.renderFrame(e)},v=function(t){function e(r){var n,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=n=i(this,t.call(this,r));return a.spriteGroup=null,a.spriteGroupPromise=new Promise(function(t){Object.defineProperty(a,"resolveSpriteGroupPromise",{value:t,writable:!0})}),Object.defineProperty(a,"previousTextureMap",{value:null,writable:!0}),a.entity.on("renderFrame",function(t){return y(n,t)}),a.entity.on("postRenderFrame",function(t){return b(n,t)}),o=a,i(n,o)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.createSpriteGroup=function(){return this.spriteGroup||p(this),this.spriteGroupPromise},o(e,[{key:"textureLibrary",get:function(){return u.textureLibrary}},{key:"resourceLibrary",get:function(){return u.resourceLibrary}}]),e}(l.default);e.default=v},function(t,e,r){var n=r(212);"string"==typeof n&&(n=[[t.i,n,""]]);var i={hmr:!0};i.transform=void 0;r(214)(n,i);n.locals&&(t.exports=n.locals)},function(t,e,r){(t.exports=r(213)(void 0)).push([t.i,"blitpunk-canvas {\n  display: inline-block;\n  font-size: 0;\n  margin: 0;\n  padding: 0; }\n  blitpunk-canvas > canvas {\n    border: 0;\n    margin: 0;\n    overflow: hidden;\n    padding: 0;\n    -ms-touch-action: none;\n    touch-action: none;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none; }\n\nblitpunk-entity,\nblitpunk-texture-atlas,\nblitpunk-sprite-group {\n  display: none; }\n",""])},function(t,e){function r(t,e){var r=t[1]||"",n=t[3];if(!n)return r;if(e&&"function"==typeof btoa){var i=function(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}(n),o=n.sources.map(function(t){return"/*# sourceURL="+n.sourceRoot+t+" */"});return[r].concat(o).concat([i]).join("\n")}return[r].join("\n")}t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=r(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n}).join("")},e.i=function(t,r){"string"==typeof t&&(t=[[null,t,""]]);for(var n={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(n[o]=!0)}for(i=0;i<t.length;i++){var a=t[i];"number"==typeof a[0]&&n[a[0]]||(r&&!a[2]?a[2]=r:r&&(a[2]="("+a[2]+") and ("+r+")"),e.push(a))}},e}},function(t,e,r){function n(t,e){for(var r=0;r<t.length;r++){var n=t[r],i=l[n.id];if(i){i.refs++;for(a=0;a<i.parts.length;a++)i.parts[a](n.parts[a]);for(;a<n.parts.length;a++)i.parts.push(f(n.parts[a],e))}else{for(var o=[],a=0;a<n.parts.length;a++)o.push(f(n.parts[a],e));l[n.id]={id:n.id,refs:1,parts:o}}}}function i(t,e){for(var r=[],n={},i=0;i<t.length;i++){var o=t[i],a=e.base?o[0]+e.base:o[0],u={css:o[1],media:o[2],sourceMap:o[3]};n[a]?n[a].parts.push(u):r.push(n[a]={id:a,parts:[u]})}return r}function o(t,e){var r=d(t.insertInto);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=b[b.length-1];if("top"===t.insertAt)n?n.nextSibling?r.insertBefore(e,n.nextSibling):r.appendChild(e):r.insertBefore(e,r.firstChild),b.push(e);else if("bottom"===t.insertAt)r.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=d(t.insertInto+" "+t.insertAt.before);r.insertBefore(e,i)}}function a(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=b.indexOf(t);e>=0&&b.splice(e,1)}function u(t){var e=document.createElement("style");return t.attrs.type="text/css",s(e,t.attrs),o(t,e),e}function s(t,e){Object.keys(e).forEach(function(r){t.setAttribute(r,e[r])})}function f(t,e){var r,n,i,f;if(e.transform&&t.css){if(!(f=e.transform(t.css)))return function(){};t.css=f}if(e.singleton){var l=y++;r=p||(p=u(e)),n=c.bind(null,r,l,!1),i=c.bind(null,r,l,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(r=function(t){var e=document.createElement("link");return t.attrs.type="text/css",t.attrs.rel="stylesheet",s(e,t.attrs),o(t,e),e}(e),n=function(t,e,r){var n=r.css,i=r.sourceMap,o=void 0===e.convertToAbsoluteUrls&&i;(e.convertToAbsoluteUrls||o)&&(n=v(n));i&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([n],{type:"text/css"}),u=t.href;t.href=URL.createObjectURL(a),u&&URL.revokeObjectURL(u)}.bind(null,r,e),i=function(){a(r),r.href&&URL.revokeObjectURL(r.href)}):(r=u(e),n=function(t,e){var r=e.css,n=e.media;n&&t.setAttribute("media",n);if(t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}.bind(null,r),i=function(){a(r)});return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else i()}}function c(t,e,r,n){var i=r?"":n.css;if(t.styleSheet)t.styleSheet.cssText=m(e,i);else{var o=document.createTextNode(i),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}var l={},h=function(t){var e;return function(){return void 0===e&&(e=t.apply(this,arguments)),e}}(function(){return window&&document&&document.all&&!window.atob}),d=function(t){var e={};return function(t){if(void 0===e[t]){var r=function(t){return document.querySelector(t)}.call(this,t);if(r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}e[t]=r}return e[t]}}(),p=null,y=0,b=[],v=r(215);t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||(e.singleton=h()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var r=i(t,e);return n(r,e),function(t){for(var o=[],a=0;a<r.length;a++){var u=r[a];(s=l[u.id]).refs--,o.push(s)}if(t){n(i(t,e),e)}for(a=0;a<o.length;a++){var s=o[a];if(0===s.refs){for(var f=0;f<s.parts.length;f++)s.parts[f]();delete l[s.id]}}}};var m=function(){var t=[];return function(e,r){return t[e]=r,t.filter(Boolean).join("\n")}}()},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var r=e.protocol+"//"+e.host,n=r+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var i=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(i))return t;var o;return o=0===i.indexOf("//")?i:0===i.indexOf("/")?r+i:n+i.replace(/^\.\//,""),"url("+JSON.stringify(o)+")"})}}])});

/***/ })

});